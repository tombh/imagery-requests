!function e(t,s,a){function r(i,n){if(!s[i]){if(!t[i]){var l="function"==typeof require&&require;if(!n&&l)return l(i,!0);if(o)return o(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var d=s[i]={exports:{}};t[i][0].call(d.exports,function(e){var s=t[i][1][e];return r(s?s:e)},d,d.exports,e,t,s,a)}return s[i].exports}for(var o="function"==typeof require&&require,i=0;i<a.length;i++)r(a[i]);return r}({"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/actions/index.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){return{type:Ee,data:e}}function o(e){return{type:Te,data:e}}function i(){return{type:we}}function n(){return{type:ke}}function l(){return{type:qe}}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:Se,data:e,error:t,receivedAt:Date.now()}}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.limit=20;var t=(0,ye.stringify)(e);return ue(ve.default.api+"/requests?"+t,l,u)}function c(){return{type:Pe}}function m(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:xe,data:e,error:s,receivedAt:t}}function p(){return function(e,t){e(c());var s=t().requestsAll;if(null!==s.receivedAt){var a=Date.now(),r=36e5;if(a-s.receivedAt<r)return e(m(s.data,s.receivedAt))}(0,he.default)(ve.default.api+"/requests?footprint=true&limit=9999").then(function(e){if(e.status>=400)throw new Error("Bad response");return e.json()}).then(function(t){e(m(t,Date.now()))},function(t){return console.log("e",t),e(m(null,null,"Data not available"))})}}function f(){return{type:Ce}}function h(){return{type:Re}}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:Me,data:e,error:t,receivedAt:Date.now()}}function g(e,t){var s=(0,ye.stringify)(t);return ue(ve.default.api+"/requests/"+e+"?"+s,h,y)}function v(){return{type:Le}}function b(){return{type:Ae}}function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:Fe,data:e,error:t,receivedAt:Date.now()}}function E(e){return ue(ve.default.api+"/requests/"+e+"/tasks?limit=100",b,_)}function T(){return{type:ze}}function w(){return{type:Ie}}function q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:Ue,data:e,error:t,receivedAt:Date.now()}}function S(e,t){return ue(ve.default.api+"/requests/"+e+"/tasks/"+t,w,q)}function k(){return{type:je}}function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:Ne,data:e,error:t,receivedAt:Date.now()}}function x(){return ue(ve.default.api+"/users",k,P)}function j(e){return{type:Ye,tab:e}}function N(){return{type:Be}}function D(){return{type:Ve}}function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:He,data:e,error:t,receivedAt:Date.now()}}function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.limit=10;var s=(0,ye.stringify)(t);return de(ve.default.api+"/users/"+e+"/tasks?"+s,D,O)}function M(){return{type:Ke}}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:We,data:e,error:t,receivedAt:Date.now()}}function A(e,t,s){return ce(ve.default.api+"/requests/"+e+"/tasks/"+t+"/updates",s,M,C)}function F(){return{type:Qe}}function L(){return{type:Ge}}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:Ze,data:e,error:t,receivedAt:Date.now()}}function U(e){return ce(ve.default.api+"/requests",e,L,I)}function z(e,t){return me(ve.default.api+"/requests/"+e,t,L,I)}function Y(){return{type:et}}function V(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:tt,data:e,error:t,receivedAt:Date.now()}}function H(e,t){return pe(ve.default.api+"/requests/"+e,Y,V)}function B(){return{type:Je}}function K(){return{type:Xe}}function W(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:$e,data:e,error:t,receivedAt:Date.now()}}function Q(e,t){return ce(ve.default.api+"/requests/"+e+"/tasks",t,K,W)}function G(e,t,s){return me(ve.default.api+"/requests/"+e+"/tasks/"+t,s,K,W)}function Z(){return{type:st}}function J(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:at,data:e,error:t,receivedAt:Date.now()}}function X(e,t){return pe(ve.default.api+"/requests/"+e+"/tasks/"+t,Z,J)}function $(){return{type:De}}function ee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:Oe,data:e,error:t,receivedAt:Date.now()}}function te(){return ue(ve.default.api+"/stats",$,ee)}function se(e){return{type:rt,layer:e}}function ae(){return{type:ot}}function re(){return{type:ut}}function oe(e){return{type:it,layer:e}}function ie(e){return{type:nt,center:e}}function ne(e){return{type:lt,zoom:e}}function le(e,t,s,a){return function(r,o){r(s()),(0,he.default)(e,t).then(function(e){if(e.status>=400)throw new Error("Bad response");return e.json()}).then(function(e){r(a(e))},function(e){return console.log("e",e),r(a(null,"Data not available"))})}}function ue(e,t,s){return le(e,null,t,s)}function de(e,t,s){var a={headers:{Authorization:"Bearer "+_e.default.getState().user.token}};return le(e,a,t,s)}function ce(e,t,s,a){var r={method:"POST",headers:{Authorization:"Bearer "+_e.default.getState().user.token},body:JSON.stringify(t)};return le(e,r,s,a)}function me(e,t,s,a){var r={method:"PATCH",headers:{Authorization:"Bearer "+_e.default.getState().user.token},body:JSON.stringify(t)};return le(e,r,s,a)}function pe(e,t,s){var a={method:"DELETE",headers:{Authorization:"Bearer "+_e.default.getState().user.token}};return le(e,a,t,s)}Object.defineProperty(s,"__esModule",{value:!0}),s.RESET_SEARCH_MAP=s.SET_SEARCH_MAP_ZOOM=s.SET_SEARCH_MAP_CENTER=s.SET_SEARCH_MAP_BASELAYER=s.RESET_MAP_LAYER=s.SET_MAP_LAYER=s.FINISH_DELETE_TASK=s.START_DELETE_TASK=s.FINISH_DELETE_REQUEST=s.START_DELETE_REQUEST=s.FINISH_POST_TASK=s.START_POST_TASK=s.RESET_TASK_FORM=s.FINISH_POST_REQUEST=s.START_POST_REQUEST=s.RESET_REQUEST_FORM=s.FINISH_ADD_TASK_STATUS_UPDATE=s.START_ADD_TASK_STATUS_UPDATE=s.INVALIDATE_USER_TASKS=s.RECEIVE_USER_TASKS=s.REQUEST_USER_TASKS=s.SELECT_DASHBOARD_TAB=s.INVALIDATE_TASK=s.RECEIVE_TASK=s.REQUEST_TASK=s.INVALIDATE_TASKS=s.RECEIVE_TASKS=s.REQUEST_TASKS=s.INVALIDATE_REQUEST=s.RECEIVE_REQUEST=s.REQUEST_REQUEST=s.RECEIVE_GENERAL_STATS=s.REQUEST_GENERAL_STATS=s.RECEIVE_USERS=s.REQUEST_USERS=s.RECEIVE_ALL_REQUESTS=s.REQUEST_ALL_REQUESTS=s.INVALIDATE_REQUESTS=s.RECEIVE_REQUESTS=s.REQUEST_REQUESTS=s.LOGOUT_USER=s.SET_USER_PROFILE=s.SET_USER_TOKEN=void 0,s.setUserToken=r,s.setUserProfile=o,s.logoutUser=i,s.invalidateRequests=n,s.requestRequests=l,s.receiveRequests=u,s.fetchRequests=d,s.requestAllRequests=c,s.receiveAllRequests=m,s.fetchAllRequests=p,s.invalidateRequest=f,s.requestRequest=h,s.receiveRequest=y,s.fetchRequest=g,s.invalidateTasks=v,s.requestTasks=b,s.receiveTasks=_,s.fetchRequestTasks=E,s.invalidateTask=T,s.requestTask=w,s.receiveTask=q,s.fetchTask=S,s.requestUsers=k,s.receiveUsers=P,s.fetchUsers=x,s.selectDashboardTab=j,s.invalidateUserTasks=N,s.requestUserTasks=D,s.receiveUserTasks=O,s.fetchRequestUserTasks=R,s.startAddTaskStatusUpdate=M,s.finishAddTaskStatusUpdate=C,s.addTaskStatusUpdate=A,s.resetRequestFrom=F,s.startPostRequest=L,s.finishPostRequest=I,s.postRequest=U,s.patchRequest=z,s.startDeleteRequest=Y,s.finishDeleteRequest=V,s.deleteRequest=H,s.resetTaskFrom=B,s.startPostTask=K,s.finishPostTask=W,s.postTask=Q,s.patchTask=G,s.startDeleteTask=Z,s.finishDeleteTask=J,s.deleteTask=X,s.requestGeneralStats=$,s.receiveGeneralStats=ee,s.fetchGeneralStats=te,s.setMapBaseLayer=se,s.resetMapBaseLayer=ae,s.resetSearchMap=re,s.setSearchMapBaseLayer=oe,s.setSearchMapBaseCenter=ie,s.setSearchMapBaseZoom=ne;var fe=e("isomorphic-fetch"),he=a(fe),ye=e("qs"),ge=e("../config"),ve=a(ge),be=e("../utils/store"),_e=a(be),Ee=s.SET_USER_TOKEN="SET_USER_TOKEN",Te=s.SET_USER_PROFILE="SET_USER_PROFILE",we=s.LOGOUT_USER="LOGOUT_USER",qe=s.REQUEST_REQUESTS="REQUEST_REQUESTS",Se=s.RECEIVE_REQUESTS="RECEIVE_REQUESTS",ke=s.INVALIDATE_REQUESTS="INVALIDATE_REQUESTS",Pe=s.REQUEST_ALL_REQUESTS="REQUEST_All_REQUESTS",xe=s.RECEIVE_ALL_REQUESTS="RECEIVE_All_REQUESTS",je=s.REQUEST_USERS="REQUEST_USERS",Ne=s.RECEIVE_USERS="RECEIVE_USERS",De=s.REQUEST_GENERAL_STATS="REQUEST_GENERAL_STATS",Oe=s.RECEIVE_GENERAL_STATS="RECEIVE_GENERAL_STATS",Re=s.REQUEST_REQUEST="REQUEST_REQUEST",Me=s.RECEIVE_REQUEST="RECEIVE_REQUEST",Ce=s.INVALIDATE_REQUEST="INVALIDATE_REQUEST",Ae=s.REQUEST_TASKS="REQUEST_TASKS",Fe=s.RECEIVE_TASKS="RECEIVE_TASKS",Le=s.INVALIDATE_TASKS="INVALIDATE_TASKS",Ie=s.REQUEST_TASK="REQUEST_TASK",Ue=s.RECEIVE_TASK="RECEIVE_TASK",ze=s.INVALIDATE_TASK="INVALIDATE_TASK",Ye=s.SELECT_DASHBOARD_TAB="SELECT_DASHBOARD_TAB",Ve=s.REQUEST_USER_TASKS="REQUEST_USER_TASKS",He=s.RECEIVE_USER_TASKS="RECEIVE_USER_TASKS",Be=s.INVALIDATE_USER_TASKS="INVALIDATE_USER_TASKS",Ke=s.START_ADD_TASK_STATUS_UPDATE="START_ADD_TASK_STATUS_UPDATE",We=s.FINISH_ADD_TASK_STATUS_UPDATE="FINISH_ADD_TASK_STATUS_UPDATE",Qe=s.RESET_REQUEST_FORM="RESET_REQUEST_FORM",Ge=s.START_POST_REQUEST="START_POST_REQUEST",Ze=s.FINISH_POST_REQUEST="FINISH_POST_REQUEST",Je=s.RESET_TASK_FORM="RESET_TASK_FORM",Xe=s.START_POST_TASK="START_POST_TASK",$e=s.FINISH_POST_TASK="FINISH_POST_TASK",et=s.START_DELETE_REQUEST="START_DELETE_REQUEST",tt=s.FINISH_DELETE_REQUEST="FINISH_DELETE_REQUEST",st=s.START_DELETE_TASK="START_DELETE_TASK",at=s.FINISH_DELETE_TASK="FINISH_DELETE_TASK",rt=s.SET_MAP_LAYER="SET_MAP_LAYER",ot=s.RESET_MAP_LAYER="SET_MAP_LAYER",it=s.SET_SEARCH_MAP_BASELAYER="SET_SEARCH_MAP_BASELAYER",nt=s.SET_SEARCH_MAP_CENTER="SET_SEARCH_MAP_CENTER",lt=s.SET_SEARCH_MAP_ZOOM="SET_SEARCH_MAP_ZOOM",ut=s.RESET_SEARCH_MAP="RESET_SEARCH_MAP"},{"../config":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/config.js","../utils/store":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/store.js","isomorphic-fetch":"isomorphic-fetch",qs:"qs"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/components/dashboard-map.js":[function(e,t,s){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}var o=e("react"),i=r(o),n=e("react-dom"),l=e("mapbox-gl"),u=r(l),d=e("@turf/center"),c=r(d),m=e("@turf/bbox"),p=r(m),f=e("lodash"),h=r(f),y=e("./map-layers"),g=r(y),v=e("./map-task-popover"),b=r(v),_=e("../utils/map"),E=a(_),T=e("../utils/constants"),w=i.default.createClass({displayName:"DashboardMap",propTypes:{onBaseLayerChange:o.PropTypes.func,selectedLayer:o.PropTypes.object,mapId:o.PropTypes.string,results:o.PropTypes.object,className:o.PropTypes.string},zoomThreshold:11,componentDidMount:function(){this.map=E.setupMap(this.refs.map,this.props.selectedLayer.url),this.map.on("load",this.onMapLoaded)},onMapLoaded:function(){var e=this;this.setupFeatures(this.props.results),this.map.on("mousemove",function(t){var s=e.map.queryRenderedFeatures(t.point,{layers:e.getActiveLayers()});if(e.map.getCanvas().style.cursor=s.length?"pointer":"",e.map.getZoom()>=e.zoomThreshold){var a=e.map.queryRenderedFeatures(t.point,{layers:["task-polygon"]});if(a.length){e.map.setFilter("task-highlight",["==","_id",a[0].properties._id]);var r=h.default.find(T.taskStatusStyles,{name:a[0].properties.status});e.map.setPaintProperty("task-highlight","fill-color",r.color),e.map.setPaintProperty("task-polygon","fill-opacity",.1)}else e.map.setFilter("task-highlight",["==","_id",""]),e.map.setPaintProperty("task-polygon","fill-opacity",.64)}}),this.map.on("click",function(t){var s=e.map.queryRenderedFeatures(t.point,{layers:e.getActiveLayers()});if(s.length){var a=s[0],r=document.createElement("div");(0,n.render)(i.default.createElement(b.default,{data:a.properties}),r),(new u.default.Popup).setLngLat((0,c.default)(a).geometry.coordinates).setDOMContent(r).addTo(e.map)}}),this.map.on("zoom",function(){e.map.getSource("task")&&e.map.getSource("points")&&(e.map.getZoom()<e.zoomThreshold?e.showPoints():e.hidePoints())})},getActiveLayers:function(){return this.map.getZoom()<this.zoomThreshold?["task-points"]:["task-polygon"]},componentWillUnmount:function(){this.map.remove()},setupFeatures:function(e){this.map._loaded&&e&&(e.features&&e.features.length||e.geometry&&e.geometry.coordinates.length)&&(this.addFeatures(e),this.zoomToFeatures(e))},componentWillReceiveProps:function(e){var t=this.props.results,s=e.results;!t||!t.features.length||s&&s.features.length?s&&!h.default.isEqual(this.props.results,s)&&this.updateFeatures(s):this.refreshMap(),t&&t.features.length||!s||!s.features.length||this.setupFeatures(s),e.selectedLayer.id!==this.props.selectedLayer.id&&this.map.removeSource("raster-tiles").addSource("raster-tiles",{type:"raster",tiles:[e.selectedLayer.url],tileSize:256})},showPoints:function(){this.map.setLayoutProperty("task-points","visibility","visible"),this.map.setLayoutProperty("task-polygon","visibility","none"),this.map.setLayoutProperty("task-highlight","visibility","none")},hidePoints:function(){this.map.setLayoutProperty("task-points","visibility","none"),this.map.setLayoutProperty("task-polygon","visibility","visible"),this.map.setLayoutProperty("task-highlight","visibility","visible")},addFeatures:function(e){this.map.addSource("task",{type:"geojson",data:e}),this.map.addLayer({id:"task-highlight",type:"fill",source:"task",paint:{"fill-opacity":.64},layout:{visibility:"none"},filter:["==","_id",""]}),this.map.addLayer({id:"task-polygon",type:"fill",source:"task",paint:{"fill-color":{property:"status",type:"categorical",stops:T.taskStatusStyles.map(function(e){return[e.name,e.color]})},"fill-opacity":.64},layout:{visibility:"none"}});var t=h.default.cloneDeep(e);t.features.forEach(function(e){return e.geometry=(0,c.default)(e).geometry,e}),this.map.addSource("points",{type:"geojson",data:t}),this.map.addLayer({id:"task-points",type:"circle",source:"points",paint:{"circle-color":{property:"status",type:"categorical",stops:T.taskStatusStyles.map(function(e){return[e.name,e.color]})},"circle-radius":10}})},zoomToFeatures:function(e){this.map.fitBounds((0,p.default)(e),{padding:15,duration:0})},updateFeatures:function(e){this.map.getSource("task")&&this.map.getSource("points")&&(this.removeFeatures(),this.addFeatures(e),this.zoomToFeatures(e))},removeFeatures:function(){this.map.removeLayer("task-highlight"),this.map.removeLayer("task-polygon"),this.map.removeLayer("task-points"),this.map.removeSource("task"),this.map.removeSource("points")},refreshMap:function(){this.removeFeatures(),this.map.flyTo({center:[0,20],zoom:1})},render:function(){return i.default.createElement("div",{className:this.props.className},i.default.createElement("div",{className:"map-layers"},i.default.createElement(g.default,{selectedLayer:this.props.selectedLayer,onBaseLayerSelect:this.props.onBaseLayerChange})),i.default.createElement("div",{id:this.props.mapId,ref:"map"}))}});t.exports=w},{"../utils/constants":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/constants.js","../utils/map":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/map.js","./map-layers":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/components/map-layers.js","./map-task-popover":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/components/map-task-popover.js","@turf/bbox":"@turf/bbox","@turf/center":"@turf/center",lodash:"lodash","mapbox-gl":"mapbox-gl",react:"react","react-dom":"react-dom"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/components/edit-map.js":[function(e,t,s){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}var o=e("react"),i=r(o),n=e("mapbox-gl-draw"),l=r(n),u=e("@turf/bbox"),d=r(u),c=e("lodash"),m=r(c),p=e("./map-layers"),f=r(p),h=e("../utils/mapbox-styles"),y=e("../utils/map"),g=a(y),v=i.default.createClass({displayName:"EditMap",propTypes:{selectedLayer:o.PropTypes.object,mapId:o.PropTypes.string,className:o.PropTypes.string,onFeatureDraw:o.PropTypes.func,onFeatureRemove:o.PropTypes.func,onBaseLayerSelect:o.PropTypes.func,geometry:o.PropTypes.object,otherTasks:o.PropTypes.object},map:null,drawPlugin:null,wasDraw:null,componentDidMount:function(){this.map=g.setupMap(this.refs.map,this.props.selectedLayer.url),this.addDraw(),this.map.on("load",this.onMapLoaded)},componentWillUnmount:function(){this.map.remove()},componentWillReceiveProps:function(e){var t=this.props.geometry,s=e.geometry;s||(this.drawPlugin.deleteAll(),this.startDrawing()),(t&&s&&s.geometry.coordinates[0]&&!m.default.isEqual(t,s)||!t&&s&&s.geometry.coordinates)&&this.loadExistingSource(s),this.map._loaded&&!m.default.isEqual(this.props.otherTasks,e.otherTasks)&&this.addShadowFeatures(e.otherTasks),e.selectedLayer.id!==this.props.selectedLayer.id&&this.map.removeSource("raster-tiles").addSource("raster-tiles",{type:"raster",tiles:[e.selectedLayer.url],tileSize:256})},onMapLoaded:function(){var e=this,t=document.querySelector(".mapbox-gl-draw_trash"),s=t.classList;s.add("disabled"),s.remove("active"),t.addEventListener("click",function(){"direct_select"===e.drawPlugin.getMode()&&(e.drawPlugin.deleteAll(),e.startDrawing(),s.add("disabled"),s.remove("active"))});var a=this.props.geometry;a&&a.geometry.coordinates?this.loadExistingSource(a):this.addNewSource(),this.addShadowFeatures(this.props.otherTasks)},addShadowFeatures:function(e){null!==e&&(this.map.getSource("shadow-features")&&this.map.removeSource("shadow-features"),this.map.addSource("shadow-features",{type:"geojson",data:e}),this.map.getLayer("shadow-features")||this.map.addLayer({id:"shadow-features",type:"fill",source:"shadow-features",paint:{"fill-color":"#000","fill-opacity":.16}}),this.props.geometry||this.map.fitBounds((0,d.default)(e),{padding:30,duration:0}))},addDraw:function(){var e=this;this.drawPlugin=new l.default({displayControlsDefault:!1,controls:{polygon:!0,trash:!0},styles:h.mbStyles}),this.map.addControl(this.drawPlugin),this.map.on("draw.create",function(){return e.handleDraw()}),this.map.on("draw.delete",function(){return e.handleDraw()}),this.map.on("draw.update",function(){return e.handleDraw()}),this.map.on("draw.selectionchange",function(){var t=e.drawPlugin.getSelectedIds(),s=document.querySelector(".mapbox-gl-draw_trash").classList;t.length?(e.drawPlugin.changeMode("direct_select",{featureId:t[0]}),s.add("active"),s.remove("disabled")):(s.add("disabled"),s.remove("active"))}),this.startDrawing()},loadExistingSource:function(e){e=Object.assign({},e),e.id="edit-layer",this.limitDrawing(),!this.wasDraw&&this.zoomToFeature(e),this.wasDraw=!1,this.drawPlugin.set({type:"FeatureCollection",features:[e]})},addNewSource:function(){this.map.addSource("edit-layer",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),this.addLayer()},addLayer:function(){this.map.addLayer({id:"edit-layer",type:"fill",source:"edit-layer",layout:{},filter:["all",["==","$type","Polygon"]]})},zoomToFeature:function(e){this.map.fitBounds((0,d.default)(e),{padding:15,duration:0})},startDrawing:function(){var e=document.querySelector(".mapbox-gl-draw_polygon").classList;e.remove("disabled"),e.add("active")},limitDrawing:function(){var e=document.querySelector(".mapbox-gl-draw_polygon").classList;e.remove("active"),e.add("disabled")},handleDraw:function(){var e=this.drawPlugin.getAll(),t=e.features.length;0===t?(this.startDrawing(),this.props.onFeatureRemove()):1===t&&(this.limitDrawing(),this.wasDraw=!0,this.props.onFeatureDraw(e))},render:function(){return i.default.createElement("div",{className:this.props.className},i.default.createElement("div",{className:"map-layers"},i.default.createElement(f.default,{selectedLayer:this.props.selectedLayer,onBaseLayerSelect:this.props.onBaseLayerSelect})),i.default.createElement("div",{id:this.props.mapId,ref:"map"}))}});t.exports=v},{"../utils/map":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/map.js","../utils/mapbox-styles":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/mapbox-styles.js","./map-layers":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/components/map-layers.js","@turf/bbox":"@turf/bbox",lodash:"lodash","mapbox-gl-draw":"mapbox-gl-draw",react:"react"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/components/home-map.js":[function(e,t,s){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}var o=e("react"),i=r(o),n=e("react-dom"),l=e("mapbox-gl"),u=r(l),d=e("@mapbox/geojson-normalize"),c=r(d),m=e("@turf/center"),p=r(m),f=e("@turf/bbox"),h=r(f),y=e("lodash"),g=r(y),v=e("oam-design-system"),b=e("../utils/map"),_=a(b),E=e("./map-layers"),T=r(E),w=e("./map-request-popover"),q=r(w),S=e("../utils/constants"),k=i.default.createClass({displayName:"HomeMap",propTypes:{onBaseLayerChange:o.PropTypes.func,selectedLayer:o.PropTypes.object,mapId:o.PropTypes.string,results:o.PropTypes.object,className:o.PropTypes.string,selectedId:o.PropTypes.string},map:null,popup:null,componentDidMount:function(){this.map=_.setupMap(this.refs.map,this.props.selectedLayer.url),this.map.on("load",this.onMapLoaded)},componentWillReceiveProps:function(e){var t=(0,c.default)(this.props.results),s=(0,c.default)(e.results);!t||!t.features.length||s&&s.features.length?s&&!g.default.isEqual(this.props.results,s)&&this.updateFeatures(s):this.refreshMap(),t&&t.features.length||!s||!s.features.length||this.setupFeatures(s),e.selectedLayer.id!==this.props.selectedLayer.id&&this.map.removeSource("raster-tiles").addSource("raster-tiles",{type:"raster",tiles:[e.selectedLayer.url],tileSize:256})},componentWillUnmount:function(){this.map.remove()},onMapLoaded:function(){var e=this;this.setupFeatures(this.props.results),this.map.on("mousemove",function(t){if(e.map.getLayer("requests")){var s=e.map.queryRenderedFeatures(t.point,{layers:["requests"]});e.map.getCanvas().style.cursor=s.length?"pointer":""}}),this.map.on("click",function(t){if(e.map.getLayer("requests")){var s=e.map.queryRenderedFeatures(t.point,{layers:["requests"]});if(s.length){var a=s[0];e.openPopup(a.properties._id)}}})},openPopup:function(e){null!==this.popup&&this.popup.remove();var t=g.default.find(this.props.results.features,function(t){return t.properties._id===e}),s=document.createElement("div");(0,n.render)(i.default.createElement(q.default,{data:t.properties}),s),this.popup=(new u.default.Popup).setLngLat((0,p.default)(t).geometry.coordinates).setDOMContent(s).addTo(this.map)},setupFeatures:function(e){this.map._loaded&&e&&(e.features&&e.features.length||e.geometry&&e.geometry.coordinates.length)&&(this.addFeatures(e),this.zoomToFeatures(e))},addFeatures:function(e){var t=g.default.cloneDeep(e);t.features.forEach(function(e){e.geometry=(0,p.default)(e).geometry}),this.map.addSource("requests",{type:"geojson",data:t}),this.map.addLayer({id:"requests",type:"circle",source:"requests",paint:{"circle-color":{property:"status",type:"categorical",stops:S.requestStatusStyles.map(function(e){return[e.name,e.color]})},"circle-radius":10}});var s=g.default.sortBy(this.props.results.features,function(e){return e.properties.created});this.openPopup(g.default.last(s).properties._id)},zoomToFeatures:function(e){this.map.fitBounds((0,h.default)(e),{padding:15,duration:0})},updateFeatures:function(e){this.map.getSource("requests")&&(this.removeFeatures(),this.addFeatures(e),this.zoomToFeatures(e))},removeFeatures:function(){this.map.removeLayer("requests"),this.map.removeSource("requests")},refreshMap:function(){this.removeFeatures(),this.map.flyTo({center:[0,20],zoom:1})},onJumpToSelect:function(e,t){if(t.preventDefault(),this.props.results.features.length){var s;switch(e){case"most-recent":var a=g.default.sortBy(this.props.results.features,function(e){return e.properties.created});s=g.default.last(a);break;case"next-due":var r=this.props.results.features.filter(function(e){return null!==e.properties.tasksInfo.nextDue});if(!r.length)return;var o=g.default.sortBy(r,function(e){return e.properties.tasksInfo.nextDue.deliveryTime});s=o[0];break;case"full-extent":return void(this.props.results&&this.map.fitBounds((0,h.default)(this.props.results)))}this.map.flyTo({center:(0,p.default)(s).geometry.coordinates,zoom:5}),this.openPopup(s.properties._id)}},render:function(){return i.default.createElement("div",{className:this.props.className},i.default.createElement("div",{className:"map-layers"},i.default.createElement(T.default,{selectedLayer:this.props.selectedLayer,onBaseLayerSelect:this.props.onBaseLayerChange})),i.default.createElement("div",{id:this.props.mapId,ref:"map"}),i.default.createElement("div",{className:"map-jump"},i.default.createElement(v.Dropdown,{triggerElement:"a",triggerClassName:"button button--achromic drop__toggle--caret",triggerActiveClassName:"button--active",triggerTitle:"Jump to",triggerText:"Jump to",direction:"up",className:"drop__content",alignment:"right"},i.default.createElement("ul",{className:"drop__menu drop__menu--select"},i.default.createElement("li",null,i.default.createElement("a",{href:"#",className:"drop__menu-item",onClick:this.onJumpToSelect.bind(null,"next-due"),"data-hook":"dropdown:close"},"Next due")),i.default.createElement("li",null,i.default.createElement("a",{href:"#",className:"drop__menu-item",onClick:this.onJumpToSelect.bind(null,"most-recent"),"data-hook":"dropdown:close"},"Most recent")),i.default.createElement("li",null,i.default.createElement("a",{href:"#",className:"drop__menu-item",onClick:this.onJumpToSelect.bind(null,"full-extent"),"data-hook":"dropdown:close"},"Full extent"))))))}});t.exports=k},{"../utils/constants":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/constants.js","../utils/map":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/map.js","./map-layers":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/components/map-layers.js","./map-request-popover":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/components/map-request-popover.js","@mapbox/geojson-normalize":"@mapbox/geojson-normalize","@turf/bbox":"@turf/bbox","@turf/center":"@turf/center",lodash:"lodash","mapbox-gl":"mapbox-gl","oam-design-system":"oam-design-system",react:"react","react-dom":"react-dom"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/components/map-layers.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var r=e("react"),o=a(r),i=e("oam-design-system"),n=e("mapbox-gl"),l=a(n),u=e("../utils/map-layers"),d=a(u),c=o.default.createClass({displayName:"MapLayers",propTypes:{onBaseLayerSelect:r.PropTypes.func,selectedLayer:r.PropTypes.object},onLayerSelect:function(e,t){t.preventDefault(),this.props.onBaseLayerSelect(e)},render:function(){var e=this;return o.default.createElement(i.Dropdown,{triggerElement:"a",triggerClassName:"button-layers",triggerActiveClassName:"button--active",triggerTitle:"Choose map layer",triggerText:"Choose map layer",direction:"left",className:"drop__content--maplayers",alignment:"middle"},o.default.createElement("ul",{className:"drop__menu drop__menu--select map-layers-list"},d.default.map(function(t){return o.default.createElement("li",{key:t.id},o.default.createElement(m,{selectedLayer:e.props.selectedLayer,layer:t,onLayerSelect:e.onLayerSelect}))})))}});t.exports=c;var m=o.default.createClass({displayName:"MapLayerItem",propTypes:{selectedLayer:r.PropTypes.object,layer:r.PropTypes.object,onLayerSelect:r.PropTypes.func},map:null,componentDidMount:function(){this.map=new l.default.Map({container:this.refs.map,style:{version:8,sources:{"raster-tiles":{type:"raster",tiles:[this.props.layer.url],tileSize:256}},layers:[{id:"simple-tiles",type:"raster",source:"raster-tiles",minzoom:0,maxzoom:22}]},center:[9,0],zoom:0}),this.map.scrollZoom.disable(),this.map.boxZoom.disable(),this.map.dragRotate.disable(),this.map.dragPan.disable(),this.map.keyboard.disable(),this.map.doubleClickZoom.disable(),this.map.touchZoomRotate.disable(),this.map.touchZoomRotate.disableRotation()},componentWillUnmount:function(){this.map.remove()},render:function(){var e="drop__menu-item";return e+=this.props.selectedLayer.id===this.props.layer.id?" drop__menu-item--active":"",o.default.createElement("a",{href:"#",className:e,onClick:this.props.onLayerSelect.bind(null,this.props.layer),"data-hook":"dropdown:close"},o.default.createElement("div",{className:"map-layers-list__map",ref:"map"}),o.default.createElement("span",{className:"map-layers-list__text"},this.props.layer.name))}})},{"../utils/map-layers":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/map-layers.js","mapbox-gl":"mapbox-gl","oam-design-system":"oam-design-system",react:"react"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/components/map-request-popover.js":[function(e,t,s){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(s,"__esModule",{value:!0});var o=e("react"),i=r(o),n=e("moment"),l=r(n),u=e("lodash"),d=r(u),c=e("classnames"),m=r(c),p=e("numeral"),f=r(p),h=e("../utils/users"),y=a(h);s.default=i.default.createClass({displayName:"MapTaskPopover",propTypes:{data:o.PropTypes.object},renderNextDue:function(){var e=this.props.data.tasksInfo.nextDue;return null===e?null:i.default.createElement("p",{className:"meta-info"},"Task ",i.default.createElement("a",{href:"#/"+e.requestId+"/tasks/"+e._id},e.name)," is the next due on ",(0,l.default)(e.deliveryTime).format("YYYY/MM/DD"))},render:function(){var e=this.props.data,t=d.default.get(e.tasksInfo.status,"completed",0),s=e.tasksInfo.total-t,a=e.tasksInfo.total>0?t/e.tasksInfo.total*100:0,r=(0,m.default)("progress-bar",{"progress-bar--disabled":"canceled"===e.status});return i.default.createElement("article",{className:"popover popover--request"},i.default.createElement("header",{className:"popover__header"},i.default.createElement("h1",{className:"popover__title"},i.default.createElement("a",{href:"#/requests/"+e._id},e.name))),i.default.createElement("div",{className:"popover__body"},i.default.createElement("p",{className:"status-indicator status-indicator--"+e.status},d.default.capitalize(e.status)),i.default.createElement("p",{className:"task-author"},"Created by: ",i.default.createElement("strong",null,y.getNameFromId(e.authorId))),i.default.createElement("div",{className:"request-progress"},i.default.createElement("progress",{value:a,max:"100",className:r,style:{backgroundSize:a+"%"}}),i.default.createElement("p",{className:"progress-value"},(0,f.default)(a).format("0.0"),"%")),i.default.createElement("ul",{className:"request-tasks-info"},i.default.createElement("li",null,i.default.createElement("strong",null,s)," Active"),i.default.createElement("li",null,i.default.createElement("strong",null,t)," Complete tasks")),i.default.createElement("p",{className:"meta-info"},"Updated on ",(0,l.default)(e.updated).format("YYYY/MM/DD")," by ",y.getNameFromId(e.authorId)),this.renderNextDue()))}})},{"../utils/users":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/users.js",classnames:"classnames",lodash:"lodash",moment:"moment",numeral:"numeral",react:"react"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/components/map-task-popover.js":[function(e,t,s){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);
return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(s,"__esModule",{value:!0});var o=e("react"),i=r(o),n=e("moment"),l=r(n),u=e("../utils/users"),d=a(u),c=e("../utils/constants");s.default=i.default.createClass({displayName:"MapTaskPopover",propTypes:{data:o.PropTypes.object},render:function(){var e=this.props.data;return i.default.createElement("article",{className:"popover"},i.default.createElement("header",{className:"popover__header"},i.default.createElement("h1",{className:"popover__title"},i.default.createElement("a",{href:"#/requests/"+e.requestId+"/tasks/"+e._id},e.name))),i.default.createElement("div",{className:"popover__body"},i.default.createElement("p",{className:"status-indicator status-indicator--"+e.status},c.taskStatusMatrix[e.status]),i.default.createElement("p",{className:"task-author"},"Created by: ",i.default.createElement("strong",null,d.getNameFromId(e.authorId))),e.assigneeId?i.default.createElement("p",{className:"task-assignee"},"Assigned to: ",i.default.createElement("strong",null,d.getNameFromId(e.assigneeId))):i.default.createElement("p",{className:"task-assignee"},"Assigned to: ",i.default.createElement("strong",null,"Not assigned")),i.default.createElement("p",{className:"meta-info"},"Updated on ",(0,l.default)(e.updated).format("YYYY/MM/DD")," by ",d.getNameFromId(e.authorId))))}})},{"../utils/constants":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/constants.js","../utils/users":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/users.js",moment:"moment",react:"react"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/components/page-footer.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var r=e("react"),o=a(r),i=o.default.createClass({displayName:"PageFooter",propTypes:{},render:function(){return o.default.createElement("footer",{className:"page__footer",role:"contentinfo"},o.default.createElement("div",{className:"inner"},o.default.createElement("div",{className:"col--main"},o.default.createElement("img",{src:"assets/graphics/layout/oam-logo-v-pos.svg",alt:"OpenAerialMap logo",className:"oam-logo"}),o.default.createElement("ul",{className:"related"},o.default.createElement("li",{className:"related__item related__item--upload"},o.default.createElement("a",{href:"https://upload.openaerialmap.org/",title:"Visit OAM Uploader"},"Upload Imagery")),o.default.createElement("li",{className:"related__item related__item--browse"},o.default.createElement("a",{href:"https://beta.openaerialmap.org/",title:"Visit OAM Browser"},"Browse Imagery")))),o.default.createElement("div",{className:"col--sec"},o.default.createElement("ul",{className:"social"},o.default.createElement("li",{className:"social__item social__item--email"},o.default.createElement("a",{href:"mailto:email@example.com",title:"Contact via email"},o.default.createElement("span",null,"Email"))),o.default.createElement("li",{className:"social__item social__item--github"},o.default.createElement("a",{href:"https://github.com/hotosm",title:"See organization on github"},o.default.createElement("span",null,"Github")))),o.default.createElement("p",{className:"copyright"},"Made with love by ",o.default.createElement("a",{href:"https://developmentseed.org",title:"Visit Development Seed website"},"Development Seed")," and ",o.default.createElement("a",{href:"http://hot.openstreetmap.org/",title:"Visit the Humanitarian OpenStreetMap Team website"},"HOT"),"."))))}});t.exports=i},{react:"react"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/components/page-header.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var r=e("react"),o=a(r),i=e("react-router"),n=e("classnames"),l=a(n),u=e("../utils/auth-service"),d=a(u),c=o.default.createClass({displayName:"PageHeader",propTypes:{auth:r.PropTypes.instanceOf(d.default),user:r.PropTypes.object},getInitialState:function(){return{menu:!1}},onLogoutClick:function(e){(0,u.logout)(),i.hashHistory.push("/")},onMenuClick:function(e){e.preventDefault(),this.setState({menu:!this.state.menu})},renderUserProfileLink:function(){var e=this.props.user.profile;return e?o.default.createElement("li",null,o.default.createElement(i.Link,{to:"/dashboard",className:"global-menu-item",title:"View my tasks"},o.default.createElement("span",null,e.user_metadata.name," tasks"))):null},render:function(){var e=this.props.auth,t=(0,u.isLoggedIn)(this.props.user.token);return o.default.createElement("header",{className:"page__header",role:"banner"},o.default.createElement("div",{className:"inner"},o.default.createElement("div",{className:"page__headline"},o.default.createElement("h1",{className:"page__title"},o.default.createElement(i.Link,{to:"/",title:"Visit homepage"},"HOTOSM Imagery Coord"))),o.default.createElement("nav",{className:"page__prime-nav",role:"navigation"},o.default.createElement("h2",{className:"toggle-menu"},o.default.createElement("a",{href:"#global-menu",className:(0,l.default)({"button--active":this.state.menu}),title:"Show/hide menu",onClick:this.onMenuClick},o.default.createElement("span",null,"Browse"))),o.default.createElement("div",{className:(0,l.default)("menu-wrapper",{"menu-wrapper--open":this.state.menu}),ref:"menu"},o.default.createElement("ul",{className:"global-menu",id:"global-menu"},o.default.createElement("li",null,o.default.createElement(i.Link,{to:"/imagery-search",className:"global-menu-item"},o.default.createElement("span",null,"Imagery search"))),t?this.renderUserProfileLink():null,o.default.createElement("li",null,o.default.createElement(i.Link,{to:"/about",className:"global-menu-item",title:"About this website"},o.default.createElement("span",null,"About"))),o.default.createElement("li",null,t?o.default.createElement("button",{className:"button button--base",onClick:this.onLogoutClick},o.default.createElement("span",null,"Logout")):o.default.createElement("button",{className:"button button--primary",onClick:e.login.bind(this)},o.default.createElement("span",null,"Login"))))))))}});t.exports=c},{"../utils/auth-service":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/auth-service.js",classnames:"classnames",react:"react","react-router":"react-router"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/components/request-map.js":[function(e,t,s){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}var o=e("react"),i=r(o),n=e("react-dom"),l=e("mapbox-gl"),u=r(l),d=e("@turf/center"),c=r(d),m=e("@turf/bbox"),p=r(m),f=e("lodash"),h=r(f),y=e("./map-layers"),g=r(y),v=e("./map-task-popover"),b=r(v),_=e("../utils/map"),E=a(_),T=e("../utils/constants"),w=i.default.createClass({displayName:"RequestMap",propTypes:{onBaseLayerChange:o.PropTypes.func,selectedLayer:o.PropTypes.object,mapId:o.PropTypes.string,results:o.PropTypes.object,className:o.PropTypes.string},componentDidMount:function(){this.map=E.setupMap(this.refs.map,this.props.selectedLayer.url),this.map.on("load",this.onMapLoaded)},onMapLoaded:function(){var e=this;this.setupFeatures(this.props.results),this.map.on("mousemove",function(t){if(e.map.getLayer("task-polygon")){var s=e.map.queryRenderedFeatures(t.point,{layers:["task-polygon"]});e.map.getCanvas().style.cursor=s.length?"pointer":"";var a=e.map.queryRenderedFeatures(t.point,{layers:["task-polygon"]});if(a.length){e.map.setFilter("task-highlight",["==","_id",a[0].properties._id]);var r=h.default.find(T.taskStatusStyles,{name:a[0].properties.status});e.map.setPaintProperty("task-highlight","fill-color",r.color),e.map.setPaintProperty("task-polygon","fill-opacity",.16)}else e.map.setFilter("task-highlight",["==","_id",""]),e.map.setPaintProperty("task-polygon","fill-opacity",.64)}}),this.map.on("click",function(t){var s=e.map.queryRenderedFeatures(t.point,{layers:["task-polygon"]});if(s.length){var a=s[0],r=document.createElement("div");(0,n.render)(i.default.createElement(b.default,{data:a.properties}),r),(new u.default.Popup).setLngLat((0,c.default)(a).geometry.coordinates).setDOMContent(r).addTo(e.map)}})},componentWillUnmount:function(){this.map.remove()},setupFeatures:function(e){this.map._loaded&&e&&(e.features&&e.features.length||e.geometry&&e.geometry.coordinates.length)&&(this.addFeatures(e),this.zoomToFeatures(e))},componentWillReceiveProps:function(e){var t=this.props.results,s=e.results;!t||!t.features.length||s&&s.features.length?s&&!h.default.isEqual(this.props.results,s)&&this.updateFeatures(s):this.refreshMap(),t&&t.features.length||!s||!s.features.length||this.setupFeatures(s),e.selectedLayer.id!==this.props.selectedLayer.id&&this.map.removeSource("raster-tiles").addSource("raster-tiles",{type:"raster",tiles:[e.selectedLayer.url],tileSize:256})},addFeatures:function(e){this.map.addSource("task",{type:"geojson",data:e}),this.map.addLayer({id:"task-highlight",type:"fill",source:"task",paint:{"fill-opacity":.64},filter:["==","_id",""]}),this.map.addLayer({id:"task-polygon",type:"fill",source:"task",paint:{"fill-color":{property:"status",type:"categorical",stops:T.taskStatusStyles.map(function(e){return[e.name,e.color]})},"fill-opacity":.64}})},zoomToFeatures:function(e){this.map.fitBounds((0,p.default)(e),{padding:15,duration:0})},updateFeatures:function(e){this.map.getSource("task")&&(this.removeFeatures(),this.addFeatures(e),this.zoomToFeatures(e))},removeFeatures:function(){this.map.removeLayer("task-highlight"),this.map.removeLayer("task-polygon"),this.map.removeSource("task")},refreshMap:function(){this.removeFeatures(),this.map.flyTo({center:[0,20],zoom:1})},render:function(){return i.default.createElement("div",{className:this.props.className},i.default.createElement("div",{className:"map-layers"},i.default.createElement(g.default,{selectedLayer:this.props.selectedLayer,onBaseLayerSelect:this.props.onBaseLayerChange})),i.default.createElement("div",{id:this.props.mapId,ref:"map"}))}});t.exports=w},{"../utils/constants":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/constants.js","../utils/map":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/map.js","./map-layers":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/components/map-layers.js","./map-task-popover":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/components/map-task-popover.js","@turf/bbox":"@turf/bbox","@turf/center":"@turf/center",lodash:"lodash","mapbox-gl":"mapbox-gl",react:"react","react-dom":"react-dom"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/components/task-card.js":[function(e,t,s){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}var o=e("react"),i=r(o),n=e("react-router"),l=e("moment"),u=r(l),d=e("mapbox-gl"),c=r(d),m=e("@turf/bbox"),p=r(m),f=e("classnames"),h=r(f),y=e("../utils/users"),g=a(y),v=e("../utils/map-layers"),b=r(v),_=e("../utils/features"),E=e("../utils/constants"),T=i.default.createClass({displayName:"TaskCard",propTypes:{requestId:o.PropTypes.string,requestName:o.PropTypes.string,id:o.PropTypes.string,name:o.PropTypes.string,status:o.PropTypes.string,authorId:o.PropTypes.string,assigneeId:o.PropTypes.string,updated:o.PropTypes.string,geometry:o.PropTypes.array,editType:o.PropTypes.string},map:null,componentDidMount:function(){var e=this;this.map=new c.default.Map({container:this.refs.map,style:{version:8,sources:{"raster-tiles":{type:"raster",tiles:[b.default[0].url],tileSize:256}},layers:[{id:"simple-tiles",type:"raster",source:"raster-tiles",minzoom:0,maxzoom:22}]},center:[0,20],zoom:1,interactive:!1}),this.map.on("load",function(){var t=(0,_.geometryToFeature)(e.props.geometry);e.map.addSource("task",{type:"geojson",data:t}),e.map.addLayer({id:"task",type:"fill",source:"task",paint:{"fill-color":"#088","fill-opacity":.48}}),e.map.fitBounds((0,p.default)(t),{padding:15,duration:0})})},componentWillUnmount:function(){this.map.remove()},render:function(){var e=(0,h.default)("button-edit",{disabled:"disabled"===this.props.editType});return i.default.createElement("article",{className:"task"},i.default.createElement("div",{className:"task__media",ref:"map"}),i.default.createElement("div",{className:"task__content"},i.default.createElement("header",{className:"task__header"},i.default.createElement("p",{className:"task__subtitle"},i.default.createElement(n.Link,{to:"/requests/"+this.props.requestId},this.props.requestName)),i.default.createElement("h1",{className:"task__title"},i.default.createElement(n.Link,{to:"/requests/"+this.props.requestId+"/tasks/"+this.props.id},this.props.name))),i.default.createElement("div",{className:"task__body"},i.default.createElement("p",{className:"status-indicator status-indicator--"+this.props.status},E.taskStatusMatrix[this.props.status]),i.default.createElement("p",{className:"task-author"},"Created by: ",i.default.createElement("strong",null,g.getNameFromId(this.props.authorId))),this.props.assigneeId?i.default.createElement("p",{className:"task-assignee"},"Assigned to: ",i.default.createElement("strong",null,g.getNameFromId(this.props.assigneeId))):i.default.createElement("p",{className:"task-assignee"},"Assigned to: ",i.default.createElement("strong",null,"Not assigned")),i.default.createElement("p",{className:"meta-info"},"Updated on ",(0,u.default)(this.props.updated).format("YYYY/MM/DD")," by ",g.getNameFromId(this.props.authorId))),"none"!==this.props.editType?i.default.createElement("div",{className:"task__actions"},i.default.createElement(n.Link,{to:"/requests/"+this.props.requestId+"/tasks/"+this.props.id+"/edit",className:e},"Edit")):null))}});t.exports=T},{"../utils/constants":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/constants.js","../utils/features":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/features.js","../utils/map-layers":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/map-layers.js","../utils/users":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/users.js","@turf/bbox":"@turf/bbox",classnames:"classnames","mapbox-gl":"mapbox-gl",moment:"moment",react:"react","react-router":"react-router"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/components/task-map.js":[function(e,t,s){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}var o=e("react"),i=r(o),n=e("react-dom"),l=e("mapbox-gl"),u=r(l),d=e("@turf/center"),c=r(d),m=e("@turf/bbox"),p=r(m),f=e("lodash"),h=r(f),y=e("../utils/map"),g=a(y),v=e("../utils/constants"),b=e("./map-layers"),_=r(b),E=e("./map-task-popover"),T=r(E),w=i.default.createClass({displayName:"TaskMap",propTypes:{onBaseLayerChange:o.PropTypes.func,selectedLayer:o.PropTypes.object,mapId:o.PropTypes.string,results:o.PropTypes.object,className:o.PropTypes.string,selectedId:o.PropTypes.string},componentDidMount:function(){this.map=g.setupMap(this.refs.map,this.props.selectedLayer.url),this.map.on("load",this.onMapLoaded)},onMapLoaded:function(){var e=this;this.setupFeatures(this.props.results),this.map.on("mousemove",function(t){var s=e.map.queryRenderedFeatures(t.point,{layers:e.getActiveLayers()});e.map.getCanvas().style.cursor=s.length?"pointer":""}),this.map.on("click",function(t){var s=e.map.queryRenderedFeatures(t.point,{layers:e.getActiveLayers()});if(s.length){var a=s[0],r=document.createElement("div");(0,n.render)(i.default.createElement(T.default,{data:a.properties}),r),(new u.default.Popup).setLngLat((0,c.default)(a).geometry.coordinates).setDOMContent(r).addTo(e.map)}})},getActiveLayers:function(){return["tasks","tasks-highlight"]},componentWillUnmount:function(){this.map.remove()},setupFeatures:function(e){this.map._loaded&&e&&(e.features&&e.features.length||e.geometry&&e.geometry.coordinates.length)&&(this.addFeatures(e),this.zoomToFeatures(e))},componentWillReceiveProps:function(e){var t=this.props.results,s=e.results;t&&!s?this.refreshMap():s&&!h.default.isEqual(t,s)&&this.updateFeatures(s),!t&&s&&this.setupFeatures(s),e.selectedLayer.id!==this.props.selectedLayer.id&&this.map.removeSource("raster-tiles").addSource("raster-tiles",{type:"raster",tiles:[e.selectedLayer.url],tileSize:256})},addFeatures:function(e){this.map.addSource("task",{type:"geojson",data:e}),this.map.addLayer({id:"tasks",type:"fill",source:"task",paint:{"fill-color":"#000","fill-opacity":.16},filter:["!=","_id",this.props.selectedId]}),this.map.addLayer({id:"tasks-highlight",type:"fill",source:"task",paint:{"fill-color":{property:"status",type:"categorical",stops:v.taskStatusStyles.map(function(e){return[e.name,e.color]})},"fill-opacity":.8},filter:["==","_id",this.props.selectedId]})},zoomToFeatures:function(e){this.map.fitBounds((0,p.default)(e),{padding:15,duration:0})},updateFeatures:function(e){this.map.getSource("task")&&(this.removeFeatures(),this.addFeatures(e),this.zoomToFeatures(e))},removeFeatures:function(){this.map.removeLayer("tasks"),this.map.removeLayer("tasks-highlight"),this.map.removeSource("task")},refreshMap:function(){this.removeFeatures(),this.map.flyTo({center:[0,20],zoom:1})},render:function(){return i.default.createElement("div",{className:this.props.className},i.default.createElement("div",{className:"map-layers"},i.default.createElement(_.default,{selectedLayer:this.props.selectedLayer,onBaseLayerSelect:this.props.onBaseLayerChange})),i.default.createElement("div",{id:this.props.mapId,ref:"map"}))}});t.exports=w},{"../utils/constants":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/constants.js","../utils/map":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/map.js","./map-layers":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/components/map-layers.js","./map-task-popover":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/components/map-task-popover.js","@turf/bbox":"@turf/bbox","@turf/center":"@turf/center",lodash:"lodash","mapbox-gl":"mapbox-gl",react:"react","react-dom":"react-dom"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/components/task-update-form.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var r=e("react"),o=a(r),i=e("classnames"),n=a(i),l=e("lodash"),u=a(l),d=e("../utils/auth-service"),c=o.default.createClass({displayName:"TaskUpdateForm",propTypes:{user:r.PropTypes.object,task:r.PropTypes.object,statusUpdate:r.PropTypes.object,onSubmit:r.PropTypes.func},getInitialState:function(){return{statusError:!1,commentError:!1}},checkErrors:function(){var e=!0,t={statusError:!1,commentError:!1};return"--"===this.refs.taskUpdateStatus.value&&(t.statusError=!0,e=!1),""===this.refs.taskUpdateComment.value&&(t.commentError=!0,e=!1),this.setState(t),e},onStatusUpdateSubmit:function(e){e.preventDefault(),this.checkErrors()&&(this.props.onSubmit(this.refs.taskUpdateStatus.value,this.refs.taskUpdateComment.value),this.refs.form.reset())},render:function(){var e=this.props.user.token,t=u.default.get(this.props.user,"profile.roles",[]);if(!(0,d.isLoggedIn)(e))return null;var s=t.indexOf("surveyor")!==-1&&t.indexOf("coordinator")===-1,a=!!s&&this.props.task.assigneeId!==this.props.user.profile.user_id,r=(0,n.default)("button button--primary",{disabled:this.state.statusError||this.state.commentError});return o.default.createElement("div",{className:"task-updates-form"},a?o.default.createElement("p",null,"Suveyors can only add updates when assigned"):null,o.default.createElement("form",{className:(0,n.default)("form",{disabled:a}),ref:"form"},o.default.createElement("div",{className:"form__group"},o.default.createElement("label",{className:"form__label",htmlFor:"task-update-status"},"Status"),o.default.createElement("select",{ref:"taskUpdateStatus",className:"form__control form__control--medium",id:"task-update-status",onChange:this.checkErrors},o.default.createElement("option",{value:"--"},"Choose a status"),o.default.createElement("option",{value:"open"},"Open"),o.default.createElement("option",{value:"inprogress"},"In Progress"),o.default.createElement("option",{value:"completed"},"Completed"),o.default.createElement("option",{value:"unchanged"},"Unchanged")),this.state.statusError?o.default.createElement("p",{className:"message message--alert"},"State needs to be selected"):null),o.default.createElement("div",{className:"form__group"},o.default.createElement("label",{className:"form__label",htmlFor:"task-update-comment"},"Comment"),o.default.createElement("textarea",{ref:"taskUpdateComment",className:"form__control",id:"task-update-comment",rows:"4",placeholder:"What's the reason for the status change?",onBlur:this.checkErrors,onChange:this.checkErrors}),this.state.commentError?o.default.createElement("p",{className:"message message--alert"},"Comment can't be empty"):null),o.default.createElement("div",{className:"form__actions"},o.default.createElement("button",{type:"submit",className:r,onClick:this.onStatusUpdateSubmit},o.default.createElement("span",null,"Add update"))),this.props.statusUpdate.processing?o.default.createElement("p",null,"Submitting status update"):null))}});t.exports=c},{"../utils/auth-service":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/auth-service.js",classnames:"classnames",lodash:"lodash",react:"react"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/config.js":[function(e,t,s){"use strict";var a=e("lodash").defaultsDeep,r={local:e("./config/local.js"),production:e("./config/production.js"),staging:e("./config/staging.js")},o=r.local||{};a(o,r.production),t.exports=o},{"./config/local.js":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/config/local.js","./config/production.js":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/config/production.js","./config/staging.js":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/config/staging.js",lodash:"lodash"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/config/local.js":[function(e,t,s){"use strict";t.exports={}},{}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/config/production.js":[function(e,t,s){"use strict";t.exports={environment:"production",auth0Client:"xD5HP0K0aHMZdZjFCpC01XtIocAMYyel",auth0Domain:"smit1678.auth0.com",mbToken:"pk.eyJ1Ijoib3BlbmFlcmlhbG1hcCIsImEiOiJjaXl4MXkyZDMwMDB0MnhwN3c5b2I5MmtqIn0.-NsKzzY8CAFdKVAXqtC9Tg",api:"https://imagery-coordination.herokuapp.com"}},{}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/config/staging.js":[function(e,t,s){"use strict";t.exports={environment:"staging"}},{}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/main.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}e("babel-polyfill");var r=e("react"),o=a(r),i=e("react-dom"),n=e("react-redux"),l=e("react-router"),u=e("react-router-scroll"),d=e("react-router-redux"),c=e("mapbox-gl"),m=a(c),p=e("lodash"),f=a(p),h=e("./utils/auth-service"),y=a(h),g=e("./config"),v=a(g),b=e("./utils/store"),_=a(b),E=e("./views/app"),T=a(E),w=e("./views/home"),q=a(w),S=e("./views/uhoh"),k=a(S),P=e("./views/dashboard"),x=a(P),j=e("./views/request-page"),N=a(j),D=e("./views/request-form"),O=a(D),R=e("./views/task-form"),M=a(R),C=e("./views/task-page"),A=a(C),F=e("./views/about"),L=a(F),I=e("./views/imagery-search"),U=a(I),z=e("./actions"),Y=new y.default(v.default.auth0Client,v.default.auth0Domain),V=function(e,t){(0,h.isLoggedIn)(_.default.getState().user.token)||t({pathname:"/"})},H=function(e){return function(t,s){e=f.default.castArray(e);var a=_.default.getState().user,r=f.default.get(a,"profile.roles",[]),o=e.some(function(e){return r.indexOf(e)!==-1});(0,h.isLoggedIn)(a.token)&&o||s({pathname:"/"})}};m.default.accessToken=v.default.mbToken;var B=(0,d.syncHistoryWithStore)(l.hashHistory,_.default),K=(0,u.useScroll)(function(e,t){return e&&decodeURIComponent(t.location.pathname)!==decodeURIComponent(e.location.pathname)});_.default.dispatch((0,z.fetchUsers)()),(0,i.render)(o.default.createElement(n.Provider,{store:_.default},o.default.createElement(l.Router,{history:B,render:(0,l.applyRouterMiddleware)(K)},o.default.createElement(l.Route,{path:"/",component:T.default,auth:Y},o.default.createElement(l.Route,{path:"/dashboard",component:x.default,onEnter:V}),o.default.createElement(l.Route,{path:"/about",component:L.default}),o.default.createElement(l.Route,{path:"/imagery-search",component:U.default}),o.default.createElement(l.Route,{path:"/requests/edit",component:O.default,onEnter:H("coordinator")}),o.default.createElement(l.Route,{path:"/requests/:reqid/edit",component:O.default,onEnter:H("coordinator")}),o.default.createElement(l.Route,{path:"/requests/:reqid/tasks/edit",component:M.default,onEnter:H("coordinator")}),o.default.createElement(l.Route,{path:"/requests/:reqid/tasks/:taskid/edit",component:M.default,onEnter:H(["coordinator","surveyor"])}),o.default.createElement(l.Route,{path:"/requests/:reqid",component:N.default}),o.default.createElement(l.Route,{path:"/requests/:reqid/tasks/:taskid",component:A.default}),o.default.createElement(l.IndexRoute,{component:q.default,pageClass:"page--homepage"}),o.default.createElement(l.Route,{path:"*",component:k.default})))),document.querySelector("#app-container"))},{"./actions":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/actions/index.js","./config":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/config.js","./utils/auth-service":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/auth-service.js","./utils/store":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/store.js","./views/about":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/views/about.js","./views/app":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/views/app.js","./views/dashboard":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/views/dashboard.js","./views/home":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/views/home.js","./views/imagery-search":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/views/imagery-search.js","./views/request-form":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/views/request-form.js","./views/request-page":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/views/request-page.js","./views/task-form":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/views/task-form.js","./views/task-page":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/views/task-page.js","./views/uhoh":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/views/uhoh.js","babel-polyfill":"babel-polyfill",lodash:"lodash","mapbox-gl":"mapbox-gl",react:"react","react-dom":"react-dom","react-redux":"react-redux","react-router":"react-router","react-router-redux":"react-router-redux","react-router-scroll":"react-router-scroll"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/reducers/dashboard.js":[function(e,t,s){"use strict";function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case r.SELECT_DASHBOARD_TAB:return Object.assign({},e,{activeTab:t.tab})}return e}Object.defineProperty(s,"__esModule",{value:!0}),s.default=a;var r=e("../actions"),o={activeTab:"assigned"}},{"../actions":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/actions/index.js"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/reducers/general-stats.js":[function(e,t,s){"use strict";function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case r.REQUEST_GENERAL_STATS:return Object.assign({},e,{error:null,fetching:!0,fetched:!1});case r.RECEIVE_GENERAL_STATS:e=Object.assign({},e,{fetching:!1,fetched:!0}),t.error?e.error=t.error:e.data=t.data}return e}Object.defineProperty(s,"__esModule",{value:!0}),s.initialState=void 0,s.default=a;var r=e("../actions"),o=s.initialState={fetching:!1,fetched:!1,data:{requests:null}}},{"../actions":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/actions/index.js"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/reducers/imagery-search.js":[function(e,t,s){"use strict";function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments[1];switch(t.type){case r.RESET_SEARCH_MAP:return Object.assign({},e,i);case r.SET_SEARCH_MAP_BASELAYER:return Object.assign({},e,{baseLayer:t.layer});case r.SET_SEARCH_MAP_CENTER:return Object.assign({},e,{center:t.center});case r.SET_SEARCH_MAP_ZOOM:return Object.assign({},e,{zoom:t.zoom})}return e}Object.defineProperty(s,"__esModule",{value:!0}),s.default=a;var r=e("../actions"),o=e("../utils/map-layers"),i={baseLayer:(0,o.getImagerySearchLayers)()[0],center:[0,0],zoom:2}},{"../actions":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/actions/index.js","../utils/map-layers":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/map-layers.js"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/reducers/index.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(s,"__esModule",{value:!0}),s.reducers=void 0;var r=e("redux"),o=e("react-router-redux"),i=e("./user"),n=a(i),l=e("./users"),u=a(l),d=e("./request"),c=a(d),m=e("./requests"),p=a(m),f=e("./requests-all"),h=a(f),y=e("./tasks"),g=a(y),v=e("./task"),b=a(v),_=e("./user-tasks"),E=a(_),T=e("./dashboard"),w=a(T),q=e("./general-stats"),S=a(q),k=e("./request-form"),P=a(k),x=e("./task-form"),j=a(x),N=e("./map"),D=a(N),O=e("./imagery-search"),R=a(O),M=s.reducers={user:n.default,users:u.default,request:c.default,requests:p.default,requestsAll:h.default,task:b.default,tasks:g.default,userTasks:E.default,dashboard:w.default,generalStats:S.default,requestForm:P.default,taskForm:j.default,map:D.default,imagerySearch:R.default};s.default=(0,r.combineReducers)(Object.assign({},M,{routing:o.routerReducer}))},{"./dashboard":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/reducers/dashboard.js","./general-stats":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/reducers/general-stats.js","./imagery-search":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/reducers/imagery-search.js","./map":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/reducers/map.js","./request":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/reducers/request.js","./request-form":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/reducers/request-form.js","./requests":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/reducers/requests.js","./requests-all":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/reducers/requests-all.js","./task":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/reducers/task.js","./task-form":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/reducers/task-form.js","./tasks":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/reducers/tasks.js","./user":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/reducers/user.js","./user-tasks":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/reducers/user-tasks.js","./users":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/reducers/users.js","react-router-redux":"react-router-redux",redux:"redux"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/reducers/map.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{
default:e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments[1];switch(t.type){case n.SET_MAP_LAYER:return Object.assign({},e,{baseLayer:t.layer});case n.RESET_MAP_LAYER:return Object.assign({},e,l);default:return e}}Object.defineProperty(s,"__esModule",{value:!0}),s.initialState=void 0,s.default=r;var o=e("../utils/map-layers"),i=a(o),n=e("../actions"),l=s.initialState={baseLayer:i.default[0]}},{"../actions":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/actions/index.js","../utils/map-layers":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/map-layers.js"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/reducers/request-form.js":[function(e,t,s){"use strict";function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case r.RESET_REQUEST_FORM:return Object.assign({},e,o);case r.START_POST_REQUEST:return Object.assign({},e,{processing:!0});case r.FINISH_POST_REQUEST:e=Object.assign({},e,{processing:!1}),t.error?e.error=t.error:e.data=t.data.results||t.data}return e}Object.defineProperty(s,"__esModule",{value:!0}),s.default=a;var r=e("../actions"),o={processing:!1,error:null,data:{}}},{"../actions":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/actions/index.js"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/reducers/request.js":[function(e,t,s){"use strict";function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case r.INVALIDATE_REQUEST:return Object.assign({},e,o);case r.REQUEST_REQUEST:return Object.assign({},e,{error:null,fetching:!0,fetched:!1});case r.RECEIVE_REQUEST:e=Object.assign({},e,{fetching:!1,fetched:!0}),t.error?e.error=t.error:e.data=t.data}return e}Object.defineProperty(s,"__esModule",{value:!0}),s.default=a;var r=e("../actions"),o={fetching:!1,fetched:!1,data:{}}},{"../actions":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/actions/index.js"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/reducers/requests-all.js":[function(e,t,s){"use strict";function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case r.REQUEST_ALL_REQUESTS:return Object.assign({},e,{error:null,fetching:!0,fetched:!1});case r.RECEIVE_ALL_REQUESTS:e=Object.assign({},e,{fetching:!1,fetched:!0}),t.error?(e.error=t.error,e.receivedAt=0):(e.data=t.data,e.receivedAt=t.receivedAt)}return e}Object.defineProperty(s,"__esModule",{value:!0}),s.default=a;var r=e("../actions"),o={fetching:!1,fetched:!1,data:{meta:{page:null,limit:null,found:null},results:[]},receivedAt:null}},{"../actions":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/actions/index.js"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/reducers/requests.js":[function(e,t,s){"use strict";function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case r.INVALIDATE_REQUESTS:return Object.assign({},e,o);case r.REQUEST_REQUESTS:return Object.assign({},e,{error:null,fetching:!0,fetched:!1});case r.RECEIVE_REQUESTS:e=Object.assign({},e,{fetching:!1,fetched:!0}),t.error?e.error=t.error:e.data=t.data}return e}Object.defineProperty(s,"__esModule",{value:!0}),s.default=a;var r=e("../actions"),o={fetching:!1,fetched:!1,data:{meta:{page:null,limit:null,found:null},results:[]}}},{"../actions":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/actions/index.js"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/reducers/task-form.js":[function(e,t,s){"use strict";function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case r.RESET_TASK_FORM:return Object.assign({},e,o);case r.START_POST_TASK:return Object.assign({},e,{processing:!0});case r.FINISH_POST_TASK:e=Object.assign({},e,{processing:!1}),t.error?e.error=t.error:e.data=t.data.results||t.data}return e}Object.defineProperty(s,"__esModule",{value:!0}),s.default=a;var r=e("../actions"),o={processing:!1,error:null,data:{}}},{"../actions":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/actions/index.js"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/reducers/task.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments[1];switch(t.type){case n.INVALIDATE_TASK:return Object.assign({},e,l);case n.REQUEST_TASK:return Object.assign({},e,{error:null,fetching:!0,fetched:!1});case n.RECEIVE_TASK:e=Object.assign({},e,{fetching:!1,fetched:!0}),t.error?e.error=t.error:e.data=t.data;break;case n.START_ADD_TASK_STATUS_UPDATE:return e=i.default.cloneDeep(e),e.statusUpdate.processing=!0,e;case n.FINISH_ADD_TASK_STATUS_UPDATE:e=i.default.cloneDeep(e),e.statusUpdate.processing=!1,t.error?e.statusUpdate.error=t.error:e.data=t.data}return e}Object.defineProperty(s,"__esModule",{value:!0}),s.default=r;var o=e("lodash"),i=a(o),n=e("../actions"),l={fetching:!1,fetched:!1,data:{},statusUpdate:{processing:!1,error:null}}},{"../actions":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/actions/index.js",lodash:"lodash"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/reducers/tasks.js":[function(e,t,s){"use strict";function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case r.INVALIDATE_TASKS:return Object.assign({},e,o);case r.REQUEST_TASKS:return Object.assign({},e,{error:null,fetching:!0,fetched:!1});case r.RECEIVE_TASKS:e=Object.assign({},e,{fetching:!1,fetched:!0}),t.error?e.error=t.error:e.data=t.data}return e}Object.defineProperty(s,"__esModule",{value:!0}),s.default=a;var r=e("../actions"),o={fetching:!1,fetched:!1,data:{meta:{page:null,limit:null,found:null},results:[]}}},{"../actions":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/actions/index.js"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/reducers/user-tasks.js":[function(e,t,s){"use strict";function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case r.INVALIDATE_USER_TASKS:return Object.assign({},e,o);case r.REQUEST_USER_TASKS:return Object.assign({},e,{error:null,fetching:!0,fetched:!1});case r.RECEIVE_USER_TASKS:e=Object.assign({},e,{fetching:!1,fetched:!0}),t.error?e.error=t.error:e.data=t.data}return e}Object.defineProperty(s,"__esModule",{value:!0}),s.default=a;var r=e("../actions"),o={fetching:!1,fetched:!1,data:{meta:{page:null,limit:null,found:null},results:[]}}},{"../actions":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/actions/index.js"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/reducers/user.js":[function(e,t,s){"use strict";function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case r.SET_USER_TOKEN:return Object.assign({},e,{token:t.data});case r.SET_USER_PROFILE:return Object.assign({},e,{profile:t.data});case r.LOGOUT_USER:return Object.assign({},e,{profile:null,token:""});default:return e}}Object.defineProperty(s,"__esModule",{value:!0}),s.initialState=void 0,s.default=a;var r=e("../actions"),o=s.initialState={token:"",profile:null}},{"../actions":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/actions/index.js"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/reducers/users.js":[function(e,t,s){"use strict";function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case r.REQUEST_USERS:return Object.assign({},e,{error:null,fetching:!0,fetched:!1});case r.RECEIVE_USERS:e=Object.assign({},e,{fetching:!1,fetched:!0}),t.error?e.error=t.error:e.users=t.data}return e}Object.defineProperty(s,"__esModule",{value:!0}),s.default=a;var r=e("../actions"),o={fetching:!1,fetched:!1,users:[]}},{"../actions":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/actions/index.js"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/auth-service.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return!!e&&!(0,m.isTokenExpired)(e)}function i(){var e=localStorage.getItem("profile");return e?JSON.parse(localStorage.profile):null}function n(){return localStorage.getItem("id_token")||null}function l(){localStorage.removeItem("id_token"),localStorage.removeItem("profile"),h.default.dispatch((0,p.logoutUser)())}Object.defineProperty(s,"__esModule",{value:!0});var u=function(){function e(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,s,a){return s&&e(t.prototype,s),a&&e(t,a),t}}();s.isLoggedIn=o,s.getProfileLocalStorage=i,s.getTokenLocalStorage=n,s.logout=l;var d=e("auth0-lock"),c=a(d),m=e("./jwt-helper"),p=e("../actions"),f=e("./store"),h=a(f),y=function(){function e(t,s){r(this,e);var a={allowSignUp:!1,autoclose:!0,auth:{redirect:!1,params:{scope:"openid roles user_id user_metadata"}},theme:{logo:"assets/graphics/layout/hot-logo.png",primaryColor:"#D73F3F"}};this.lock=new c.default(t,s,a),this.lock.on("authenticated",this._doAuthentication.bind(this)),this.login=this.login.bind(this)}return u(e,[{key:"_doAuthentication",value:function(e){localStorage.setItem("id_token",e.idToken),h.default.dispatch((0,p.setUserToken)(e.idToken)),this.lock.getProfile(e.idToken,function(e,t){e?console.log("Error loading the Profile",e):(localStorage.setItem("profile",JSON.stringify(t)),h.default.dispatch((0,p.setUserProfile)(t)))})}},{key:"login",value:function(){this.lock.show()}}]),e}();s.default=y},{"../actions":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/actions/index.js","./jwt-helper":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/jwt-helper.js","./store":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/store.js","auth0-lock":"auth0-lock"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/constants.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});s.taskStatusMatrix={open:"Open",inprogress:"In progress",completed:"Completed"},s.taskStatusStyles=[{name:"open",color:"#5ABDCB"},{name:"inprogress",color:"#D0EC77"},{name:"completed",color:"#72C97D"}],s.requestStatusStyles=[{name:"open",color:"#5ABDCB"},{name:"closed",color:"#A5B1B5"},{name:"canceled",color:"#EA4F54"}]},{}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/features.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(){return{}}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;return e.length>1?e[0].geometry?{type:"FeatureCollection",features:e.map(function(e){return{type:"Feature",geometry:{type:"Polygon",coordinates:[e.geometry]},properties:t(e)}})}:{type:"Feature",geometry:{type:"Polygon",coordinates:[e]},properties:{}}:e.length?{type:"Feature",geometry:{type:"Polygon",coordinates:[e[0].geometry]},properties:t(e[0])}:void 0}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;return e=e.filter(function(e){return null!=e.footprint}),{type:"FeatureCollection",features:e.map(function(e){return{type:"Feature",geometry:{type:"Polygon",coordinates:e.footprint.geometry.coordinates},properties:t(e)}})}}function n(e,t){var s=!0,a=!0;u.default.isFeatureCollection(e,function(r,o){r||(s=!1),u.default.isFeature(e,function(r,o){if(r||(a=!1),!s&&!a)return console.log("errors",o),t("Invalid format, provide a Feature or Feature Collection");if(s&&e.features.length>1)return t("Feature Collection should only have 1 feature");var i=s?e.features[0]:e;return i.geometry?void u.default.isPolygon(i.geometry,function(e,s){return e?t(null,i.geometry.coordinates[0]):t("Please provide a feature with a valid polygon")}):t("Invalid feature provided")})})}Object.defineProperty(s,"__esModule",{value:!0}),s.geometryToFeature=o,s.combineFeatureResults=i,s.validateGeoJSONPolygon=n;var l=e("geojson-validation"),u=a(l)},{"geojson-validation":"geojson-validation"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/jwt-helper.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=(0,n.default)(e);if(!t.exp)return null;var s=new Date(0);return s.setUTCSeconds(t.exp),s}function o(e){var t=r(e),s=0;return null!==t&&!(t.valueOf()>(new Date).valueOf()+1e3*s)}Object.defineProperty(s,"__esModule",{value:!0}),s.getTokenExpirationDate=r,s.isTokenExpired=o;var i=e("jwt-decode"),n=a(i)},{"jwt-decode":"jwt-decode"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/map-layers.js":[function(e,t,s){"use strict";function a(){return r.filter(function(e){return e.imagerySearch})}Object.defineProperty(s,"__esModule",{value:!0}),s.getImagerySearchLayers=a;var r=[{id:"oam-base",type:"raster",imagerySearch:!1,name:"Mapbox Light",url:"https://api.mapbox.com/styles/v1/hot/cividbt4w00ax2jn8517i2nc9/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoiaG90IiwiYSI6ImNpdmlkM2lkMDAwYTAydXBnNXFkd2EwemsifQ.KPrUb_mKlPmHCR6LNrSihQ"},{id:"satellite",type:"raster",imagerySearch:!0,name:"Mapbox Satellite",url:"https://api.mapbox.com/styles/v1/hot/civicyccw00bv2io77zqq401h/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoiaG90IiwiYSI6ImNpdmlkM2lkMDAwYTAydXBnNXFkd2EwemsifQ.KPrUb_mKlPmHCR6LNrSihQ"},{id:"digital-globe",type:"raster",imagerySearch:!0,name:"Digital Globe",url:"https://api.mapbox.com/styles/v1/digitalglobe/ciode6t5k0081aqm7k06dod4v/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoiZGlnaXRhbGdsb2JlIiwiYSI6ImNpdHZtM3FjbzAwNjYyem40c3FlNG11eGkifQ.dxTyi-e8nUFGtGQON78xQA"},{id:"bing-satellite",type:"raster",imagerySearch:!0,name:"Bing Satellite",url:"http://t1.tiles.virtualearth.net/tiles/a{quadkey}.jpeg?g=1398"}];s.default=r},{}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/map.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var s=new i.default.Map({container:e,style:{version:8,sources:{"raster-tiles":{type:"raster",tiles:[t],tileSize:256}},layers:[{id:"simple-tiles",type:"raster",source:"raster-tiles",minzoom:0,maxzoom:22}]},center:[0,20],zoom:1});s.addControl(new i.default.NavigationControl,"top-left"),s.dragRotate.disable(),s.touchZoomRotate.disableRotation(),s.scrollZoom.disable();var a=document.querySelector(".mapboxgl-ctrl-top-left .mapboxgl-ctrl-group");return a.classList.add("button-group","button-group--vertical"),a.querySelector(".mapboxgl-ctrl-zoom-in").classList.add("button"),a.querySelector(".mapboxgl-ctrl-zoom-out").classList.add("button"),a.querySelector(".mapboxgl-ctrl-compass").remove(),s}Object.defineProperty(s,"__esModule",{value:!0}),s.setupMap=r;var o=e("mapbox-gl"),i=a(o)},{"mapbox-gl":"mapbox-gl"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/mapbox-styles.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});s.mbStyles=[{id:"gl-draw-line",type:"line",filter:["all",["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#ff33cc","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-fill",type:"fill",filter:["all",["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#ff33cc","fill-outline-color":"#ff33cc","fill-opacity":.2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#ff33cc","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-halo-active",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":7,"circle-color":"#000"}},{id:"gl-draw-polygon-and-line-vertex-active",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","$type","LineString"],["==","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#000","line-width":3}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","$type","Polygon"],["==","active","false"]],paint:{"fill-color":"#51d6ff","fill-outline-color":"#0fc7ff","fill-opacity":.2}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","$type","Polygon"],["==","active","false"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#0fc7ff","line-width":3}}]},{}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/store.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var r=e("redux"),o=e("redux-thunk"),i=a(o),n=e("redux-logger"),l=a(n),u=e("../config"),d=a(u),c=e("../reducers"),m=a(c),p=e("./auth-service"),f={user:{token:(0,p.getTokenLocalStorage)(),profile:(0,p.getProfileLocalStorage)()}},h=(0,l.default)({level:"info",collapsed:!0,predicate:function(e,t){return"production"!==d.default.environment}}),y=(0,r.createStore)(m.default,f,(0,r.applyMiddleware)(i.default,h));t.exports=y},{"../config":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/config.js","../reducers":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/reducers/index.js","./auth-service":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/auth-service.js",redux:"redux","redux-logger":"redux-logger","redux-thunk":"redux-thunk"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/togeojson.js":[function(e,t,s){(function(a){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function t(e){if(!e||!e.length)return 0;for(var t=0,s=0;t<e.length;t++)s=(s<<5)-s+e.charCodeAt(t)|0;return s}function o(e,t){return e.getElementsByTagName(t)}function i(e,t){return e.getAttribute(t)}function n(e,t){return parseFloat(i(e,t))}function l(e,t){var s=o(e,t);return s.length?s[0]:null}function u(e){return e.normalize&&e.normalize(),e}function d(e){for(var t=0,s=[];t<e.length;t++)s[t]=parseFloat(e[t]);return s}function c(e){return e&&u(e),e&&e.textContent||""}function m(e,t){var s,a,r={};for(a=0;a<t.length;a++)s=l(e,t[a]),s&&(r[t[a]]=c(s));return r}function p(e,t){for(var s in t)e[s]=t[s]}function f(e){return d(e.replace(_,"").split(","))}function h(e){for(var t=e.replace(E,"").split(T),s=[],a=0;a<t.length;a++)s.push(f(t[a]));return s}function y(e){var t,s=[n(e,"lon"),n(e,"lat")],a=l(e,"ele"),r=l(e,"gpxtpx:hr")||l(e,"hr"),o=l(e,"time");return a&&(t=parseFloat(c(a)),isNaN(t)||s.push(t)),{coordinates:s,time:o?c(o):null,heartRate:r?parseFloat(c(r)):null}}function g(){return{type:"FeatureCollection",features:[]}}function v(e){return void 0!==e.xml?e.xml:b.serializeToString(e)}var b,_=/\s*/g,E=/^\s*|\s*$/g,T=/\s+/;"undefined"!=typeof XMLSerializer?b=new XMLSerializer:"object"!==("undefined"==typeof s?"undefined":r(s))||"object"!==("undefined"==typeof a?"undefined":r(a))||a.browser||(b=new(e("xmldom").XMLSerializer));var w={kml:function(e){function s(e){var t,s;return e=e||"","#"===e.substr(0,1)&&(e=e.substr(1)),6!==e.length&&3!==e.length||(t=e),8===e.length&&(s=parseInt(e.substr(0,2),16)/255,t="#"+e.substr(6,2)+e.substr(4,2)+e.substr(2,2)),[t,isNaN(s)?void 0:s]}function a(e){return d(e.split(" "))}function r(e){var t=o(e,"coord","gx"),s=[],r=[];0===t.length&&(t=o(e,"gx:coord"));for(var i=0;i<t.length;i++)s.push(a(c(t[i])));for(var n=o(e,"when"),l=0;l<n.length;l++)r.push(c(n[l]));return{coords:s,times:r}}function n(e){var t,s,a,i,u,d=[],m=[];if(l(e,"MultiGeometry"))return n(l(e,"MultiGeometry"));if(l(e,"MultiTrack"))return n(l(e,"MultiTrack"));if(l(e,"gx:MultiTrack"))return n(l(e,"gx:MultiTrack"));for(a=0;a<_.length;a++)if(s=o(e,_[a]))for(i=0;i<s.length;i++)if(t=s[i],"Point"===_[a])d.push({type:"Point",coordinates:f(c(l(t,"coordinates")))});else if("LineString"===_[a])d.push({type:"LineString",coordinates:h(c(l(t,"coordinates")))});else if("Polygon"===_[a]){var p=o(t,"LinearRing"),y=[];for(u=0;u<p.length;u++)y.push(h(c(l(p[u],"coordinates"))));d.push({type:"Polygon",coordinates:y})}else if("Track"===_[a]||"gx:Track"===_[a]){var g=r(t);d.push({type:"LineString",coordinates:g.coords}),g.times.length&&m.push(g.times)}return{geoms:d,coordTimes:m}}function u(e){var t,a=n(e),r={},u=c(l(e,"name")),d=c(l(e,"address")),m=c(l(e,"styleUrl")),f=c(l(e,"description")),h=l(e,"TimeSpan"),g=l(e,"TimeStamp"),v=l(e,"ExtendedData"),_=l(e,"LineStyle"),E=l(e,"PolyStyle"),T=l(e,"visibility");if(!a.geoms.length)return[];if(u&&(r.name=u),d&&(r.address=d),m){"#"!==m[0]&&(m="#"+m),r.styleUrl=m,p[m]&&(r.styleHash=p[m]),b[m]&&(r.styleMapHash=b[m],r.styleHash=p[b[m].normal]);var w=y[r.styleHash];w&&(_||(_=l(w,"LineStyle")),E||(E=l(w,"PolyStyle")))}if(f&&(r.description=f),h){var q=c(l(h,"begin")),S=c(l(h,"end"));r.timespan={begin:q,end:S}}if(g&&(r.timestamp=c(l(g,"when"))),_){var k=s(c(l(_,"color"))),P=k[0],x=k[1],j=parseFloat(c(l(_,"width")));P&&(r.stroke=P),isNaN(x)||(r["stroke-opacity"]=x),isNaN(j)||(r["stroke-width"]=j)}if(E){var N=s(c(l(E,"color"))),D=N[0],O=N[1],R=c(l(E,"fill")),M=c(l(E,"outline"));D&&(r.fill=D),isNaN(O)||(r["fill-opacity"]=O),R&&(r["fill-opacity"]="1"===R?r["fill-opacity"]||1:0),M&&(r["stroke-opacity"]="1"===M?r["stroke-opacity"]||1:0)}if(v){var C=o(v,"Data"),A=o(v,"SimpleData");for(t=0;t<C.length;t++)r[C[t].getAttribute("name")]=c(l(C[t],"value"));for(t=0;t<A.length;t++)r[A[t].getAttribute("name")]=c(A[t])}T&&(r.visibility=c(T)),a.coordTimes.length&&(r.coordTimes=1===a.coordTimes.length?a.coordTimes[0]:a.coordTimes);var F={type:"Feature",geometry:1===a.geoms.length?a.geoms[0]:{type:"GeometryCollection",geometries:a.geoms},properties:r};return i(e,"id")&&(F.id=i(e,"id")),[F]}for(var m=g(),p={},y={},b={},_=["Polygon","LineString","Point","Track","gx:Track"],E=o(e,"Placemark"),T=o(e,"Style"),w=o(e,"StyleMap"),q=0;q<T.length;q++){var S=t(v(T[q])).toString(16);p["#"+i(T[q],"id")]=S,y[S]=T[q]}for(var k=0;k<w.length;k++){p["#"+i(w[k],"id")]=t(v(w[k])).toString(16);for(var P=o(w[k],"Pair"),x={},j=0;j<P.length;j++)x[c(l(P[j],"key"))]=c(l(P[j],"styleUrl"));b["#"+i(w[k],"id")]=x}for(var N=0;N<E.length;N++)m.features=m.features.concat(u(E[N]));return m},gpx:function(e){function t(e,t){var s=o(e,t),a=[],r=[],i=[],n=s.length;if(n<2)return{};for(var l=0;l<n;l++){var u=y(s[l]);a.push(u.coordinates),u.time&&r.push(u.time),u.heartRate&&i.push(u.heartRate)}return{line:a,times:r,heartRates:i}}function s(e){for(var s,a=o(e,"trkseg"),r=[],i=[],d=[],c=0;c<a.length;c++)s=t(a[c],"trkpt"),s&&(s.line&&r.push(s.line),s.times&&s.times.length&&i.push(s.times),s.heartRates&&s.heartRates.length&&d.push(s.heartRates));if(0!==r.length){var m=u(e);return p(m,n(l(e,"extensions"))),i.length&&(m.coordTimes=1===r.length?i[0]:i),d.length&&(m.heartRates=1===r.length?d[0]:d),{type:"Feature",properties:m,geometry:{type:1===r.length?"LineString":"MultiLineString",coordinates:1===r.length?r[0]:r}}}}function a(e){var s=t(e,"rtept");if(s.line){var a=u(e);p(a,n(l(e,"extensions")));var r={type:"Feature",properties:a,geometry:{type:"LineString",coordinates:s.line}};return r}}function r(e){var t=u(e);return p(t,m(e,["sym"])),{type:"Feature",properties:t,geometry:{type:"Point",coordinates:y(e).coordinates}}}function n(e){var t={};if(e){var s=l(e,"line");if(s){var a=c(l(s,"color")),r=parseFloat(c(l(s,"opacity"))),o=parseFloat(c(l(s,"width")));a&&(t.stroke=a),isNaN(r)||(t["stroke-opacity"]=r),isNaN(o)||(t["stroke-width"]=96*o/25.4)}}return t}function u(e){var t=m(e,["name","cmt","desc","type","time","keywords"]),s=o(e,"link");s.length&&(t.links=[]);for(var a,r=0;r<s.length;r++)a={href:i(s[r],"href")},p(a,m(s[r],["text","type"])),t.links.push(a);return t}var d,f,h=o(e,"trk"),v=o(e,"rte"),b=o(e,"wpt"),_=g();for(d=0;d<h.length;d++)f=s(h[d]),f&&_.features.push(f);for(d=0;d<v.length;d++)f=a(v[d]),f&&_.features.push(f);for(d=0;d<b.length;d++)_.features.push(r(b[d]));return _}};return w}();"undefined"!=typeof t&&(t.exports=o)}).call(this,e("_process"))},{_process:"/home/travis/build/hotosm/imagery-requests/node_modules/browserify/node_modules/process/browser.js",xmldom:"xmldom"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/users.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=l.default.getState().users.users;return t.find(function(t){return t.userId===e})}function o(e){var t=r(e);return t?t.name:"N/A"}function i(e){var t=l.default.getState().users.users;return t.filter(function(t){return t.roles.indexOf(e)!==-1})}Object.defineProperty(s,"__esModule",{value:!0}),s.getUserFromId=r,s.getNameFromId=o,s.getWithRole=i;var n=e("./store"),l=a(n)},{"./store":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/store.js"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/utils.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){switch(e){case"week":return(0,i.default)().subtract(7,"days").startOf("day").toISOString();case"month":return(0,i.default)().subtract(1,"month").startOf("day").toISOString();case"months3":return(0,i.default)().subtract(3,"month").startOf("day").toISOString();case"months6":return(0,i.default)().subtract(6,"month").startOf("day").toISOString();case"year":return(0,i.default)().subtract(1,"year").startOf("day").toISOString();default:return null}}Object.defineProperty(s,"__esModule",{value:!0}),s.dateFromRelative=r;var o=e("moment"),i=a(o)},{moment:"moment"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/views/about.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){return{}}function o(e){return{}}var i=e("react"),n=a(i),l=e("react-redux"),u=n.default.createClass({displayName:"About",propTypes:{},render:function(){return n.default.createElement("section",{className:"section section--page section--about"},n.default.createElement("header",{className:"section__header"},n.default.createElement("div",{className:"inner"},n.default.createElement("div",{className:"section__headline"},n.default.createElement("h1",{className:"section__title"},"About")))),n.default.createElement("div",{className:"section__body"},n.default.createElement("div",{className:"inner"},n.default.createElement("div",{className:"prose prose--responsive"},n.default.createElement("p",null,"Timely access to aerial imagery is critical for disaster response. The Imagery Coordination tool allows people to coordinate and track progress on the collection of satellite and UAV imagery around the globe."),n.default.createElement("p",null,"The tool is an initiative by the ",n.default.createElement("a",{href:"http://hotosm.org"},"Humanitarian OpenStreetMap Team")," and currently in beta. Check the ",n.default.createElement("a",{href:"https://github.com/hotosm/imagery-requests"},"Github project")," to know more about how to contribute to this project.")))))}});t.exports=(0,l.connect)(r,o)(u)},{react:"react","react-redux":"react-redux"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/views/app.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){return{user:e.user,usersList:e.users}}function o(e){return{}}var i=e("react"),n=a(i),l=e("react-redux"),u=e("lodash"),d=a(u),c=e("classnames"),m=a(c),p=e("../components/page-header"),f=a(p),h=e("../components/page-footer"),y=a(h),g=n.default.createClass({displayName:"App",propTypes:{routes:i.PropTypes.array,route:i.PropTypes.object,children:i.PropTypes.object,user:i.PropTypes.object,usersList:i.PropTypes.object},render:function(){var e=d.default.get(d.default.last(this.props.routes),"pageClass","");return!this.props.usersList.fetched||this.props.usersList.fetching?null:n.default.createElement("div",{className:(0,m.default)("page",e)},n.default.createElement(f.default,{auth:this.props.route.auth,user:this.props.user}),n.default.createElement("main",{className:"page__body",role:"main"},this.props.children),n.default.createElement(y.default,null))}});t.exports=(0,l.connect)(r,o)(g)},{"../components/page-footer":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/components/page-footer.js","../components/page-header":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/components/page-header.js",classnames:"classnames",lodash:"lodash",react:"react","react-redux":"react-redux"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/views/dashboard.js":[function(e,t,s){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return{user:e.user,dashboard:e.dashboard,userTasks:e.userTasks,mapState:e.map}}function i(e){return{_selectDashboardTab:function(){return e(y.selectDashboardTab.apply(void 0,arguments))},_invalidateUserTasks:function(){return e(y.invalidateUserTasks.apply(void 0,arguments))},_fetchRequestUserTasks:function(){return e(y.fetchRequestUserTasks.apply(void 0,arguments))},_setMapBaseLayer:function(){return e(y.setMapBaseLayer.apply(void 0,arguments))}}}var n=e("react"),l=r(n),u=e("react-redux"),d=e("classnames"),c=r(d),m=e("react-paginate"),p=r(m),f=e("lodash"),h=r(f),y=e("../actions"),g=e("../utils/users"),v=a(g),b=e("../utils/utils"),_=e("../utils/features"),E=e("../utils/auth-service"),T=e("../components/task-card"),w=r(T),q=e("../components/dashboard-map"),S=r(q),k=l.default.createClass({displayName:"Dashboard",propTypes:{_selectDashboardTab:n.PropTypes.func,_invalidateUserTasks:n.PropTypes.func,_fetchRequestUserTasks:n.PropTypes.func,_setMapBaseLayer:n.PropTypes.func,user:n.PropTypes.object,dashboard:n.PropTypes.object,userTasks:n.PropTypes.object,mapState:n.PropTypes.object},componentDidMount:function(){var e=h.default.get(this.props.user,"profile.roles",[]),t="assigned";e.indexOf("coordinator")!==-1&&(t="created"),this.props._selectDashboardTab(t),this.props._fetchRequestUserTasks(this.props.user.profile.user_id,{scope:t,includeStats:!0})},componentWillUnmount:function(){this.props._invalidateUserTasks()},getFilters:function(){var e={includeStats:!0};"--"!==this.refs["filter-status"].value&&(e.status=this.refs["filter-status"].value);var t=(0,b.dateFromRelative)(this.refs["filter-interval"].value);return null!==t&&(e.dateFrom=t),e},onFilterChange:function(){var e=this.getFilters();e.scope=this.props.dashboard.activeTab,this.props._fetchRequestUserTasks(this.props.user.profile.user_id,e)},onTabClick:function(e,t){t.preventDefault(),this.props._selectDashboardTab(e);var s=this.getFilters();s.scope=e,this.props._fetchRequestUserTasks(this.props.user.profile.user_id,s)},handlePageClick:function(e){var t=this.getFilters();t.page=e.selected+1,t.scope=this.props.dashboard.activeTab,this.props._fetchRequestUserTasks(this.props.user.profile.user_id,t)},renderUserTasks:function(){var e=this,t=this.props.userTasks,s=t.fetched,a=t.fetching,r=t.error,o=t.data;return s||a?a?l.default.createElement("p",{className:"loading-indicator"},"Loading..."):r?l.default.createElement("p",null,"Error"):o.results.length?l.default.createElement("div",null,l.default.createElement("ul",{className:"tasks-list"},o.results.map(function(t){var s="none",a=h.default.get(e.props.user,"token"),r=h.default.get(e.props.user,"profile.roles",[]);if((0,E.isLoggedIn)(a)&&r.indexOf("coordinator")!==-1)s="enabled";else if((0,E.isLoggedIn)(a)&&r.indexOf("surveyor")!==-1){
var o=h.default.get(e.props.user,"profile.user_id",null);s=t.assigneeId===o?"enabled":"disabled"}return l.default.createElement("li",{className:"tasks-list__item",key:t._id},l.default.createElement(w.default,{requestId:t.requestId,requestName:t.requestInfo.name,id:t._id,name:t.name,status:t.status,authorId:t.authorId,assigneeId:t.assigneeId,updated:t.updated,geometry:t.geometry,editType:s}))})),l.default.createElement("div",{className:"pagination-wrapper"},l.default.createElement(p.default,{previousLabel:l.default.createElement("span",null,"previous"),nextLabel:l.default.createElement("span",null,"next"),breakLabel:l.default.createElement("span",{className:"pages__page"},"..."),pageNum:Math.ceil(o.meta.found/o.meta.limit),forceSelected:o.meta.page-1,marginPagesDisplayed:2,pageRangeDisplayed:5,clickCallback:this.handlePageClick,containerClassName:"pagination",subContainerClassName:"pages",pageClassName:"pages__wrapper",pageLinkClassName:"pages__page",activeClassName:"active"}))):l.default.createElement("p",null,"There are no tasks to match the selected filters"):null},renderStats:function(){var e=this.props.userTasks,t=e.fetched,s=e.data;return t?l.default.createElement("div",{className:"tasks-stats"},l.default.createElement("h2",{className:"tasks-stats__title"},"Tasks"),l.default.createElement("ul",{className:"stats-list"},l.default.createElement("li",{className:"stats-list__item"},l.default.createElement("strong",null,s.stats.activeTasks),"active"),l.default.createElement("li",{className:"stats-list__item"},l.default.createElement("strong",null,s.stats.completedTasks),"completed"))):null},render:function(){var e=this.props.dashboard.activeTab,t=(0,_.geometryToFeature)(this.props.userTasks.data.results,function(e){return h.default.omit(e,["geometry","updates"])});return l.default.createElement("section",{className:"section section--page section--tasks"},l.default.createElement("header",{className:"section__header"},l.default.createElement("div",{className:"inner"},l.default.createElement("div",{className:"section__headline"},l.default.createElement("h1",{className:"section__title"},v.getNameFromId(this.props.user.profile.user_id)),this.renderStats()))),l.default.createElement("div",{className:"section__body"},l.default.createElement("div",{className:"inner"},l.default.createElement("div",{className:"list-filters"},l.default.createElement("form",{className:"form"},l.default.createElement("div",{className:"form__group"},l.default.createElement("label",{className:"form__label",htmlFor:"task-status"},"Status"),l.default.createElement("select",{ref:"filter-status",className:"form__control form__control--medium",id:"task-status",onChange:this.onFilterChange},l.default.createElement("option",{value:"--"},"All"),l.default.createElement("option",{value:"open"},"Open"),l.default.createElement("option",{value:"inprogress"},"In Progress"),l.default.createElement("option",{value:"completed"},"Completed"))),l.default.createElement("div",{className:"form__group"},l.default.createElement("label",{className:"form__label",htmlFor:"task-interval"},"Time interval"),l.default.createElement("select",{ref:"filter-interval",className:"form__control form__control--medium",id:"task-interval",onChange:this.onFilterChange},l.default.createElement("option",{value:"--"},"All"),l.default.createElement("option",{value:"week"},"Last week"),l.default.createElement("option",{value:"month"},"Last month"),l.default.createElement("option",{value:"months3"},"Last 3 months"),l.default.createElement("option",{value:"months6"},"Last 6 months"),l.default.createElement("option",{value:"year"},"Last year"))))),l.default.createElement("ul",{className:"tabbed-nav"},l.default.createElement("li",{className:(0,c.default)("tabbed-nav__item",{"tabbed-nav__item--active":"assigned"===e}),onClick:this.onTabClick.bind(null,"assigned")},l.default.createElement("a",{href:""},"Assigned")),l.default.createElement("li",{className:(0,c.default)("tabbed-nav__item",{"tabbed-nav__item--active":"created"===e}),onClick:this.onTabClick.bind(null,"created")},l.default.createElement("a",{href:""},"Created"))),l.default.createElement("div",{className:"dashboard__col--main"},l.default.createElement("div",{className:"tabbed-content"},this.renderUserTasks())),l.default.createElement("div",{className:"dashboard__col--sec"},l.default.createElement(S.default,{mapId:"map-dashboard",className:"map-container map-container--dashboard",results:t,onBaseLayerChange:this.props._setMapBaseLayer,selectedLayer:this.props.mapState.baseLayer})))))}});t.exports=(0,u.connect)(o,i)(k)},{"../actions":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/actions/index.js","../components/dashboard-map":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/components/dashboard-map.js","../components/task-card":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/components/task-card.js","../utils/auth-service":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/auth-service.js","../utils/features":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/features.js","../utils/users":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/users.js","../utils/utils":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/utils.js",classnames:"classnames",lodash:"lodash",react:"react","react-paginate":"react-paginate","react-redux":"react-redux"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/views/home.js":[function(e,t,s){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return{requests:e.requests,requestsAll:e.requestsAll,generalStats:e.generalStats,user:e.user,mapState:e.map}}function i(e){return{_fetchRequests:function(){return e(E.fetchRequests.apply(void 0,arguments))},_fetchAllRequests:function(){return e(E.fetchAllRequests.apply(void 0,arguments))},_fetchGeneralStats:function(){return e(E.fetchGeneralStats.apply(void 0,arguments))},_invalidateRequests:function(){return e(E.invalidateRequests.apply(void 0,arguments))},_setMapBaseLayer:function(){return e(E.setMapBaseLayer.apply(void 0,arguments))}}}var n=e("react"),l=r(n),u=e("react-router"),d=e("react-redux"),c=e("react-paginate"),m=r(c),p=e("lodash"),f=r(p),h=e("numeral"),y=r(h),g=e("moment"),v=r(g),b=e("classnames"),_=r(b),E=e("../actions"),T=e("../utils/users"),w=a(T),q=e("../utils/utils"),S=e("../utils/features"),k=e("../components/home-map"),P=r(k),x=e("../utils/auth-service"),j=l.default.createClass({displayName:"Home",propTypes:{_fetchRequests:n.PropTypes.func,_fetchAllRequests:n.PropTypes.func,_fetchGeneralStats:n.PropTypes.func,_invalidateRequests:n.PropTypes.func,_setMapBaseLayer:n.PropTypes.func,requests:n.PropTypes.object,requestsAll:n.PropTypes.object,generalStats:n.PropTypes.object,user:n.PropTypes.object,mapState:n.PropTypes.object},componentDidMount:function(){this.props._fetchRequests({footprint:!0}),this.props._fetchGeneralStats(),this.props._fetchAllRequests()},componentWillUnmount:function(){this.props._invalidateRequests()},getFilters:function(){var e={};"--"!==this.refs["filter-author"].value&&(e.author=this.refs["filter-author"].value),"--"!==this.refs["filter-status"].value&&(e.status=this.refs["filter-status"].value);var t=(0,q.dateFromRelative)(this.refs["filter-interval"].value);return null!==t&&(e.dateFrom=t),e},handlePageClick:function(e){var t=this.getFilters();t.footprint=!0,t.page=e.selected+1,this.props._fetchRequests(t)},onFilterChange:function(){var e=this.getFilters();e.footprint=!0,this.props._fetchRequests(e)},renderRequestList:function(){var e=this.props.requests,t=e.fetched,s=e.fetching,a=e.error,r=e.data;return t||s?s?l.default.createElement("p",{className:"loading-indicator"},"Loading..."):a?l.default.createElement("p",null,"Error"):r.results.length?l.default.createElement("div",null,l.default.createElement("ul",{className:"requests__list"},r.results.map(this.renderRequestCard)),l.default.createElement("div",{className:"pagination-wrapper"},l.default.createElement(m.default,{previousLabel:l.default.createElement("span",null,"previous"),nextLabel:l.default.createElement("span",null,"next"),breakLabel:l.default.createElement("span",{className:"pages__page"},"..."),pageNum:Math.ceil(r.meta.found/r.meta.limit),forceSelected:r.meta.page-1,marginPagesDisplayed:2,pageRangeDisplayed:5,clickCallback:this.handlePageClick,containerClassName:"pagination",subContainerClassName:"pages",pageClassName:"pages__wrapper",pageLinkClassName:"pages__page",activeClassName:"active"}))):l.default.createElement("p",null,"No requests found with the selected filters."):null},renderRequestCard:function(e){var t=f.default.get(e.tasksInfo.status,"completed",0),s=e.tasksInfo.total-t,a=e.tasksInfo.total>0?t/e.tasksInfo.total*100:0,r=(0,_.default)("progress-bar",{"progress-bar--disabled":"canceled"===e.status});return l.default.createElement("li",{className:"requests__item",key:e._id},l.default.createElement("article",{className:"request"},l.default.createElement("header",{className:"request__header"},l.default.createElement("h1",{className:"request__title"},l.default.createElement(u.Link,{to:"/requests/"+e._id},e.name))),l.default.createElement("div",{className:"request__body"},l.default.createElement("p",{className:"status-indicator status-indicator--"+e.status},f.default.capitalize(e.status)),l.default.createElement("div",{className:"request-progress"},l.default.createElement("progress",{value:a,max:"100",className:r,style:{backgroundSize:a+"%"}}),l.default.createElement("p",{className:"progress-value"},(0,y.default)(a).format("0.0"),"% complete")),l.default.createElement("ul",{className:"request-tasks-info"},l.default.createElement("li",null,l.default.createElement("strong",null,s)," Active"),l.default.createElement("li",null,l.default.createElement("strong",null,t)," Complete tasks")),l.default.createElement("p",{className:"meta-info"},"Created on ",(0,v.default)(e.created).format("YYYY/MM/DD")," by ",w.getNameFromId(e.authorId)))))},renderStats:function(){var e=this.props.generalStats,t=e.fetched,s=e.fetching,a=e.data;return!t||s?null:l.default.createElement("ul",{className:"general-stats"},l.default.createElement("li",null,l.default.createElement("strong",null,a.requests.status.open)," active requests"),l.default.createElement("li",null,l.default.createElement("strong",null,a.requests.status.closed)," closed requests"))},renderMap:function(){var e=this.props.requestsAll,t=e.fetched,s=e.fetching,a=e.error,r=e.data;if(!t&&!s)return null;if(s)return l.default.createElement("p",{className:"loading-indicator"},"Loading...");if(a)return l.default.createElement("p",null,"Error");var o=(0,S.combineFeatureResults)(r.results,function(e){return f.default.omit(e,["geometry","updates"])});return l.default.createElement(P.default,{mapId:"map-home",className:"map-container map-container--display bleed-full",results:o,onBaseLayerChange:this.props._setMapBaseLayer,selectedLayer:this.props.mapState.baseLayer})},render:function(){var e=this.props.requests.data.meta.found,t=this.props.user.token,s=f.default.get(this.props.user,"profile.roles",[]),a=(0,x.isLoggedIn)(t)&&s.indexOf("coordinator")!==-1;return l.default.createElement("section",{className:"section section--home"},l.default.createElement("header",{className:"section__header"},l.default.createElement("div",{className:"inner"},l.default.createElement("div",{className:"section__headline"},l.default.createElement("h1",{className:"section__title"},"Imagery Coordination Service"),l.default.createElement("div",{className:"section__introduction"},l.default.createElement("p",null,"Tracking and coordinating satellite and aerial imagery needs around the globe. View open requests below. Explore the search to determine needs."))),a?l.default.createElement("div",{className:"section__actions"},l.default.createElement(u.Link,{to:"/imagery-search",className:"button-add-request"},l.default.createElement("span",null,"Add request"))):null,l.default.createElement("div",{className:"section__stats"},this.renderStats()))),l.default.createElement("div",{className:"section__body"},l.default.createElement("div",{className:"inner"},this.renderMap(),l.default.createElement("h2",null,"Requests ",e>0?"("+e+")":""),l.default.createElement("div",{className:"list-filters"},l.default.createElement("form",{className:"form"},l.default.createElement("div",{className:"form__group"},l.default.createElement("label",{className:"form__label",htmlFor:"request-author"},"Author"),l.default.createElement("select",{ref:"filter-author",className:"form__control form__control--medium",id:"request-author",onChange:this.onFilterChange},l.default.createElement("option",{value:"--"},"All"),w.getWithRole("coordinator").map(function(e){return l.default.createElement("option",{value:e.userId,key:e.userId},e.name)}))),l.default.createElement("div",{className:"form__group"},l.default.createElement("label",{className:"form__label",htmlFor:"request-status"},"Status"),l.default.createElement("select",{ref:"filter-status",className:"form__control form__control--medium",id:"request-status",onChange:this.onFilterChange},l.default.createElement("option",{value:"--"},"All"),l.default.createElement("option",{value:"open"},"Open"),l.default.createElement("option",{value:"closed"},"Closed"),l.default.createElement("option",{value:"canceled"},"Canceled"))),l.default.createElement("div",{className:"form__group"},l.default.createElement("label",{className:"form__label",htmlFor:"request-interval"},"Time interval"),l.default.createElement("select",{ref:"filter-interval",className:"form__control form__control--medium",id:"request-interval",onChange:this.onFilterChange},l.default.createElement("option",{value:"--"},"All"),l.default.createElement("option",{value:"week"},"Last week"),l.default.createElement("option",{value:"month"},"Last month"),l.default.createElement("option",{value:"months3"},"Last 3 months"),l.default.createElement("option",{value:"months6"},"Last 6 months"),l.default.createElement("option",{value:"year"},"Last year"))))),this.renderRequestList())))}});t.exports=(0,d.connect)(o,i)(j)},{"../actions":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/actions/index.js","../components/home-map":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/components/home-map.js","../utils/auth-service":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/auth-service.js","../utils/features":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/features.js","../utils/users":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/users.js","../utils/utils":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/utils.js",classnames:"classnames",lodash:"lodash",moment:"moment",numeral:"numeral",react:"react","react-paginate":"react-paginate","react-redux":"react-redux","react-router":"react-router"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/views/imagery-search.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,s=Array(e.length);t<e.length;t++)s[t]=e[t];return s}return Array.from(e)}function o(e){return{user:e.user,mapData:e.imagerySearch}}function i(e){return{_setSearchMapBaseLayer:function(){return e(v.setSearchMapBaseLayer.apply(void 0,arguments))}}}var n=e("react"),l=a(n),u=e("react-redux"),d=e("mapbox-gl"),c=a(d),m=e("react-router"),p=e("mapbox-gl-sync-move"),f=a(p),h=e("lodash"),y=a(h),g=e("../utils/map-layers"),v=e("../actions"),b=e("../utils/auth-service"),_=l.default.createClass({displayName:"ImagerySearch",propTypes:{_setSearchMapBaseLayer:n.PropTypes.func,user:n.PropTypes.object,mapData:n.PropTypes.object},mainMap:null,maps:[],setupMap:function(e,t){var s=this,a=new c.default.Map({container:e,style:{version:8,sources:{"thumb-map":{type:"raster",tiles:[t.url],tileSize:256}},layers:[{id:"tiles",type:"raster",source:"thumb-map",minzoom:0,maxzoom:22}]},center:[0,0],zoom:1});return a.on("click",function(e){s.selectLayer(t)}),a},componentDidMount:function(){var e=this;this.mainMap=new c.default.Map({container:this.refs.mapMaster,style:{version:8,sources:{"raster-tiles":{type:"raster",tiles:[this.props.mapData.baseLayer.url],tileSize:256}},layers:[{id:"tiles",type:"raster",source:"raster-tiles",minzoom:0,maxzoom:22}]},center:[0,20],zoom:1}),this.mainMap.addControl(new c.default.NavigationControl,"top-left"),this.mainMap.dragRotate.disable(),this.mainMap.touchZoomRotate.disableRotation();var t=document.querySelector(".mapboxgl-ctrl-top-left .mapboxgl-ctrl-group");t.classList.add("button-group","button-group--vertical"),t.querySelector(".mapboxgl-ctrl-zoom-in").classList.add("button"),t.querySelector(".mapboxgl-ctrl-zoom-out").classList.add("button"),t.querySelector(".mapboxgl-ctrl-compass").remove(),this.maps=[this.mainMap].concat(r((0,g.getImagerySearchLayers)().map(function(t,s){return e.setupMap(e.refs["mapThumb"+s],t)}))),(0,f.default)(this.maps)},componentWillReceiveProps:function(e){var t=e.mapData.baseLayer;t.id!==this.props.mapData.baseLayer.id&&this.mainMap.removeSource("raster-tiles").addSource("raster-tiles",{type:"raster",tiles:[t.url],tileSize:256})},componentWillUnmount:function(){this.maps.forEach(function(e){e.remove()})},selectLayer:function(e){this.props._setSearchMapBaseLayer(e)},renderAddRequestLink:function(){var e=this.props.user.token,t=y.default.get(this.props.user,"profile.roles",[]);if((0,b.isLoggedIn)(e)&&t.indexOf("coordinator")!==-1)return l.default.createElement(m.Link,{to:"/requests/edit",className:"button-skip"},"Skip this step")},render:function(){return l.default.createElement("section",{className:"section section--page"},l.default.createElement("header",{className:"section__header"},l.default.createElement("div",{className:"inner"},l.default.createElement("div",{className:"section__headline"},l.default.createElement("h1",{className:"section__title"},"Compare imagery"),l.default.createElement("p",null,"Explore and compare existing sources of imagery prior to requesting additional imagery.")),l.default.createElement("div",{className:"section__actions"},this.renderAddRequestLink()))),l.default.createElement("div",{className:"section__body"},l.default.createElement("div",{className:"inner"},l.default.createElement("div",{className:"map-master"},l.default.createElement("div",{className:"map-master__map",ref:"mapMaster"}),l.default.createElement("h2",{className:"map-master__source"},"Source: ",this.props.mapData.baseLayer.name)),l.default.createElement("ul",{className:"map-thumbs"},(0,g.getImagerySearchLayers)().map(function(e,t){return l.default.createElement("li",{key:e.id,className:"map-thumbs__item"},l.default.createElement("div",{ref:"mapThumb"+t,className:"map-thumbs__map"}),l.default.createElement("h3",{className:"map-thumbs__source"},e.name))})))))}});t.exports=(0,u.connect)(o,i)(_)},{"../actions":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/actions/index.js","../utils/auth-service":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/auth-service.js","../utils/map-layers":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/map-layers.js",lodash:"lodash","mapbox-gl":"mapbox-gl","mapbox-gl-sync-move":"mapbox-gl-sync-move",react:"react","react-redux":"react-redux","react-router":"react-router"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/views/request-form.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function o(e){return{request:e.request,requestForm:e.requestForm}}function i(e){return{_fetchRequest:function(){return e(E.fetchRequest.apply(void 0,arguments))},_invalidateRequest:function(){return e(E.invalidateRequest.apply(void 0,arguments))},_postRequest:function(){return e(E.postRequest.apply(void 0,arguments))},_patchRequest:function(){return e(E.patchRequest.apply(void 0,arguments))},_resetRequestFrom:function(){return e(E.resetRequestFrom.apply(void 0,arguments))},_deleteRequest:function(){return e(E.deleteRequest.apply(void 0,arguments))}}}var n=e("react"),l=a(n),u=e("react-redux"),d=e("moment"),c=a(d),m=e("classnames"),p=a(m),f=e("lodash"),h=a(f),y=e("react-router"),g=e("react-widgets/lib/DateTimePicker"),v=a(g),b=e("react-widgets/lib/localizers/moment"),_=a(b),E=e("../actions");(0,_.default)(c.default);var T=l.default.createClass({displayName:"RequestForm",propTypes:{_fetchRequest:n.PropTypes.func,_invalidateRequest:n.PropTypes.func,_postRequest:n.PropTypes.func,_patchRequest:n.PropTypes.func,_resetRequestFrom:n.PropTypes.func,_deleteRequest:n.PropTypes.func,params:n.PropTypes.object,request:n.PropTypes.object,requestForm:n.PropTypes.object},goToTaskForm:!1,getInitialState:function(){return{data:{name:"",status:"open",requestingOrg:"",gsd:"",productType:"",purpose:"",use:"",notes:"",timePeriodRequestedFrom:null,timePeriodRequestedTo:null},errors:{}}},checkErrors:function(){var e=!0,t={};return""===this.state.data.name&&(t.name=!0,e=!1),""!==this.state.data.gsd&&isNaN(+this.state.data.gsd)&&(t.gsd=!0,e=!1),this.setState({errors:t}),e},onSave:function(e){this.goToTaskForm=!1,this.onFormSubmit(e)},onSaveAndAdd:function(e){this.goToTaskForm=!0,this.onFormSubmit(e)},onFormSubmit:function(e){if(e.preventDefault(),this.checkErrors()){var t={name:this.state.data.name,status:this.state.data.status||null,timePeriodRequestedFrom:this.state.data.timePeriodRequestedFrom?(0,c.default)(this.state.data.timePeriodRequestedFrom).format("YYYY-MM-DD"):null,timePeriodRequestedTo:this.state.data.timePeriodRequestedTo?(0,c.default)(this.state.data.timePeriodRequestedTo).format("YYYY-MM-DD"):null,requestingOrg:this.state.data.requestingOrg||null,gsd:this.state.data.gsd||null,productType:this.state.data.productType||null,purpose:this.state.data.purpose||null,use:this.state.data.use||null,notes:this.state.data.notes||null};this.props.params.reqid?this.props._patchRequest(this.props.params.reqid,t):(t=h.default.pickBy(t,function(e){return null!==e}),this.props._postRequest(t)),this.setState({data:this.getInitialState().data})}},getValueForDate:function(e,t){return null===this.state.data[e]?null:new Date(this.state.data[e])},dateOrUndefined:function(e){return this.getValueForDate(e)||void 0},onDateChange:function(e,t,s){var a=null===t?null:t.toISOString(),o=Object.assign({},this.state.data,r({},e,a));this.setState({data:o})},onFieldChange:function(e,t){var s=Object.assign({},this.state.data,r({},e,t.target.value));this.setState({data:s})},onDeleteClick:function(e){e.preventDefault();var t="Are you sure you want to delete "+this.props.request.data.name+"?\nThis action is permanent, and all associated tasks will be deleted as well.";confirm(t)&&(this.props._deleteRequest(this.props.params.reqid),y.hashHistory.push("/"))},componentDidMount:function(){this.props.params.reqid&&this.props._fetchRequest(this.props.params.reqid)},componentWillUnmount:function(){this.props._invalidateRequest(),this.props._resetRequestFrom()},componentWillReceiveProps:function(e){var t=this,s=this.props.request,a=s.fetched,r=s.fetching,o=e.request,i=o.fetched,n=o.fetching,l=o.error,u=o.data;a||!r||!i||n||l||!function(){var e={};Object.keys(t.state.data).forEach(function(t){e[t]=null===u[t]?"":u[t]}),e.timePeriodRequestedFrom=u.timePeriodRequested.from,e.timePeriodRequestedTo=u.timePeriodRequested.to,t.setState({data:e})}();var d=this.props.requestForm.processing,c=e.requestForm,m=c.processing,p=c.data;d&&!m&&p._id&&(this.goToTaskForm?y.hashHistory.push("/requests/"+p._id+"/tasks/edit"):y.hashHistory.push("/requests/"+p._id))},renderFrom:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},!!this.props.params.reqid);return l.default.createElement("div",{className:"request-form"},l.default.createElement("form",{ref:"form",className:"form"},l.default.createElement("div",{className:"form__group"},l.default.createElement("label",{className:"form__label",htmlFor:"request-name"},"Request name ",l.default.createElement("small",null,"(required)")),l.default.createElement("input",{type:"text",className:"form__control form__control--medium",id:"request-name",name:"request-name",placeholder:"Request name",value:this.state.data.name,onChange:this.onFieldChange.bind(null,"name")}),this.state.errors.name?l.default.createElement("p",{className:"message message--alert"},"A name is required"):null),l.default.createElement("div",{className:"form__group"},l.default.createElement("label",{className:"form__label",htmlFor:"request-status"},"Status"),l.default.createElement("select",{className:(0,p.default)("form__control form__control--medium",{disabled:!e}),id:"request-status",value:this.state.data.status,onChange:this.onFieldChange.bind(null,"status")},l.default.createElement("option",{value:"open"},"Open"),l.default.createElement("option",{value:"closed"},"Closed"),l.default.createElement("option",{value:"canceled"},"Canceled"))),l.default.createElement("div",{className:"form__group"},l.default.createElement("label",{className:"form__label"},"Time period requested"),l.default.createElement("div",{className:"date-selector"},l.default.createElement("div",{className:"date-selector__picker"},l.default.createElement(v.default,{max:this.dateOrUndefined("timePeriodRequestedTo")||new Date,finalView:"decade",format:"YYYY-MM-DD",value:this.getValueForDate("timePeriodRequestedFrom"),time:!1,onChange:this.onDateChange.bind(null,"timePeriodRequestedFrom")})),l.default.createElement("p",{className:"date-selector__sep"},"to"),l.default.createElement("div",{className:"date-selector__picker"},l.default.createElement(v.default,{min:this.dateOrUndefined("timePeriodRequestedFrom"),max:new Date,finalView:"decade",format:"YYYY-MM-DD",value:this.getValueForDate("timePeriodRequestedTo"),time:!1,onChange:this.onDateChange.bind(null,"timePeriodRequestedTo")}))),l.default.createElement("p",{className:"form__help"},"The dates are used to express a range and are optional.")),l.default.createElement("div",{className:"form__group"},l.default.createElement("label",{className:"form__label",htmlFor:"request-org"},"Requesting organization"),l.default.createElement("input",{type:"text",className:"form__control form__control--medium",id:"request-org",name:"request-org",placeholder:"Requesting organization",value:this.state.data.requestingOrg,onChange:this.onFieldChange.bind(null,"requestingOrg")})),l.default.createElement("div",{className:"form__group"},l.default.createElement("label",{className:"form__label",htmlFor:"request-gsd"},"GSD"),l.default.createElement("input",{ref:"gsd",type:"text",className:"form__control form__control--medium",id:"request-gsd",name:"request-gsd",placeholder:"Desired GSD",value:this.state.data.gsd,onChange:this.onFieldChange.bind(null,"gsd")}),l.default.createElement("p",{className:"form__help"},"Ground Sample Distance in meters."),this.state.errors.gsd?l.default.createElement("p",{className:"message message--alert"},"The GSD must be a number"):null),l.default.createElement("div",{className:"form__group"},l.default.createElement("label",{className:"form__label",htmlFor:"request-prod-type"},"Product type"),l.default.createElement("select",{className:"form__control form__control--medium",id:"request-prod-type",ref:"productType",name:"request-prod-type",value:this.state.data.productType,onChange:this.onFieldChange.bind(null,"productType")},l.default.createElement("option",{value:""},"Select one"),l.default.createElement("option",{value:"Satellite imagery"},"Satellite imagery"),l.default.createElement("option",{value:"UAV or other aerial imagery"},"UAV or other aerial imagery"))),l.default.createElement("div",{className:"form__group"},l.default.createElement("label",{className:"form__label",htmlFor:"request-purpose"},"Purpose"),l.default.createElement("textarea",{ref:"purpose",className:"form__control",id:"request-purpose",rows:"4",placeholder:"Purpose of this request",value:this.state.data.purpose,onChange:this.onFieldChange.bind(null,"purpose")}),l.default.createElement("p",{className:"form__help"},"Describe why these images are needed and the context of the work being conducted.")),l.default.createElement("div",{className:"form__group"},l.default.createElement("label",{className:"form__label",htmlFor:"request-use"},"Use"),l.default.createElement("textarea",{ref:"use",className:"form__control",id:"request-use",rows:"4",placeholder:"Intended use for the imagery",value:this.state.data.use,onChange:this.onFieldChange.bind(null,"use")}),l.default.createElement("p",{className:"form__help"},"How will the imagery be used and what products do you intend to generate?")),l.default.createElement("div",{className:"form__group"},l.default.createElement("label",{className:"form__label",htmlFor:"request-notes"},"Notes"),l.default.createElement("textarea",{ref:"notes",className:"form__control",id:"request-notes",rows:"4",placeholder:"Additional notes and links for background",value:this.state.data.notes,onChange:this.onFieldChange.bind(null,"notes")})),l.default.createElement("div",{className:"form__actions"},e?l.default.createElement("button",{type:"submit",className:"button button--primary",onClick:this.onSave},l.default.createElement("span",null,"Save request")):null,l.default.createElement("button",{type:"submit",className:"button button--secondary",onClick:this.onSaveAndAdd},l.default.createElement("span",null,e?"Save & add task":"Create & add task")),l.default.createElement(y.Link,{to:e?"requests/"+this.props.params.reqid:"/",className:"button button--base"},l.default.createElement("span",null,"Cancel")))))},render:function(){var e=!!this.props.params.reqid,t=this.props.request,s=t.fetched,a=t.fetching,r=t.error,o=t.data,i="Create Request";if(e){if(!s&&!a)return null;a&&(i="Edit Request"),o.name&&(i="Edit "+o.name)}return l.default.createElement("section",{className:"section section--page"},l.default.createElement("header",{className:"section__header"},l.default.createElement("div",{className:"inner"},l.default.createElement("div",{className:"section__headline"},l.default.createElement("h1",{className:"section__title"},i)),e?l.default.createElement("div",{className:"section__actions"},l.default.createElement("a",{href:"#",className:"button-delete",onClick:this.onDeleteClick},l.default.createElement("span",null,"Delete request"))):null)),l.default.createElement("div",{className:"section__body"},l.default.createElement("div",{className:"inner"},e&&a?l.default.createElement("p",{className:"loading-indicator"},"Loading..."):null,e&&r?l.default.createElement("p",null,"Error"):null,!e||e&&!a?this.renderFrom():null,this.props.requestForm.processing?l.default.createElement("p",null,"Submitting data..."):null)))}});t.exports=(0,u.connect)(o,i)(T)},{"../actions":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/actions/index.js",classnames:"classnames",lodash:"lodash",moment:"moment",react:"react","react-redux":"react-redux","react-router":"react-router","react-widgets/lib/DateTimePicker":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/DateTimePicker.js","react-widgets/lib/localizers/moment":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/localizers/moment.js"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/views/request-page.js":[function(e,t,s){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return{request:e.request,tasks:e.tasks,user:e.user,mapState:e.map}}function i(e){return{_fetchRequest:function(){return e(E.fetchRequest.apply(void 0,arguments));
},_fetchRequestTasks:function(){return e(E.fetchRequestTasks.apply(void 0,arguments))},_invalidateRequest:function(){return e(E.invalidateRequest.apply(void 0,arguments))},_invalidateTasks:function(){return e(E.invalidateTasks.apply(void 0,arguments))},_setMapBaseLayer:function(){return e(E.setMapBaseLayer.apply(void 0,arguments))}}}var n=e("react"),l=r(n),u=e("react-redux"),d=e("react-router"),c=e("lodash"),m=r(c),p=e("classnames"),f=r(p),h=e("moment"),y=r(h),g=e("numeral"),v=r(g),b=e("react-linkify"),_=r(b),E=e("../actions"),T=e("../utils/users"),w=a(T),q=e("../utils/features"),S=e("../utils/auth-service"),k=e("../components/task-card"),P=r(k),x=e("../components/request-map"),j=r(x),N=l.default.createClass({displayName:"RequestPage",propTypes:{_fetchRequest:n.PropTypes.func,_fetchRequestTasks:n.PropTypes.func,_invalidateRequest:n.PropTypes.func,_invalidateTasks:n.PropTypes.func,_setMapBaseLayer:n.PropTypes.func,params:n.PropTypes.object,request:n.PropTypes.object,tasks:n.PropTypes.object,user:n.PropTypes.object,mapState:n.PropTypes.object},componentDidMount:function(){var e={footprint:!0};this.props._fetchRequest(this.props.params.reqid,e),this.props._fetchRequestTasks(this.props.params.reqid)},componentWillUnmount:function(){this.props._invalidateRequest(),this.props._invalidateTasks()},renderTaskCard:function(e){var t="none",s=m.default.get(this.props.user,"token"),a=m.default.get(this.props.user,"profile.roles",[]);if((0,S.isLoggedIn)(s)&&a.indexOf("coordinator")!==-1)t="enabled";else if((0,S.isLoggedIn)(s)&&a.indexOf("surveyor")!==-1){var r=m.default.get(this.props.user,"profile.user_id",null);t=e.assigneeId===r?"enabled":"disabled"}return l.default.createElement("li",{className:"tasks-list__item",key:e._id},l.default.createElement(P.default,{requestId:e.requestId,requestName:this.props.request.data.name,id:e._id,name:e.name,status:e.status,authorId:e.authorId,assigneeId:e.assigneeId,updated:e.updated,geometry:e.geometry,editType:t}))},renderTasks:function(){var e=this.props.tasks,t=e.fetched,s=e.fetching,a=e.error,r=e.data;if(!t&&!s)return null;if(s)return l.default.createElement("p",{className:"loading-indicator"},"Loading...");if(a)return l.default.createElement("p",null,"Error");var o=r.results.filter(function(e){return"completed"!==e.status}),i=r.results.filter(function(e){return"completed"===e.status});return l.default.createElement("div",null,l.default.createElement("section",{className:"tasks-list-container"},l.default.createElement("h2",null,"Active tasks (",o.length,")"),o.length?l.default.createElement("ul",{className:"tasks-list"},o.map(this.renderTaskCard)):l.default.createElement("p",null,"This request has no active tasks")),l.default.createElement("section",{className:"tasks-list-container"},l.default.createElement("h2",null,"Completed tasks (",i.length,")"),i.length?l.default.createElement("ul",{className:"tasks-list"},i.map(this.renderTaskCard)):l.default.createElement("p",null,"This request has no completed tasks")))},renderRequestMap:function(){var e=this.props.tasks,t=e.fetched,s=e.fetching,a=e.error,r=e.data;if(!t&&!s)return null;if(s)return l.default.createElement("p",{className:"loading-indicator"},"Loading...");if(a)return l.default.createElement("p",null,"Error");var o=(0,q.geometryToFeature)(r.results,function(e){return m.default.omit(e,["geometry","updates"])});return l.default.createElement(j.default,{mapId:"map-request-page",className:"map-container map-container--display bleed-full",results:o,onBaseLayerChange:this.props._setMapBaseLayer,selectedLayer:this.props.mapState.baseLayer})},render:function(){var e=this.props.request,t=e.fetched,s=e.fetching,a=e.error,r=e.data;if(!t&&!s)return null;if(a||s)return l.default.createElement("section",{className:"section section--page"},l.default.createElement("header",{className:"section__header"},l.default.createElement("div",{className:"inner"},l.default.createElement("div",{className:"section__headline"},l.default.createElement("h1",{className:"section__title"},"Request")))),l.default.createElement("div",{className:"section__body"},l.default.createElement("div",{className:"inner"},a?l.default.createElement("p",null,"Error: ",a):null,s?l.default.createElement("p",{className:"loading-indicator"},"Loading..."):null)));var o=m.default.get(r.tasksInfo.status,"completed",0),i=r.tasksInfo.total>0?o/r.tasksInfo.total*100:0,n=(0,f.default)("progress-bar",{"progress-bar--disabled":"canceled"===r.status}),u="Most recent available";r.timePeriodRequested.from&&r.timePeriodRequested.to?u=(0,y.default)(r.timePeriodRequested.from).format("YYYY/MM/DD")+" - "+(0,y.default)(r.timePeriodRequested.to).format("YYYY/MM/DD"):r.timePeriodRequested.from&&!r.timePeriodRequested.to?u="Anything from "+(0,y.default)(r.timePeriodRequested.from).format("YYYY/MM/DD")+" onwards":!r.timePeriodRequested.from&&r.timePeriodRequested.to&&(u="Up to "+(0,y.default)(r.timePeriodRequested.to).format("YYYY/MM/DD"));var c=this.props.user.token,p=m.default.get(this.props.user,"profile.roles",[]),h=(0,S.isLoggedIn)(c)&&p.indexOf("coordinator")!==-1;return l.default.createElement("section",{className:"section section--page"},l.default.createElement("header",{className:"section__header"},l.default.createElement("div",{className:"inner"},l.default.createElement("div",{className:"section__headline"},l.default.createElement("h1",{className:"section__title"},r.name)),h?l.default.createElement("div",{className:"section__actions"},l.default.createElement(d.Link,{to:"/requests/"+r._id+"/edit",className:"button-edit"},l.default.createElement("span",null,"Edit request")),l.default.createElement(d.Link,{to:"/requests/"+r._id+"/tasks/edit",className:"button-add-task"},l.default.createElement("span",null,"Add task"))):null,l.default.createElement("div",{className:"section__stats"},l.default.createElement("p",{className:"status-indicator status-indicator--"+r.status},m.default.capitalize(r.status)),l.default.createElement("div",{className:"request-progress"},l.default.createElement("progress",{value:i,max:"100",className:n,style:{backgroundSize:i+"%"}}),l.default.createElement("p",{className:"progress-value"},(0,v.default)(i).format("0.0"),"% complete")),l.default.createElement("p",null,"Created by: ",l.default.createElement("strong",null,w.getNameFromId(r.authorId)))))),l.default.createElement("div",{className:"section__body"},l.default.createElement("div",{className:"inner"},this.renderRequestMap(),l.default.createElement("div",{className:"details"},l.default.createElement("div",{className:"details__col--sec"},l.default.createElement("dl",null,l.default.createElement("dt",null,"Requesting organization"),l.default.createElement("dd",null,r.requestingOrg?r.requestingOrg:"n/a"),l.default.createElement("dt",null,"Time period requested"),l.default.createElement("dd",null,u),l.default.createElement("dt",null,"Desired GSD"),l.default.createElement("dd",null,r.gsd?r.gsd+"m":"n/a"),l.default.createElement("dt",null,"Product type"),l.default.createElement("dd",null,r.productType?r.productType:"n/a"))),l.default.createElement("div",{className:"details__col--main"},l.default.createElement("dl",null,l.default.createElement("dt",null,"Purpose"),l.default.createElement("dd",null,l.default.createElement(_.default,null,r.purpose?r.purpose:"Purpose not provided")),l.default.createElement("dt",null,"Use"),l.default.createElement("dd",null,l.default.createElement(_.default,null,r.use?r.use:"Use not provided")),l.default.createElement("dt",null,"Notes"),l.default.createElement("dd",null,l.default.createElement(_.default,null,r.notes?r.notes:"Notes not provided"))))),l.default.createElement("hr",null),this.renderTasks())))}});t.exports=(0,u.connect)(o,i)(N)},{"../actions":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/actions/index.js","../components/request-map":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/components/request-map.js","../components/task-card":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/components/task-card.js","../utils/auth-service":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/auth-service.js","../utils/features":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/features.js","../utils/users":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/users.js",classnames:"classnames",lodash:"lodash",moment:"moment",numeral:"numeral",react:"react","react-linkify":"react-linkify","react-redux":"react-redux","react-router":"react-router"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/views/task-form.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function o(e){return{task:e.task,requestTasks:e.tasks,request:e.request,taskForm:e.taskForm,users:e.users,user:e.user,mapState:e.map}}function i(e){return{_fetchTask:function(){return e(q.fetchTask.apply(void 0,arguments))},_invalidateTask:function(){return e(q.invalidateTask.apply(void 0,arguments))},_postTask:function(){return e(q.postTask.apply(void 0,arguments))},_patchTask:function(){return e(q.patchTask.apply(void 0,arguments))},_resetTaskFrom:function(){return e(q.resetTaskFrom.apply(void 0,arguments))},_fetchRequest:function(){return e(q.fetchRequest.apply(void 0,arguments))},_fetchRequestTasks:function(){return e(q.fetchRequestTasks.apply(void 0,arguments))},_invalidateRequest:function(){return e(q.invalidateRequest.apply(void 0,arguments))},_deleteTask:function(){return e(q.deleteTask.apply(void 0,arguments))},_setMapBaseLayer:function(){return e(q.setMapBaseLayer.apply(void 0,arguments))}}}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=e("react"),u=a(l),d=e("react-redux"),c=e("react-router"),m=e("moment"),p=a(m),f=e("lodash"),h=a(f),y=e("react-widgets/lib/DateTimePicker"),g=a(y),v=e("react-widgets/lib/localizers/moment"),b=a(v),_=e("xmldom"),E=e("../utils/togeojson"),T=a(E),w=e("../utils/features"),q=e("../actions"),S=e("../components/edit-map"),k=a(S);(0,b.default)(p.default);var P=u.default.createClass({displayName:"TaskForm",propTypes:{_fetchTask:l.PropTypes.func,_invalidateTask:l.PropTypes.func,_postTask:l.PropTypes.func,_patchTask:l.PropTypes.func,_resetTaskFrom:l.PropTypes.func,_fetchRequest:l.PropTypes.func,_invalidateRequest:l.PropTypes.func,_deleteTask:l.PropTypes.func,_setMapBaseLayer:l.PropTypes.func,_fetchRequestTasks:l.PropTypes.func,params:l.PropTypes.object,task:l.PropTypes.object,requestTasks:l.PropTypes.object,request:l.PropTypes.object,taskForm:l.PropTypes.object,users:l.PropTypes.object,user:l.PropTypes.object,mapState:l.PropTypes.object},getInitialState:function(){return{data:{name:"",geometry:"",assigneeId:"",deliveryTime:null,timePeriodProvidedFrom:null,timePeriodProvidedTo:null},errors:{}}},goToTaskForm:!1,checkErrors:function(){var e=!0,t={};return""===this.state.data.name&&(t.name=!0,e=!1),""===this.state.data.geometry&&(t.geometry=!0,e=!1),this.setState({errors:t}),e},onSave:function(e){this.goToTaskForm=!1,this.onFormSubmit(e)},onSaveAndAdd:function(e){this.goToTaskForm=!0,this.onFormSubmit(e)},onFormSubmit:function(e){if(e.preventDefault(),this.checkErrors()){var t={name:this.state.data.name,geometry:this.state.data.geometry,assigneeId:this.state.data.assigneeId||null,timePeriodProvidedFrom:this.state.data.timePeriodProvidedFrom?(0,p.default)(this.state.data.timePeriodProvidedFrom).format("YYYY-MM-DD"):null,timePeriodProvidedTo:this.state.data.timePeriodProvidedTo?(0,p.default)(this.state.data.timePeriodProvidedTo).format("YYYY-MM-DD"):null,deliveryTime:this.state.data.deliveryTime?(0,p.default)(this.state.data.deliveryTime).format("YYYY-MM-DD"):null};this.props.params.taskid?this.props._patchTask(this.props.params.reqid,this.props.params.taskid,t):(t=h.default.pickBy(t,function(e){return null!==e}),this.props._postTask(this.props.params.reqid,t)),this.setState({data:this.getInitialState().data})}},getValueForDate:function(e,t){return null===this.state.data[e]?null:new Date(this.state.data[e])},dateOrUndefined:function(e){return this.getValueForDate(e)||void 0},onDateChange:function(e,t,s){var a=null===t?null:t.toISOString(),o=Object.assign({},this.state.data,r({},e,a));this.setState({data:o})},onFieldChange:function(e,t){var s=Object.assign({},this.state.data,r({},e,t.target.value));this.setState({data:s})},onFileChange:function(e){var t=this,s=new FileReader,a=e.target.files[0];if(!a.name.match(/(\.geojson|\.json|\.kml)$/i)){var r=Object.assign({},this.state.errors);return r.geometryFile="Invalid file format. Please upload a GeoJSON or KML file.",void this.setState({errors:r})}var o=!!a.name.match(/\.kml$/i);s.onload=function(e){var a=Object.assign({},t.state.errors);try{var r=void 0;if(o){var i=(new _.DOMParser).parseFromString(s.result);r=T.default.kml(i)}else r=JSON.parse(s.result);(0,w.validateGeoJSONPolygon)(r,function(e,s){if(e)o?a.geometryFile="The KML file is not properly formatted. Please ensure that it only includes one polygon.":a.geometryFile=e,t.setState({errors:a});else{var r=Object.assign({},t.state.data,{geometry:s});a.geometryFile=null,a.geometry=null,t.setState({errors:a,data:r})}})}catch(e){a.geometryFile="File is not properly formatted. Needs to be a valid GeoJSON or KML.",t.setState({errors:a})}},s.readAsText(a)},onFeatureDraw:function(e){var t=e.features[0].geometry.coordinates[0],s=Object.assign({},this.state.data,{geometry:t}),a=Object.assign({},this.state.errors,{geometry:null,geometryFile:null});this.setState({data:s,errors:a})},onFeatureRemove:function(){var e=Object.assign({},this.state.data,{geometry:""});this.setState({data:e})},onDeleteClick:function(e){e.preventDefault();var t="Are you sure you want to delete "+this.props.task.data.name+"?\nThis action is permanent.";confirm(t)&&(this.props._deleteTask(this.props.params.reqid,this.props.params.taskid),c.hashHistory.push("/requests/"+this.props.params.reqid))},componentDidMount:function(){this.props.params.taskid?this.props._fetchTask(this.props.params.reqid,this.props.params.taskid):this.props._fetchRequest(this.props.params.reqid),this.props._fetchRequestTasks(this.props.params.reqid)},componentWillUnmount:function(){this.props._invalidateTask(),this.props._invalidateRequest(),this.props._resetTaskFrom()},componentWillReceiveProps:function(e){var t=this,s=this.props.task,a=s.fetched,r=s.fetching,o=e.task,i=o.fetched,l=o.fetching,u=o.error,d=o.data;if(!a&&r&&i&&!l&&!u){var m=function(){var e=t.props.user.profile.roles.indexOf("surveyor")!==-1;if(e&&t.props.user.profile.user_id!==d.assigneeId)return{v:c.hashHistory.push("/")};var s={};Object.keys(t.state.data).forEach(function(e){s[e]=null===d[e]?"":d[e]}),s.timePeriodProvidedFrom=d.timePeriodProvided.from,s.timePeriodProvidedTo=d.timePeriodProvided.to,s.deliveryTime=s.deliveryTime||null,t.setState({data:s})}();if("object"===("undefined"==typeof m?"undefined":n(m)))return m.v}var p=this.props.taskForm.processing,f=e.taskForm,h=f.processing,y=f.data;p&&!h&&y._id&&(this.goToTaskForm?(this.props._fetchRequestTasks(this.props.params.reqid),this.props.params.taskid?c.hashHistory.push("/requests/"+y.requestId+"/tasks/edit"):(this.goToTaskForm=!1,this.refs.form.reset(),this.setState(this.getInitialState()))):c.hashHistory.push("/requests/"+y.requestId+"/tasks/"+y._id))},renderMap:function(){var e=this,t=(0,w.geometryToFeature)(this.state.data.geometry),s=null;if(this.props.requestTasks.fetched&&!this.props.requestTasks.fetching&&this.props.requestTasks.data.results.length){var a=this.props.params.taskid?this.props.requestTasks.data.results.filter(function(t){return t._id!==e.props.params.taskid}):this.props.requestTasks.data.results;s=(0,w.geometryToFeature)(a,function(e){return h.default.omit(e,["geometry","updates"])})}return u.default.createElement(k.default,{mapId:"map-task-edit",className:"map-container map-container--edit bleed-full",geometry:t,otherTasks:s,onFeatureDraw:this.onFeatureDraw,onFeatureRemove:this.onFeatureRemove,onBaseLayerSelect:this.props._setMapBaseLayer,selectedLayer:this.props.mapState.baseLayer})},renderFrom:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},!!this.props.params.taskid);return u.default.createElement("div",{className:"task-form"},u.default.createElement("form",{ref:"form",className:"form"},u.default.createElement("div",{className:"form__group"},u.default.createElement("label",{className:"form__label"},"Area of interest"),u.default.createElement("input",{type:"file",name:"task-area-file",onChange:this.onFileChange}),this.state.errors.geometryFile?u.default.createElement("p",{className:"message message--alert"},this.state.errors.geometryFile):null),this.renderMap(),this.state.errors.geometry?u.default.createElement("p",{className:"message message--alert"},"A task polygon is needed. Draw one or provide a file."):null,u.default.createElement("div",{className:"form__group"},u.default.createElement("label",{className:"form__label",htmlFor:"task-name"},"Task name ",u.default.createElement("small",null,"(required)")),u.default.createElement("input",{type:"text",className:"form__control form__control--medium",id:"task-name",name:"task-name",placeholder:"Task name",value:this.state.data.name,onChange:this.onFieldChange.bind(null,"name")}),this.state.errors.name?u.default.createElement("p",{className:"message message--alert"},"A name is required"):null),u.default.createElement("div",{className:"form__group"},u.default.createElement("label",{className:"form__label"},"Time period provided"),u.default.createElement("div",{className:"date-selector"},u.default.createElement("div",{className:"date-selector__picker"},u.default.createElement(g.default,{max:this.dateOrUndefined("timePeriodProvidedTo")||new Date,finalView:"decade",format:"YYYY-MM-DD",value:this.getValueForDate("timePeriodProvidedFrom"),time:!1,onChange:this.onDateChange.bind(null,"timePeriodProvidedFrom")})),u.default.createElement("p",{className:"date-selector__sep"},"to"),u.default.createElement("div",{className:"date-selector__picker"},u.default.createElement(g.default,{min:this.dateOrUndefined("timePeriodProvidedFrom"),max:new Date,finalView:"decade",format:"YYYY-MM-DD",value:this.getValueForDate("timePeriodProvidedTo"),time:!1,onChange:this.onDateChange.bind(null,"timePeriodProvidedTo")}))),u.default.createElement("p",{className:"form__help"},"The dates are used to express a range and are optional.")),u.default.createElement("div",{className:"form__group"},u.default.createElement("label",{className:"form__label"},"To deliver by"),u.default.createElement(g.default,{min:new Date,finalView:"decade",format:"YYYY-MM-DD",value:this.getValueForDate("deliveryTime"),time:!1,onChange:this.onDateChange.bind(null,"deliveryTime")})),u.default.createElement("div",{className:"form__group"},u.default.createElement("label",{className:"form__label",htmlFor:"task-assignee"},"Assignee"),u.default.createElement("select",{className:"form__control form__control--medium",id:"task-assignee",value:this.state.data.assigneeId,onChange:this.onFieldChange.bind(null,"assigneeId")},u.default.createElement("option",{value:""},"Not assigned"),this.props.users.users.map(function(e){return u.default.createElement("option",{value:e.userId,key:e.userId},e.name)}))),u.default.createElement("div",{className:"form__actions"},u.default.createElement("button",{type:"submit",className:"button button--primary",onClick:this.onSave},u.default.createElement("span",null,e?"Save task":"Create task")),this.props.user.profile.roles.indexOf("coordinator")!==-1?u.default.createElement("button",{type:"submit",className:"button button--secondary",onClick:this.onSaveAndAdd},u.default.createElement("span",null,e?"Save & add another":"Create & add another")):null,u.default.createElement(c.Link,{to:"requests/"+this.props.params.reqid+(e?"/tasks/"+this.props.params.taskid:""),className:"button button--base"},u.default.createElement("span",null,"Cancel")))))},render:function(){var e=!!this.props.params.taskid,t=this.props.task,s=t.fetched,a=t.fetching,r=t.error,o=t.data,i="Create Task";if(e){if(!s&&!a)return null;a&&(i="Edit Task"),o.name&&(i="Edit "+o.name)}var n=void 0,l=void 0;e&&o.requestId?(l=o.requestId,n=o.requestInfo.name):this.props.request.data._id&&(l=this.props.request.data._id,n=this.props.request.data.name);var d=e&&this.props.user.profile.roles.indexOf("coordinator")!==-1;return u.default.createElement("section",{className:"section section--page"},u.default.createElement("header",{className:"section__header"},u.default.createElement("div",{className:"inner"},u.default.createElement("div",{className:"section__headline"},u.default.createElement("p",{className:"section__subtitle"},u.default.createElement(c.Link,{to:"/requests/"+l},n)),u.default.createElement("h1",{className:"section__title"},i)),d?u.default.createElement("div",{className:"section__actions"},u.default.createElement("a",{href:"#",className:"button-delete",onClick:this.onDeleteClick},u.default.createElement("span",null,"Delete task"))):null)),u.default.createElement("div",{className:"section__body"},u.default.createElement("div",{className:"inner"},e&&a?u.default.createElement("p",{className:"loading-indicator"},"Loading..."):null,e&&r?u.default.createElement("p",null,"Error"):null,!e||e&&!a?this.renderFrom():null,this.props.taskForm.processing?u.default.createElement("p",null,"Submitting data..."):null)))}});t.exports=(0,d.connect)(o,i)(P)},{"../actions":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/actions/index.js","../components/edit-map":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/components/edit-map.js","../utils/features":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/features.js","../utils/togeojson":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/togeojson.js",lodash:"lodash",moment:"moment",react:"react","react-redux":"react-redux","react-router":"react-router","react-widgets/lib/DateTimePicker":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/DateTimePicker.js","react-widgets/lib/localizers/moment":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/localizers/moment.js",xmldom:"xmldom"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/views/task-page.js":[function(e,t,s){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return{task:e.task,requestTasks:e.tasks,user:e.user,mapState:e.map}}function i(e){return{_invalidateTask:function(){return e(g.invalidateTask.apply(void 0,arguments))},_fetchTask:function(){return e(g.fetchTask.apply(void 0,arguments))},_addTaskStatusUpdate:function(){return e(g.addTaskStatusUpdate.apply(void 0,arguments))},_setMapBaseLayer:function(){return e(g.setMapBaseLayer.apply(void 0,arguments))},_fetchRequestTasks:function(){return e(g.fetchRequestTasks.apply(void 0,arguments))},_invalidateTasks:function(){return e(g.invalidateTasks.apply(void 0,arguments))}}}var n=e("react"),l=r(n),u=e("react-redux"),d=e("react-router"),c=e("lodash"),m=r(c),p=e("moment"),f=r(p),h=e("react-linkify"),y=r(h),g=e("../actions"),v=e("../utils/users"),b=a(v),_=e("../utils/auth-service"),E=e("../utils/features"),T=e("../utils/constants"),w=e("../components/task-update-form"),q=r(w),S=e("../components/task-map"),k=r(S),P=l.default.createClass({displayName:"TaskPage",propTypes:{_invalidateTask:n.PropTypes.func,_invalidateTasks:n.PropTypes.func,_fetchTask:n.PropTypes.func,_fetchRequestTasks:n.PropTypes.func,_addTaskStatusUpdate:n.PropTypes.func,_setMapBaseLayer:n.PropTypes.func,params:n.PropTypes.object,task:n.PropTypes.object,requestTasks:n.PropTypes.object,user:n.PropTypes.object,mapState:n.PropTypes.object},componentDidMount:function(){this.props._fetchTask(this.props.params.reqid,this.props.params.taskid),this.props._fetchRequestTasks(this.props.params.reqid)},componentWillUnmount:function(){this.props._invalidateTask(),this.props._invalidateTasks()},componentWillReceiveProps:function(e){e.params.taskid!==this.props.params.taskid&&this.props._fetchTask(e.params.reqid,e.params.taskid),e.params.reqid!==this.props.params.reqid&&this.props._fetchRequestTasks(e.params.reqid),this.props.task.statusUpdate.processing&&!e.task.statusUpdate.processing&&this.props._fetchRequestTasks(this.props.params.reqid)},onTaskUpdateSubmit:function(e,t){this.props._addTaskStatusUpdate(this.props.params.reqid,this.props.params.taskid,{status:e,comment:t})},renderTaskUpdate:function(e){return l.default.createElement("li",{className:"task-updates__item",key:e._id},l.default.createElement("small",{className:"update-date"},(0,f.default)(e.created).format("YYYY/MM/DD")),l.default.createElement("p",{className:"status-indicator status-indicator--"+e.status},m.default.capitalize(e.status)),l.default.createElement("p",{className:"update-author"},"Updated by ",b.getNameFromId(e.authorId)),l.default.createElement("p",{className:"update-comment"},l.default.createElement(y.default,null,e.comment)))},renderTaskUpdatesBlock:function(){var e=this.props.task.data.updates;return l.default.createElement("div",null,l.default.createElement("section",{className:"task-updates"},l.default.createElement("h2",null,"Task Progress"),l.default.createElement(q.default,{statusUpdate:this.props.task.statusUpdate,user:this.props.user,task:this.props.task.data,onSubmit:this.onTaskUpdateSubmit}),l.default.createElement("ul",{className:"task-updates__list"},e.map(this.renderTaskUpdate))))},renderTaskMap:function(){var e=this.props.requestTasks,t=e.fetched,s=e.fetching,a=e.error,r=e.data;if(!t&&!s)return null;if(s)return l.default.createElement("p",{className:"loading-indicator"},"Loading...");if(a)return l.default.createElement("p",null,"Error");var o=(0,E.geometryToFeature)(r.results,function(e){return m.default.omit(e,["geometry","updates"])});return l.default.createElement(k.default,{mapId:"map-task-page",className:"map-container map-container--display bleed-full",results:o,selectedId:this.props.task.data._id,onBaseLayerChange:this.props._setMapBaseLayer,selectedLayer:this.props.mapState.baseLayer})},render:function(){var e=this.props.task,t=e.fetched,s=e.fetching,a=e.error,r=e.data;if(!t&&!s)return null;if(a||s)return l.default.createElement("section",{className:"section section--page"},l.default.createElement("header",{className:"section__header"},l.default.createElement("div",{className:"inner"},l.default.createElement("div",{className:"section__headline"},l.default.createElement("h1",{className:"section__title"},"Task")))),l.default.createElement("div",{className:"section__body"},l.default.createElement("div",{className:"inner"},a?l.default.createElement("p",null,"Error: ",a):null,s?l.default.createElement("p",{className:"loading-indicator"},"Loading..."):null)));var o=r.timePeriodProvided.from?(0,f.default)(r.timePeriodProvided.from).format("YYYY/MM/DD"):"n/a",i=r.timePeriodProvided.to?(0,f.default)(r.timePeriodProvided.to).format("YYYY/MM/DD"):"n/a",n=this.props.user.token,u=m.default.get(this.props.user,"profile.roles",[]),c=!1;return(0,_.isLoggedIn)(n)&&(u.indexOf("coordinator")!==-1?c=!0:u.indexOf("surveyor")!==-1&&this.props.user.profile.user_id===r.assigneeId&&(c=!0)),l.default.createElement("section",{className:"section section--page"},l.default.createElement("header",{className:"section__header"},l.default.createElement("div",{className:"inner"},l.default.createElement("div",{className:"section__headline"},l.default.createElement("p",{className:"section__subtitle"},l.default.createElement(d.Link,{to:"/requests/"+r.requestId},r.requestInfo.name)),l.default.createElement("h1",{className:"section__title"},r.name)),c?l.default.createElement("div",{className:"section__actions"},l.default.createElement(d.Link,{to:"/requests/"+r.requestId+"/tasks/"+r._id+"/edit",className:"button-edit"},l.default.createElement("span",null,"Edit task"))):null,l.default.createElement("div",{className:"section__stats"},l.default.createElement("p",{className:"status-indicator status-indicator--"+r.status},T.taskStatusMatrix[r.status]),l.default.createElement("p",{className:"meta-info"},"Updated on ",(0,f.default)(r.updated).format("YYYY/MM/DD")),l.default.createElement("p",{className:"task-author"},"Created by: ",l.default.createElement("strong",null,b.getNameFromId(r.authorId))),r.assigneeId?l.default.createElement("p",{className:"task-assignee"},"Assigned to: ",l.default.createElement("strong",null,b.getNameFromId(r.assigneeId))):l.default.createElement("p",{className:"task-assignee"},"Assigned to: ",l.default.createElement("strong",null,"Not assigned"))))),l.default.createElement("div",{className:"section__body"},l.default.createElement("div",{className:"inner"},this.renderTaskMap(),l.default.createElement("div",{className:"details"},l.default.createElement("dl",null,l.default.createElement("dt",null,"Deliver by"),l.default.createElement("dd",null,r.deliveryTime?(0,f.default)(r.deliveryTime).format("YYYY/MM/DD"):"n/a"),l.default.createElement("dt",null,"Time period Provided"),l.default.createElement("dd",null,o," - ",i))),l.default.createElement("hr",null),this.renderTaskUpdatesBlock())))}});t.exports=(0,u.connect)(o,i)(P)},{"../actions":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/actions/index.js","../components/task-map":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/components/task-map.js","../components/task-update-form":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/components/task-update-form.js","../utils/auth-service":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/auth-service.js","../utils/constants":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/constants.js","../utils/features":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/features.js","../utils/users":"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/utils/users.js",lodash:"lodash",moment:"moment",react:"react","react-linkify":"react-linkify","react-redux":"react-redux","react-router":"react-router"}],"/home/travis/build/hotosm/imagery-requests/app/assets/scripts/views/uhoh.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(s,"__esModule",{value:!0});var r=e("react"),o=a(r),i=o.default.createClass({displayName:"UhOh",render:function(){return o.default.createElement("section",{className:"section section--page"},o.default.createElement("header",{className:"section__header"},o.default.createElement("div",{className:"inner"},o.default.createElement("div",{className:"section__headline"},o.default.createElement("h1",{className:"section__title"},"Uh Oh!")))),o.default.createElement("div",{className:"section__body"},o.default.createElement("div",{className:"inner"},"You're seaching for something that doesn't exist...")))}});s.default=i},{react:"react"}],"/home/travis/build/hotosm/imagery-requests/node_modules/browserify/node_modules/process/browser.js":[function(e,t,s){function a(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(c===setTimeout)return setTimeout(e,0);if((c===a||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function i(e){if(m===clearTimeout)return clearTimeout(e);if((m===r||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(e);try{return m(e)}catch(t){try{return m.call(null,e)}catch(t){return m.call(this,e)}}}function n(){y&&f&&(y=!1,f.length?h=f.concat(h):g=-1,h.length&&l())}function l(){if(!y){var e=o(n);
y=!0;for(var t=h.length;t;){for(f=h,h=[];++g<t;)f&&f[g].run();g=-1,t=h.length}f=null,y=!1,i(e)}}function u(e,t){this.fun=e,this.array=t}function d(){}var c,m,p=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:a}catch(e){c=a}try{m="function"==typeof clearTimeout?clearTimeout:r}catch(e){m=r}}();var f,h=[],y=!1,g=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)t[s-1]=arguments[s];h.push(new u(e,t)),1!==h.length||y||o(l)},u.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=d,p.addListener=d,p.once=d,p.off=d,p.removeListener=d,p.removeAllListeners=d,p.emit=d,p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/Button.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var s={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(s[a]=e[a]);return s}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}s.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},u=e("react"),d=a(u),c=e("classnames"),m=a(c),p=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return n(t,e),t.prototype.render=function(){var e=this.props,t=e.className,s=e.disabled,a=e.label,o=e.icon,i=e.busy,n=e.active,u=e.children,c=e.component,p=void 0===c?"button":c,f=r(e,["className","disabled","label","icon","busy","active","children","component"]),h=f.type;return"button"===p&&(h=h||"button"),d.default.createElement(p,l({},f,{tabIndex:"-1",title:a,type:h,disabled:s,"aria-disabled":s,"aria-label":a,className:(0,m.default)(t,"rw-btn",n&&!s&&"rw-state-active")}),o&&d.default.createElement("span",{"aria-hidden":!0,className:(0,m.default)("rw-i","rw-i-"+o,i&&"rw-loading")}),u)},t}(d.default.Component);s.default=p,t.exports=s.default},{classnames:"classnames",react:"react"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/Calendar.js":[function(e,t,s){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var s={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(s[a]=e[a]);return s}function i(e,t,s,a,r){var o={};return Object.keys(a).forEach(function(e){o[e]=a[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function n(e){return e&&!isNaN(e.getTime())?e:null}function l(e){return p({moveBack:"navigate back",moveForward:"navigate forward"},e)}s.__esModule=!0;var u,d,c,m,p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},f=e("react"),h=r(f),y=e("classnames"),g=r(y),v=e("./util/compat"),b=r(v),_=e("./Widget"),E=r(_),T=e("./Header"),w=r(T),q=e("./Footer"),S=r(q),k=e("./Month"),P=r(k),x=e("./Year"),j=r(x),N=e("./Decade"),D=r(N),O=e("./Century"),R=r(O),M=e("./util/localizers"),C=e("./util/propTypes"),A=r(C),F=e("uncontrollable"),L=r(F),I=e("./SlideTransition"),U=r(I),z=e("./util/dates"),Y=r(z),V=e("./util/constants"),H=a(V),B=e("./util/_"),K=r(B),W=e("./util/widgetHelpers"),Q=e("./util/interaction"),G=H.directions,Z=function(e){return Object.keys(e).map(function(t){return e[t]})},J=function(e){return K.default.transform(e,function(e,t,s){e[t]=s},{})},X=H.calendarViews,$=Z(X),ee=J(H.calendarViewHierarchy),te=H.calendarViewHierarchy,se=H.calendarViewUnits,ae=(u={},u[X.MONTH]=P.default,u[X.YEAR]=j.default,u[X.DECADE]=D.default,u[X.CENTURY]=R.default,u),re={ArrowDown:G.DOWN,ArrowUp:G.UP,ArrowRight:G.RIGHT,ArrowLeft:G.LEFT},oe=(d={},d[G.LEFT]=G.RIGHT,d[G.RIGHT]=G.LEFT,d),ie=(c={},c[X.YEAR]=1,c[X.DECADE]=10,c[X.CENTURY]=100,c),ne=function(e,t){return M.date.getFormat(t,e[t+"Format"])},le={disabled:A.default.disabled,readOnly:A.default.readOnly,onChange:h.default.PropTypes.func,value:h.default.PropTypes.instanceOf(Date),min:h.default.PropTypes.instanceOf(Date),max:h.default.PropTypes.instanceOf(Date),currentDate:h.default.PropTypes.instanceOf(Date),onCurrentDateChange:h.default.PropTypes.func,view:h.default.PropTypes.oneOf($),initialView:h.default.PropTypes.oneOf($),finalView:function(e,t,s){for(var a=arguments.length,r=Array(a>3?a-3:0),o=3;o<a;o++)r[o-3]=arguments[o];var i=h.default.PropTypes.oneOf($).apply(void 0,[e,t,s].concat(r));return i?i:$.indexOf(e[t])<$.indexOf(e.initialView)?new Error(("The `"+t+"` prop: `"+e[t]+"` cannot be 'lower' than the `initialView`\n        prop. This creates a range that cannot be rendered.").replace(/\n\t/g,"")):void 0},onViewChange:h.default.PropTypes.func,onNavigate:h.default.PropTypes.func,culture:h.default.PropTypes.string,footer:h.default.PropTypes.bool,dayComponent:A.default.elementType,headerFormat:A.default.dateFormat,footerFormat:A.default.dateFormat,dayFormat:A.default.dateFormat,dateFormat:A.default.dateFormat,monthFormat:A.default.dateFormat,yearFormat:A.default.dateFormat,decadeFormat:A.default.dateFormat,centuryFormat:A.default.dateFormat,messages:h.default.PropTypes.shape({moveBack:h.default.PropTypes.string,moveForward:h.default.PropTypes.string})},ue=h.default.createClass((m={displayName:"Calendar",mixins:[e("./mixins/TimeoutMixin"),e("./mixins/AutoFocusMixin"),e("./mixins/PureRenderMixin"),e("./mixins/RtlParentContextMixin"),e("./mixins/AriaDescendantMixin")(),e("./mixins/FocusMixin")({willHandle:function(){if(+this.props.tabIndex===-1)return!1}})],propTypes:le,getInitialState:function(){return{selectedIndex:0,view:this.props.initialView||"month"}},getDefaultProps:function(){return{value:null,min:new Date(1900,0,1),max:new Date(2099,11,31),currentDate:new Date,initialView:"month",finalView:"century",tabIndex:"0",footer:!1,ariaActiveDescendantKey:"calendar",messages:l({})}},componentWillMount:function(){this.changeCurrentDate(this.props.value)},componentWillReceiveProps:function(e){var t=$.indexOf(e.initialView),s=$.indexOf(e.finalView),a=$.indexOf(this.state.view),r=this.state.view,o=this.inRangeValue(e.value);a<t?this.setState({view:r=e.initialView}):a>s&&this.setState({view:r=e.finalView}),Y.default.eq(o,n(this.props.value),se[r])||this.changeCurrentDate(o,e.currentDate)},render:function(){var e=this,t=this.props,s=t.className,a=t.value,r=t.footerFormat,o=t.disabled,i=t.readOnly,n=t.finalView,u=t.footer,d=t.messages,c=t.min,m=t.max,f=t.culture,y=t.duration,v=t.tabIndex,b=t.currentDate,_=this.state,T=_.view,q=_.slideDirection,k=_.focused,P=ae[T],x=se[T],j=new Date,N=!Y.default.inRange(j,c,m,T);x="day"===x?"date":x;var D=(0,W.instanceId)(this,"_calendar"),O=(0,W.instanceId)(this,"_calendar_label"),R=T+"_"+Y.default[T](b),M=K.default.omitOwnProps(this),C=K.default.pickProps(this.props,P),A=o||i;return d=l(this.props.messages),h.default.createElement(E.default,p({},M,{role:"group",focused:k,disabled:o,readOnly:i,tabIndex:v||0,onBlur:this.handleBlur,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,className:(0,g.default)(s,"rw-calendar")}),h.default.createElement(w.default,{label:this._label(),labelId:O,messages:d,upDisabled:A||T===n,prevDisabled:A||!Y.default.inRange(this.nextDate(G.LEFT),c,m,T),nextDisabled:A||!Y.default.inRange(this.nextDate(G.RIGHT),c,m,T),onViewChange:this.navigate.bind(null,G.UP,null),onMoveLeft:this.navigate.bind(null,G.LEFT,null),onMoveRight:this.navigate.bind(null,G.RIGHT,null)}),h.default.createElement(U.default,{ref:"animation",duration:y,direction:q,onAnimate:function(){return k&&e.focus()}},h.default.createElement(P,p({},C,{key:R,id:D,value:a,today:j,focused:b,onChange:this.change,onKeyDown:this.handleKeyDown,"aria-labelledby":O,ariaActiveDescendantKey:"calendarView"}))),u&&h.default.createElement(S.default,{value:j,format:r,culture:f,disabled:o||N,readOnly:i,onClick:this.select}))},navigate:function(e,t){var s=this.state.view,a=e===G.LEFT||e===G.UP?"right":"left";t||(t=[G.LEFT,G.RIGHT].indexOf(e)!==-1?this.nextDate(e):this.props.currentDate),e===G.DOWN&&(s=ee[s]||s),e===G.UP&&(s=te[s]||s),this.isValidView(s)&&Y.default.inRange(t,this.props.min,this.props.max,s)&&((0,W.notify)(this.props.onNavigate,[t,a,s]),this.focus(!0),this.changeCurrentDate(t),this.setState({slideDirection:a,view:s}))},focus:function(){+this.props.tabIndex>-1&&b.default.findDOMNode(this).focus()},change:function(e){return this.state.view===this.props.initialView?(this.changeCurrentDate(e),(0,W.notify)(this.props.onChange,e),void this.focus()):void this.navigate(G.DOWN,e)},changeCurrentDate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.currentDate,s=this.inRangeValue(e?new Date(e):t);Y.default.eq(s,n(t),se[this.state.view])||(0,W.notify)(this.props.onCurrentDateChange,s)},select:function(e){var t=this.props.initialView,s=t!==this.state.view||Y.default.gt(e,this.state.currentDate)?"left":"right";(0,W.notify)(this.props.onChange,e),this.isValidView(t)&&Y.default.inRange(e,this.props.min,this.props.max,t)&&(this.focus(),this.changeCurrentDate(e),this.setState({slideDirection:s,view:t}))},nextDate:function(e){var t=e===G.LEFT?"subtract":"add",s=this.state.view,a=s===X.MONTH?s:X.YEAR,r=ie[s]||1;return Y.default[t](this.props.currentDate,1*r,a)},handleKeyDown:function(e){var t=e.ctrlKey,s=e.key,a=re[s],r=this.props.currentDate,o=this.state.view,i=se[o],n=r;return"Enter"===s?(e.preventDefault(),this.change(r)):(a&&(t?(e.preventDefault(),this.navigate(a)):(this.isRtl()&&oe[a]&&(a=oe[a]),n=Y.default.move(n,this.props.min,this.props.max,o,a),Y.default.eq(r,n,i)||(e.preventDefault(),Y.default.gt(n,r,o)?this.navigate(G.RIGHT,n):Y.default.lt(n,r,o)?this.navigate(G.LEFT,n):this.changeCurrentDate(n)))),void(0,W.notify)(this.props.onKeyDown,[e]))},_label:function(){var e=this.props,t=e.culture,s=o(e,["culture"]),a=this.state.view,r=this.props.currentDate;return"month"===a?M.date.format(r,ne(s,"header"),t):"year"===a?M.date.format(r,ne(s,"year"),t):"decade"===a?M.date.format(Y.default.startOf(r,"decade"),ne(s,"decade"),t):"century"===a?M.date.format(Y.default.startOf(r,"century"),ne(s,"century"),t):void 0},inRangeValue:function(e){var t=n(e);return null===t?t:Y.default.max(Y.default.min(t,this.props.max),this.props.min)},isValidView:function(e){var t=$.indexOf(this.props.initialView),s=$.indexOf(this.props.finalView),a=$.indexOf(e);return a>=t&&a<=s}},i(m,"navigate",[Q.widgetEditable],Object.getOwnPropertyDescriptor(m,"navigate"),m),i(m,"change",[Q.widgetEditable],Object.getOwnPropertyDescriptor(m,"change"),m),i(m,"select",[Q.widgetEditable],Object.getOwnPropertyDescriptor(m,"select"),m),i(m,"handleKeyDown",[Q.widgetEditable],Object.getOwnPropertyDescriptor(m,"handleKeyDown"),m),m));s.default=(0,L.default)(ue,{value:"onChange",currentDate:"onCurrentDateChange",view:"onViewChange"},["focus"]),t.exports=s.default},{"./Century":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/Century.js","./Decade":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/Decade.js","./Footer":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/Footer.js","./Header":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/Header.js","./Month":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/Month.js","./SlideTransition":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/SlideTransition.js","./Widget":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/Widget.js","./Year":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/Year.js","./mixins/AriaDescendantMixin":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/mixins/AriaDescendantMixin.js","./mixins/AutoFocusMixin":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/mixins/AutoFocusMixin.js","./mixins/FocusMixin":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/mixins/FocusMixin.js","./mixins/PureRenderMixin":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/mixins/PureRenderMixin.js","./mixins/RtlParentContextMixin":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/mixins/RtlParentContextMixin.js","./mixins/TimeoutMixin":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/mixins/TimeoutMixin.js","./util/_":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/_.js","./util/compat":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/compat.js","./util/constants":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/constants.js","./util/dates":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/dates.js","./util/interaction":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/interaction.js","./util/localizers":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/localizers.js","./util/propTypes":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/propTypes.js","./util/widgetHelpers":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/widgetHelpers.js",classnames:"classnames",react:"react",uncontrollable:"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/uncontrollable/index.js"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/CalendarView.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function n(e,t,s){return y.default.max(y.default.min(e,s),t)}s.__esModule=!0;var l,u,d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},c=e("react"),m=a(c),p=e("classnames"),f=a(p),h=e("./util/dates"),y=a(h),g=["month","year","decade","century"],v=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return i(t,e),t.prototype.render=function(){var e=this.props.className;return m.default.createElement("table",d({},this.props,{role:"grid",tabIndex:"-1",className:(0,f.default)(e,"rw-nav-view","rw-calendar-grid")}))},t}(m.default.Component),b=(u=l=function(e){function t(){var s,a,i;r(this,t);for(var l=arguments.length,u=Array(l),d=0;d<l;d++)u[d]=arguments[d];return s=a=o(this,e.call.apply(e,[this].concat(u))),a.handleChange=function(){var e=a.props,t=e.onChange,s=e.min,r=e.max,o=e.date;t(n(o,s,r))},i=s,o(a,i)}return i(t,e),t.prototype.isEqual=function(e){return y.default.eq(this.props.date,e,this.props.unit)},t.prototype.isEmpty=function(){var e=this.props,t=e.unit,s=e.min,a=e.max,r=e.date;return!y.default.inRange(r,s,a,t)},t.prototype.isNow=function(){return this.isEqual(this.props.now)},t.prototype.isFocused=function(){return this.isEqual(this.props.focused)},t.prototype.isSelected=function(){return this.isEqual(this.props.selected)},t.prototype.isOffView=function(){var e=this.props,t=e.viewUnit,s=e.focused,a=e.date;return t&&y.default[t](a)!==y.default[t](s)},t.prototype.render=function(){var e=this.props,t=e.children,s=e.id,a=e.label,r=e.disabled;return this.isEmpty()?m.default.createElement("td",{className:"rw-empty-cell",role:"presentation"},""):m.default.createElement("td",{role:"gridcell",id:s,title:a,"aria-label":a,"aria-readonly":r,"aria-selected":this.isSelected()},m.default.createElement("span",{"aria-labelledby":s,onClick:this.handleChange,className:(0,f.default)("rw-btn",this.isNow()&&"rw-now",this.isOffView()&&"rw-off-range",this.isFocused()&&"rw-state-focus",this.isSelected()&&"rw-state-selected")},t))},t}(m.default.Component),l.propTypes={id:m.default.PropTypes.string,label:m.default.PropTypes.string,today:m.default.PropTypes.instanceOf(Date),selected:m.default.PropTypes.instanceOf(Date),focused:m.default.PropTypes.instanceOf(Date),min:m.default.PropTypes.instanceOf(Date),max:m.default.PropTypes.instanceOf(Date),unit:m.default.PropTypes.oneOf(["day"].concat(g)),viewUnit:m.default.PropTypes.oneOf(g),onChange:m.default.PropTypes.func.isRequired},u);v.Row=function(e){return m.default.createElement("tr",d({role:"row"},e))},v.Cell=b,s.default=v,t.exports=s.default},{"./util/dates":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/dates.js",classnames:"classnames",react:"react"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/Century.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=[1,2,3,4,5,6,7,8,9,10,11,12],s=d.default.add(d.default.startOf(e,"century"),-20,"year");return t.map(function(){return s=d.default.add(s,10,"year")})}s.__esModule=!0;var o=e("react"),i=a(o),n=e("./CalendarView"),l=a(n),u=e("./util/dates"),d=a(u),c=e("./util/localizers"),m=e("./util/_"),p=a(m),f=e("./util/propTypes"),h=a(f),y=e("./util/widgetHelpers"),g=function(e){return c.date.getFormat("decade",e.decadeFormat)},v=function(e,t){return e+"__century_"+d.default.year(t)},b={culture:i.default.PropTypes.string,today:i.default.PropTypes.instanceOf(Date),value:i.default.PropTypes.instanceOf(Date),focused:i.default.PropTypes.instanceOf(Date),min:i.default.PropTypes.instanceOf(Date),max:i.default.PropTypes.instanceOf(Date),onChange:i.default.PropTypes.func.isRequired,decadeFormat:h.default.dateFormat};s.default=i.default.createClass({displayName:"CenturyView",mixins:[e("./mixins/PureRenderMixin"),e("./mixins/RtlChildContextMixin"),e("./mixins/AriaDescendantMixin")()],propTypes:b,componentDidUpdate:function(){var e=v((0,y.instanceId)(this),this.props.focused);this.ariaActiveDescendant(e)},render:function(){var e=this.props.focused;return i.default.createElement(l.default,p.default.omitOwnProps(this),i.default.createElement("tbody",null,p.default.chunk(r(e),4).map(this.renderRow)))},renderRow:function(e,t){var s=this,a=this.props,r=a.focused,o=a.disabled,n=a.onChange,u=a.value,m=a.today,p=a.culture,f=a.min,h=a.max,b=(0,y.instanceId)(this,"_century");return i.default.createElement(l.default.Row,{key:t},e.map(function(e,t){var a=c.date.format(d.default.startOf(e,"decade"),g(s.props),p);return i.default.createElement(l.default.Cell,{key:t,unit:"decade",id:v(b,e),label:a,date:e,now:m,min:f,max:h,onChange:n,focused:r,selected:u,disabled:o},a)}))}}),t.exports=s.default},{"./CalendarView":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/CalendarView.js","./mixins/AriaDescendantMixin":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/mixins/AriaDescendantMixin.js","./mixins/PureRenderMixin":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/mixins/PureRenderMixin.js","./mixins/RtlChildContextMixin":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/mixins/RtlChildContextMixin.js","./util/_":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/_.js","./util/dates":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/dates.js","./util/localizers":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/localizers.js","./util/propTypes":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/propTypes.js","./util/widgetHelpers":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/widgetHelpers.js",react:"react"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/DateTimePicker.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,s,a,r){var o={};return Object.keys(a).forEach(function(e){o[e]=a[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function o(e){var t=null==e[k.datePopups.CALENDAR]||e.calendar,s=null==e[k.datePopups.TIME]||e.time;return e.format?e.format:t&&s||!t&&!s?S.date.getFormat("default"):S.date.getFormat(t?"date":"time")}function i(e,t,s){var a="";return e instanceof Date&&!isNaN(e.getTime())&&(a=S.date.format(e,t,s)),a}function n(e,t,s){for(var a,r=0;r<e.length;r++)if(a=S.date.parse(s,e[r],t))return a;return null}function l(e){return e&&!isNaN(e.getTime())?e:null}s.__esModule=!0;var u,d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},c=e("react"),m=a(c),p=e("invariant"),f=a(p),h=e("dom-helpers/activeElement"),y=a(h),g=e("classnames"),v=a(g),b=e("./util/compat"),_=a(b),E=e("./util/_"),T=a(E),w=e("./util/dates"),q=a(w),S=e("./util/localizers"),k=e("./util/constants"),P=e("./Widget"),x=a(P),j=e("./Popup"),N=a(j),D=e("./Calendar"),O=a(D),R=e("./TimeList"),M=a(R),C=e("./DateTimePickerInput"),A=a(C),F=e("./Button"),L=a(F),I=e("./util/propTypes"),U=a(I),z=e("uncontrollable"),Y=a(z),V=e("./util/interaction"),H=e("./util/widgetHelpers"),B=O.default.ControlledComponent,K=Object.keys(k.calendarViews).map(function(e){return k.calendarViews[e]}),W=d({},B.propTypes,{value:m.default.PropTypes.instanceOf(Date),onChange:m.default.PropTypes.func,open:m.default.PropTypes.oneOf([!1,k.datePopups.TIME,k.datePopups.CALENDAR]),onToggle:m.default.PropTypes.func,currentDate:m.default.PropTypes.instanceOf(Date),onCurrentDateChange:m.default.PropTypes.func,onSelect:m.default.PropTypes.func,min:m.default.PropTypes.instanceOf(Date),max:m.default.PropTypes.instanceOf(Date),culture:m.default.PropTypes.string,format:U.default.dateFormat,timeFormat:U.default.dateFormat,editFormat:U.default.dateFormat,calendar:m.default.PropTypes.bool,time:m.default.PropTypes.bool,timeComponent:U.default.elementType,dropUp:m.default.PropTypes.bool,duration:m.default.PropTypes.number,placeholder:m.default.PropTypes.string,name:m.default.PropTypes.string,initialView:m.default.PropTypes.oneOf(K),finalView:m.default.PropTypes.oneOf(K),autoFocus:m.default.PropTypes.bool,disabled:U.default.disabled,readOnly:U.default.readOnly,parse:m.default.PropTypes.oneOfType([m.default.PropTypes.arrayOf(m.default.PropTypes.string),m.default.PropTypes.string,m.default.PropTypes.func]),"aria-labelledby":m.default.PropTypes.string,messages:m.default.PropTypes.shape({calendarButton:m.default.PropTypes.string,timeButton:m.default.PropTypes.string})}),Q=m.default.createClass((u={displayName:"DateTimePicker",mixins:[e("./mixins/TimeoutMixin"),e("./mixins/PureRenderMixin"),e("./mixins/PopupScrollToMixin"),e("./mixins/RtlParentContextMixin"),e("./mixins/FocusMixin")({didHandle:function(e){e||this.close()}}),e("./mixins/AriaDescendantMixin")("valueInput",function(e,t){var s=this.props.open,a=this.ariaActiveDescendant(),r=s===k.datePopups.CALENDAR&&"calendar"===e,o=s===k.datePopups.TIME&&"timelist"===e;if(!a||o||r)return t})],propTypes:W,getInitialState:function(){return{focused:!1}},getDefaultProps:function(){return{value:null,currentDate:new Date,min:new Date(1900,0,1),max:new Date(2099,11,31),calendar:!0,time:!0,open:!1,footer:!0,messages:{calendarButton:"Select Date",timeButton:"Select Time"},ariaActiveDescendantKey:"dropdownlist"}},renderInput:function(e,t){var s=this.props,a=s.open,r=s.value,i=s.editFormat,n=s.culture,l=s.busy,u=s.placeholder,d=s.disabled,c=s.readOnly,p=s.name,f=s.tabIndex,h=s.autoFocus,y=s["aria-labelledby"],g=s["aria-describedby"],v=this.state.focused;return m.default.createElement(A.default,{id:e,ref:"valueInput",role:"combobox",name:p,tabIndex:f,autoFocus:h,placeholder:u,disabled:d,readOnly:c,value:r,format:o(this.props),editFormat:i,editing:v,culture:n,parse:this._parse,onChange:this.handleChange,"aria-haspopup":!0,"aria-labelledby":y,"aria-describedby":g,"aria-expanded":!!a,"aria-busy":!!l,"aria-owns":t})},renderButtons:function(e){var t=this.props,s=t.calendar,a=t.time,r=t.disabled,o=t.readOnly;return s||a?m.default.createElement("span",{className:"rw-select"},s&&m.default.createElement(L.default,{icon:"calendar",className:"rw-btn-calendar",label:e.calendarButton,disabled:!(!r&&!o),onClick:this._click.bind(null,k.datePopups.CALENDAR)}),a&&m.default.createElement(L.default,{icon:"clock-o",className:"rw-btn-time",label:e.timeButton,disabled:!(!r&&!o),onClick:this._click.bind(null,k.datePopups.TIME)})):null},renderCalendar:function(e,t){var s=this,a=this.props,r=a.open,o=a.value,i=a.duration,n=a.dropUp,l=T.default.pickProps(this.props,B);return m.default.createElement(N.default,{dropUp:n,duration:i,open:r===k.datePopups.CALENDAR,className:"rw-calendar-popup"},m.default.createElement(B,d({},l,{ref:"calPopup",id:e,tabIndex:"-1",value:o,autoFocus:!1,onChange:this.handleDateSelect,onNavigate:function(){return s.focus()},currentDate:this.props.currentDate,onCurrentDateChange:this.props.onCurrentDateChange,"aria-hidden":!r,"aria-live":"polite","aria-labelledby":t,ariaActiveDescendantKey:"calendar"})))},renderTimeList:function(e,t){var s=this,a=this.props,r=a.open,o=a.value,i=a.duration,n=a.dropUp,u=a.calendar,c=a.timeFormat,p=a.timeComponent,f=T.default.pickProps(this.props,M.default);return m.default.createElement(N.default,{dropUp:n,duration:i,open:r===k.datePopups.TIME,onOpening:function(){return s.refs.timePopup.forceUpdate()}},m.default.createElement("div",null,m.default.createElement(M.default,d({},f,{ref:"timePopup",id:e,format:c,value:l(o),onMove:this._scrollTo,onSelect:this.handleTimeSelect,preserveDate:!!u,itemComponent:p,"aria-labelledby":t,"aria-live":r&&"polite","aria-hidden":!r,ariaActiveDescendantKey:"timelist"}))))},render:function(){var e=this.props,t=e.className,s=e.calendar,a=e.time,r=e.open,o=e.messages,i=e.disabled,n=e.readOnly,l=e.dropUp,u=this.state.focused,c=(0,H.instanceId)(this,"_input"),p=(0,H.instanceId)(this,"_time_listbox"),f=(0,H.instanceId)(this,"_cal"),h="",y=T.default.omitOwnProps(this,B,M.default),g=r||(0,H.isFirstFocusedRender)(this);return s&&(h+=f),a&&(h+=" "+p),m.default.createElement(x.default,d({},y,{open:!!r,dropUp:l,focused:u,disabled:i,readOnly:n,onBlur:this.handleBlur,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,onKeyPress:this.handleKeyPress,className:(0,v.default)(t,"rw-datetimepicker",s&&a&&"rw-has-both",!s&&!a&&"rw-has-neither")}),this.renderInput(c,h.trim()),this.renderButtons(o),g&&this.renderTimeList(p,c),g&&this.renderCalendar(f,c))},handleChange:function(e,t,s){var a=this.props,r=a.onChange,o=a.value;s&&(e=this.inRangeValue(e)),r&&(null==e||null==o?e!=o&&r(e,t):q.default.eq(e,o)||r(e,t))},handleKeyDown:function(e){var t=this.props,s=t.open,a=t.calendar,r=t.time;(0,H.notify)(this.props.onKeyDown,[e]),e.defaultPrevented||("Escape"===e.key&&s?this.close():e.altKey?(e.preventDefault(),"ArrowDown"===e.key?a&&r?this.open(s===k.datePopups.CALENDAR?k.datePopups.TIME:k.datePopups.CALENDAR):r?this.open(k.datePopups.TIME):a&&this.open(k.datePopups.CALENDAR):"ArrowUp"===e.key&&this.close()):s&&(s===k.datePopups.CALENDAR&&this.refs.calPopup.handleKeyDown(e),s===k.datePopups.TIME&&this.refs.timePopup.handleKeyDown(e)))},handleKeyPress:function(e){(0,H.notify)(this.props.onKeyPress,[e]),e.defaultPrevented||this.props.open===k.datePopups.TIME&&this.refs.timePopup.handleKeyPress(e)},focus:function(){var e=this.refs.valueInput;e&&(0,y.default)()!==_.default.findDOMNode(e)&&e.focus()},handleDateSelect:function(e){var t=o(this.props),s=q.default.merge(e,this.props.value,this.props.currentDate),a=i(e,t,this.props.culture);this.close(),(0,H.notify)(this.props.onSelect,[s,a]),this.handleChange(s,a,!0),this.focus()},handleTimeSelect:function(e){var t=o(this.props),s=q.default.merge(this.props.value,e.date,this.props.currentDate),a=i(e.date,t,this.props.culture);this.close(),(0,H.notify)(this.props.onSelect,[s,a]),this.handleChange(s,a,!0),this.focus()},_click:function(e,t){this.focus(),this.toggle(e,t)},_parse:function(e){var t=o(this.props,!0),s=this.props.editFormat,a=this.props.parse,r=[];return"function"==typeof a?a(e,this.props.culture):("string"==typeof t&&r.push(t),"string"==typeof s&&r.push(s),a&&(r=r.concat(this.props.parse)),(0,f.default)(r.length,"React Widgets: there are no specified `parse` formats provided and the `format` prop is a function. the DateTimePicker is unable to parse `%s` into a dateTime, please provide either a parse function or Globalize.js compatible string for `format`",e),n(r,this.props.culture,e))},toggle:function(e){this.props.open?this.props.open!==e?this.open(e):this.close(e):this.open(e)},open:function(e){this.props.open!==e&&this.props[e]===!0&&(0,H.notify)(this.props.onToggle,e)},close:function(){this.props.open&&(0,H.notify)(this.props.onToggle,!1)},inRangeValue:function(e){return null==e?e:q.default.max(q.default.min(e,this.props.max),this.props.min)}},r(u,"handleChange",[V.widgetEditable],Object.getOwnPropertyDescriptor(u,"handleChange"),u),r(u,"handleKeyDown",[V.widgetEditable],Object.getOwnPropertyDescriptor(u,"handleKeyDown"),u),r(u,"handleKeyPress",[V.widgetEditable],Object.getOwnPropertyDescriptor(u,"handleKeyPress"),u),r(u,"handleDateSelect",[V.widgetEditable],Object.getOwnPropertyDescriptor(u,"handleDateSelect"),u),r(u,"handleTimeSelect",[V.widgetEditable],Object.getOwnPropertyDescriptor(u,"handleTimeSelect"),u),r(u,"_click",[V.widgetEditable],Object.getOwnPropertyDescriptor(u,"_click"),u),u));s.default=(0,Y.default)(Q,{open:"onToggle",value:"onChange",currentDate:"onCurrentDateChange"},["focus"]),t.exports=s.default},{"./Button":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/Button.js","./Calendar":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/Calendar.js","./DateTimePickerInput":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/DateTimePickerInput.js","./Popup":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/Popup.js","./TimeList":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/TimeList.js","./Widget":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/Widget.js","./mixins/AriaDescendantMixin":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/mixins/AriaDescendantMixin.js",
"./mixins/FocusMixin":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/mixins/FocusMixin.js","./mixins/PopupScrollToMixin":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/mixins/PopupScrollToMixin.js","./mixins/PureRenderMixin":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/mixins/PureRenderMixin.js","./mixins/RtlParentContextMixin":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/mixins/RtlParentContextMixin.js","./mixins/TimeoutMixin":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/mixins/TimeoutMixin.js","./util/_":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/_.js","./util/compat":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/compat.js","./util/constants":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/constants.js","./util/dates":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/dates.js","./util/interaction":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/interaction.js","./util/localizers":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/localizers.js","./util/propTypes":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/propTypes.js","./util/widgetHelpers":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/widgetHelpers.js",classnames:"classnames","dom-helpers/activeElement":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/activeElement.js",invariant:"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/invariant/browser.js",react:"react",uncontrollable:"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/uncontrollable/index.js"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/DateTimePickerInput.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){return!isNaN(e.getTime())}function o(e,t,s){var a="";return e instanceof Date&&r(e)&&(a=h.date.format(e,t,s)),a}s.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},n=e("react"),l=a(n),u=e("./util/_"),d=a(u),c=e("./Input"),m=a(c),p=e("./util/compat"),f=a(p),h=e("./util/localizers"),y=e("./util/propTypes"),g=a(y);s.default=l.default.createClass({displayName:"DateTimePickerInput",propTypes:{format:g.default.dateFormat.isRequired,editing:l.default.PropTypes.bool,editFormat:g.default.dateFormat,parse:l.default.PropTypes.func.isRequired,value:l.default.PropTypes.instanceOf(Date),onChange:l.default.PropTypes.func.isRequired,culture:l.default.PropTypes.string},componentWillReceiveProps:function(e){var t=e.value,s=e.editing,a=e.editFormat,r=e.format,i=e.culture;this.setState({textValue:o(t,s&&a?a:r,i)})},getInitialState:function(){var e=this.props,t=e.value,s=e.editing,a=e.editFormat,r=e.format,i=e.culture;return{textValue:o(t,s&&a?a:r,i)}},render:function(){var e=this.props,t=e.disabled,s=e.readOnly,a=this.state.textValue,r=d.default.omitOwnProps(this);return l.default.createElement(m.default,i({},r,{type:"text",value:a,disabled:t,readOnly:s,onChange:this.handleChange,onBlur:this.handleBlur}))},handleChange:function(e){var t=e.target.value;this._needsFlush=!0,this.setState({textValue:t})},handleBlur:function(e){var t=this.props,s=t.format,a=t.culture,r=t.parse,i=t.onChange,n=t.onBlur;if(n&&n(e),this._needsFlush){var l=r(e.target.value);this._needsFlush=!1,i(l,o(l,s,a))}},focus:function(){f.default.findDOMNode(this).focus()}}),t.exports=s.default},{"./Input":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/Input.js","./util/_":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/_.js","./util/compat":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/compat.js","./util/localizers":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/localizers.js","./util/propTypes":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/propTypes.js",react:"react"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/Decade.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=[1,2,3,4,5,6,7,8,9,10,11,12],s=d.default.add(d.default.startOf(e,"decade"),-2,"year");return t.map(function(){return s=d.default.add(s,1,"year")})}s.__esModule=!0;var o=e("react"),i=a(o),n=e("./CalendarView"),l=a(n),u=e("./util/dates"),d=a(u),c=e("./util/localizers"),m=e("./util/_"),p=a(m),f=e("./util/propTypes"),h=a(f),y=e("./util/widgetHelpers"),g={culture:i.default.PropTypes.string,today:i.default.PropTypes.instanceOf(Date),value:i.default.PropTypes.instanceOf(Date),focused:i.default.PropTypes.instanceOf(Date),min:i.default.PropTypes.instanceOf(Date),max:i.default.PropTypes.instanceOf(Date),onChange:i.default.PropTypes.func.isRequired,yearFormat:h.default.dateFormat},v=function(e,t){return e+"__decade_"+d.default.year(t)};s.default=i.default.createClass({displayName:"DecadeView",mixins:[e("./mixins/PureRenderMixin"),e("./mixins/RtlChildContextMixin"),e("./mixins/AriaDescendantMixin")()],propTypes:g,componentDidUpdate:function(){var e=v((0,y.instanceId)(this),this.props.focused);this.ariaActiveDescendant(e)},render:function(){var e=this.props.focused;return i.default.createElement(l.default,p.default.omitOwnProps(this),i.default.createElement("tbody",null,p.default.chunk(r(e),4).map(this.renderRow)))},renderRow:function(e,t){var s=this.props,a=s.focused,r=s.disabled,o=s.onChange,n=s.yearFormat,u=s.value,d=s.today,m=s.culture,p=s.min,f=s.max,h=(0,y.instanceId)(this);return i.default.createElement(l.default.Row,{key:t},e.map(function(e,t){var s=c.date.format(e,c.date.getFormat("year",n),m);return i.default.createElement(l.default.Cell,{key:t,unit:"year",id:v(h,e),label:s,date:e,now:d,min:p,max:f,onChange:o,focused:a,selected:u,disabled:r},s)}))}}),t.exports=s.default},{"./CalendarView":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/CalendarView.js","./mixins/AriaDescendantMixin":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/mixins/AriaDescendantMixin.js","./mixins/PureRenderMixin":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/mixins/PureRenderMixin.js","./mixins/RtlChildContextMixin":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/mixins/RtlChildContextMixin.js","./util/_":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/_.js","./util/dates":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/dates.js","./util/localizers":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/localizers.js","./util/propTypes":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/propTypes.js","./util/widgetHelpers":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/widgetHelpers.js",react:"react"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/Footer.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var r=e("react"),o=a(r),i=e("./Button"),n=a(i),l=e("./util/localizers"),u=function(e){return l.date.getFormat("footer",e.format)};t.exports=o.default.createClass({displayName:"Footer",render:function(){var e=this.props,t=e.disabled,s=e.readOnly,a=e.value;return o.default.createElement("div",{className:"rw-footer"},o.default.createElement(n.default,{disabled:!(!t&&!s),onClick:this.props.onClick.bind(null,a)},l.date.format(a,u(this.props),this.props.culture)))}})},{"./Button":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/Button.js","./util/localizers":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/localizers.js",react:"react"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/Header.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}s.__esModule=!0;var r=e("react"),o=a(r),i=e("./Button"),n=a(i);s.default=o.default.createClass({displayName:"Header",propTypes:{label:o.default.PropTypes.string.isRequired,labelId:o.default.PropTypes.string,upDisabled:o.default.PropTypes.bool.isRequired,prevDisabled:o.default.PropTypes.bool.isRequired,nextDisabled:o.default.PropTypes.bool.isRequired,onViewChange:o.default.PropTypes.func.isRequired,onMoveLeft:o.default.PropTypes.func.isRequired,onMoveRight:o.default.PropTypes.func.isRequired,messages:o.default.PropTypes.shape({moveBack:o.default.PropTypes.string,moveForward:o.default.PropTypes.string})},mixins:[e("./mixins/PureRenderMixin"),e("./mixins/RtlChildContextMixin")],getDefaultProps:function(){return{messages:{moveBack:"navigate back",moveForward:"navigate forward"}}},render:function(){var e=this.props,t=e.messages,s=e.label,a=e.labelId,r=e.onMoveRight,i=e.onMoveLeft,l=e.onViewChange,u=e.prevDisabled,d=e.upDisabled,c=e.nextDisabled,m=this.isRtl();return o.default.createElement("div",{className:"rw-header"},o.default.createElement(n.default,{className:"rw-btn-left",onClick:i,disabled:u,label:t.moveBack,icon:"caret-"+(m?"right":"left")}),o.default.createElement(n.default,{id:a,onClick:l,className:"rw-btn-view",disabled:d,"aria-live":"polite","aria-atomic":"true"},s),o.default.createElement(n.default,{className:"rw-btn-right",onClick:r,disabled:c,label:t.moveForward,icon:"caret-"+(m?"left":"right")}))}}),t.exports=s.default},{"./Button":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/Button.js","./mixins/PureRenderMixin":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/mixins/PureRenderMixin.js","./mixins/RtlChildContextMixin":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/mixins/RtlChildContextMixin.js",react:"react"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/Input.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var s={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(s[a]=e[a]);return s}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}s.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},u=e("react"),d=a(u),c=e("classnames"),m=a(c),p=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return n(t,e),t.prototype.render=function(){var e=this.props,t=e.className,s=e.disabled,a=e.readOnly,o=e.value,i=e.tabIndex,n=e.component,u=void 0===n?"input":n,c=r(e,["className","disabled","readOnly","value","tabIndex","component"]);return d.default.createElement(u,l({},c,{type:"text",tabIndex:i||0,autoComplete:"off",disabled:s,readOnly:a,"aria-disabled":s,"aria-readonly":a,value:null==o?"":o,className:(0,m.default)(t,"rw-input")}))},t}(d.default.Component);s.default=p,t.exports=s.default},{classnames:"classnames",react:"react"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/List.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}s.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},o=e("react"),i=a(o),n=e("./ListOption"),l=a(n),u=e("./util/propTypes"),d=a(u),c=e("./util/compat"),m=a(c),p=e("classnames"),f=a(p),h=e("./util/_"),y=a(h),g=e("./util/dataHelpers"),v=e("./util/widgetHelpers"),b=e("./util/interaction"),_=function(e,t){return e+"__option__"+t};s.default=i.default.createClass({displayName:"List",mixins:[e("./mixins/ListMovementMixin"),e("./mixins/AriaDescendantMixin")()],propTypes:{data:i.default.PropTypes.array,onSelect:i.default.PropTypes.func,onMove:i.default.PropTypes.func,optionComponent:d.default.elementType,itemComponent:d.default.elementType,selected:i.default.PropTypes.any,focused:i.default.PropTypes.any,valueField:d.default.accessor,textField:d.default.accessor,disabled:d.default.disabled.acceptsArray,readOnly:d.default.readOnly.acceptsArray,messages:i.default.PropTypes.shape({emptyList:d.default.message})},getDefaultProps:function(){return{onSelect:function(){},optionComponent:l.default,ariaActiveDescendantKey:"list",data:[],messages:{emptyList:"There are no items in this list"}}},componentDidMount:function(){this.move()},componentDidUpdate:function(){var e=this.props,t=e.data,s=e.focused,a=t.indexOf(s),r=_((0,v.instanceId)(this),a);this.ariaActiveDescendant(a!==-1?r:null),this.move()},render:function(){var e=this,t=this.props,s=t.className,a=t.role,o=t.data,n=t.textField,l=t.valueField,u=t.focused,d=t.selected,c=t.messages,m=t.onSelect,p=t.itemComponent,h=t.optionComponent,E=(0,v.instanceId)(this),T=void 0,w=y.default.omitOwnProps(this);return T=o.length?o.map(function(t,s){var a=_(E,s),r=(0,b.isDisabledItem)(t,e.props),o=(0,b.isReadOnlyItem)(t,e.props);return i.default.createElement(h,{key:"item_"+s,id:a,dataItem:t,disabled:r,readOnly:o,focused:u===t,selected:d===t,onClick:r||o?void 0:m.bind(null,t)},p?i.default.createElement(p,{item:t,value:(0,g.dataValue)(t,l),text:(0,g.dataText)(t,n),disabled:r,readOnly:o}):(0,g.dataText)(t,n))}):i.default.createElement("li",{className:"rw-list-empty"},y.default.result(c.emptyList,this.props)),i.default.createElement("ul",r({id:E,tabIndex:"-1",className:(0,f.default)(s,"rw-list"),role:void 0===a?"listbox":a},w),T)},_data:function(){return this.props.data},move:function(){var e=m.default.findDOMNode(this),t=this._data().indexOf(this.props.focused),s=e.children[t];s&&(0,v.notify)(this.props.onMove,[s,e,this.props.focused])}}),t.exports=s.default},{"./ListOption":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/ListOption.js","./mixins/AriaDescendantMixin":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/mixins/AriaDescendantMixin.js","./mixins/ListMovementMixin":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/mixins/ListMovementMixin.js","./util/_":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/_.js","./util/compat":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/compat.js","./util/dataHelpers":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/dataHelpers.js","./util/interaction":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/interaction.js","./util/propTypes":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/propTypes.js","./util/widgetHelpers":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/widgetHelpers.js",classnames:"classnames",react:"react"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/ListOption.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}s.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},o=e("react"),i=a(o),n=e("classnames"),l=a(n),u=e("./util/_"),d=a(u),c=i.default.createClass({displayName:"ListOption",propTypes:{dataItem:i.default.PropTypes.any,focused:i.default.PropTypes.bool,selected:i.default.PropTypes.bool,disabled:i.default.PropTypes.bool,readOnly:i.default.PropTypes.bool},render:function(){var e=this.props,t=e.className,s=e.children,a=e.focused,o=e.selected,n=e.disabled,u=e.readOnly,c=d.default.omitOwnProps(this),m={"rw-state-focus":a,"rw-state-selected":o,"rw-state-disabled":n,"rw-state-readonly":u};return i.default.createElement("li",r({role:"option",tabIndex:n||u?void 0:"-1","aria-selected":!!o,className:(0,l.default)("rw-list-option",t,m)},c),s)}});s.default=c,t.exports=s.default},{"./util/_":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/_.js",classnames:"classnames",react:"react"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/Month.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}s.__esModule=!0;var r=e("react"),o=a(r),i=e("./CalendarView"),n=a(i),l=e("./util/dates"),u=a(l),d=e("./util/localizers"),c=e("./util/propTypes"),m=a(c),p=e("./util/_"),f=a(p),h=e("./util/widgetHelpers"),y=function(e){return d.date.getFormat("weekday",e.dayFormat)},g=function(e){return d.date.getFormat("dayOfMonth",e.dateFormat)},v=function(e,t){return e+"__month_"+u.default.month(t)+"-"+u.default.date(t)},b={culture:o.default.PropTypes.string,today:o.default.PropTypes.instanceOf(Date),value:o.default.PropTypes.instanceOf(Date),focused:o.default.PropTypes.instanceOf(Date),min:o.default.PropTypes.instanceOf(Date),max:o.default.PropTypes.instanceOf(Date),onChange:o.default.PropTypes.func.isRequired,dayComponent:m.default.elementType,dayFormat:m.default.dateFormat,dateFormat:m.default.dateFormat},_=function(e,t){return u.default.eq(e,t,"day")},E=o.default.createClass({displayName:"MonthView",statics:{isEqual:_},mixins:[e("./mixins/RtlChildContextMixin"),e("./mixins/AriaDescendantMixin")()],propTypes:b,componentDidUpdate:function(){var e=v((0,h.instanceId)(this),this.props.focused);this.ariaActiveDescendant(e,null)},render:function(){var e=this.props,t=e.focused,s=e.culture,a=u.default.visibleDays(t,s),r=f.default.chunk(a,7);return o.default.createElement(n.default,f.default.omitOwnProps(this),o.default.createElement("thead",null,o.default.createElement("tr",null,this.renderHeaders(r[0],y(this.props),s))),o.default.createElement("tbody",null,r.map(this.renderRow)))},renderRow:function(e,t){var s=this,a=this.props,r=a.focused,i=a.today,l=a.disabled,u=a.onChange,c=a.value,m=a.culture,p=a.min,f=a.max,y=a.dayComponent,b=(0,h.instanceId)(this),_=d.date.getFormat("footer");return o.default.createElement(n.default.Row,{key:t},e.map(function(e,t){var a=d.date.format(e,g(s.props),m),h=d.date.format(e,_,m);return o.default.createElement(n.default.Cell,{key:t,id:v(b,e),label:h,date:e,now:i,min:p,max:f,unit:"day",viewUnit:"month",onChange:u,focused:r,selected:c,disabled:l},y?o.default.createElement(y,{date:e,label:a}):a)}))},renderHeaders:function(e,t,s){return e.map(function(e){return o.default.createElement("th",{key:"header_"+u.default.weekday(e,void 0,d.date.startOfWeek(s))},d.date.format(e,t,s))})}});s.default=E,t.exports=s.default},{"./CalendarView":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/CalendarView.js","./mixins/AriaDescendantMixin":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/mixins/AriaDescendantMixin.js","./mixins/RtlChildContextMixin":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/mixins/RtlChildContextMixin.js","./util/_":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/_.js","./util/dates":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/dates.js","./util/localizers":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/localizers.js","./util/propTypes":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/propTypes.js","./util/widgetHelpers":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/widgetHelpers.js",react:"react"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/Popup.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var s,a,r=v.default.animate.TRANSLATION_MAP;return r&&r[e]?(s={},s[w]=r[e]+"("+t+")",s):(a={},a[e]=t,a)}function o(e){var t=u.default.Children.map(e,function(e){return e});for(var s in t)return s}s.__esModule=!0;var i,n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},l=e("react"),u=a(l),d=e("./util/_"),c=(a(d),e("dom-helpers/style")),m=a(c),p=e("dom-helpers/query/height"),f=a(p),h=e("dom-helpers/util/camelizeStyle"),y=a(h),g=e("./util/configuration"),v=a(g),b=e("classnames"),_=a(b),E=e("./util/compat"),T=a(E),w=(0,y.default)(v.default.animate.transform),q=0,S=1,k=2,P=3,x=(i={},i[S]="hidden",i[q]="hidden",i[k]="hidden",i),j={open:u.default.PropTypes.bool,dropUp:u.default.PropTypes.bool,duration:u.default.PropTypes.number,onClosing:u.default.PropTypes.func,onOpening:u.default.PropTypes.func,onClose:u.default.PropTypes.func,onOpen:u.default.PropTypes.func};s.default=u.default.createClass({displayName:"Popup",propTypes:j,getInitialState:function(){return{initialRender:!0,status:this.props.open?k:S}},getDefaultProps:function(){return{duration:200,open:!1,onClosing:function(){},onOpening:function(){},onClose:function(){},onOpen:function(){}}},componentWillReceiveProps:function(e){this.setState({contentChanged:o(e.children)!==o(this.props.children)})},componentDidMount:function(){var e=this,t=this.state.status===k;T.default.batchedUpdates(function(){e.setState({initialRender:!1}),t&&e.open()})},componentDidUpdate:function(e){var t=e.open&&!this.props.open,s=!e.open&&this.props.open,a=this.props.open,r=this.state.status;if(!!e.dropUp!=!!this.props.dropUp)return this.cancelNextCallback(),r===k&&this.open(),void(r===q&&this.close());if(s)this.open();else if(t)this.close();else if(a){var o=this.height(),i=Math.abs(o-this.state.height);(isNaN(i)||i>.1)&&this.setState({height:o})}},render:function(){var e=this.props,t=e.className,s=e.dropUp,a=e.style,r=this.state,o=r.status,i=r.height,l=x[o]||"visible",d=o===S?"none":"block";return u.default.createElement("div",{style:n({display:d,overflow:l,height:i},a),className:(0,_.default)(t,"rw-popup-container",s&&"rw-dropup",this.isTransitioning()&&"rw-popup-animating")},this.renderChildren())},renderChildren:function(){if(!this.props.children)return u.default.createElement("span",{className:"rw-popup rw-widget"});var e=this.getOffsetForStatus(this.state.status),t=u.default.Children.only(this.props.children);return(0,l.cloneElement)(t,{style:n({},t.props.style,e,{position:this.isTransitioning()?"absolute":void 0}),className:(0,_.default)(t.props.className,"rw-popup rw-widget")})},open:function(){var e=this;this.cancelNextCallback();var t=T.default.findDOMNode(this).firstChild,s=this.height();this.props.onOpening(),this.safeSetState({status:k,height:s},function(){var s=e.getOffsetForStatus(P),a=e.props.duration;e.animate(t,s,a,"ease",function(){e.safeSetState({status:P},function(){e.props.onOpen()})})})},close:function(){var e=this;this.cancelNextCallback();var t=T.default.findDOMNode(this).firstChild,s=this.height();this.props.onClosing(),this.safeSetState({status:q,height:s},function(){var s=e.getOffsetForStatus(S),a=e.props.duration;e.animate(t,s,a,"ease",function(){return e.safeSetState({status:S},function(){e.props.onClose()})})})},getOffsetForStatus:function(e){var t;if(this.state.initialRender)return{};var s=r("top",this.props.dropUp?"100%":"-100%"),a=r("top",0);return(t={},t[S]=s,t[q]=a,t[k]=s,t[P]=a,t)[e]||{}},height:function e(){var t=T.default.findDOMNode(this),s=t.firstChild,a=parseInt((0,m.default)(s,"margin-top"),10)+parseInt((0,m.default)(s,"margin-bottom"),10),r=t.style.display,e=void 0;return t.style.display="block",e=((0,f.default)(s)||0)+(isNaN(a)?0:a),t.style.display=r,e},isTransitioning:function(){return this.state.status===k||this.state.status===S},animate:function(e,t,s,a,r){this._transition=v.default.animate(e,t,s,a,this.setNextCallback(r))},cancelNextCallback:function(){this._transition&&this._transition.cancel&&(this._transition.cancel(),this._transition=null),this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},safeSetState:function(e,t){this.setState(e,this.setNextCallback(t))},setNextCallback:function(e){var t=this,s=!0;return this.nextCallback=function(a){s&&(s=!1,t.nextCallback=null,e(a))},this.nextCallback.cancel=function(){return s=!1},this.nextCallback}}),t.exports=s.default},{"./util/_":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/_.js","./util/compat":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/compat.js","./util/configuration":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/configuration.js",classnames:"classnames","dom-helpers/query/height":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/query/height.js","dom-helpers/style":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/style/index.js","dom-helpers/util/camelizeStyle":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/util/camelizeStyle.js",react:"react"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/ReplaceTransitionGroup.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){return n.default.Children.only(e)}function o(e){return e&&e.key}s.__esModule=!0;var i=e("react"),n=a(i),l=e("dom-helpers/style"),u=a(l),d=e("dom-helpers/query/height"),c=a(d),m=e("dom-helpers/query/width"),p=a(m),f=e("./util/compat"),h=a(f),y=e("./util/_"),g=a(y);s.default=n.default.createClass({displayName:"ReplaceTransitionGroup",propTypes:{component:n.default.PropTypes.oneOfType([n.default.PropTypes.element,n.default.PropTypes.string]),childFactory:n.default.PropTypes.func,onAnimating:n.default.PropTypes.func,onAnimate:n.default.PropTypes.func},getDefaultProps:function(){return{component:"span",childFactory:function(e){return e},onAnimating:g.default.noop,onAnimate:g.default.noop}},getInitialState:function(){return{children:g.default.splat(this.props.children)}},componentWillReceiveProps:function(e){var t=r(e.children),s=this.state.children.slice(),a=s[1],i=s[0],n=i&&o(i)===o(t),l=a&&o(a)===o(t);i?!i||a||n?i&&a&&!n&&!l?(s.shift(),s.push(t),this.leaving=a,this.entering=t):n?s.splice(0,1,t):l&&s.splice(1,1,t):(s.push(t),this.leaving=i,this.entering=t):(s.push(t),this.entering=t),this.state.children[0]===s[0]&&this.state.children[1]===s[1]||this.setState({children:s})},componentWillMount:function(){this.animatingKeys={},this.leaving=null,this.entering=null},componentDidUpdate:function(){var e=this.entering,t=this.leaving,s=this.refs[o(e)||o(t)],a=h.default.findDOMNode(this),r=s&&h.default.findDOMNode(s);r&&(0,u.default)(a,{overflow:"hidden",height:(0,c.default)(r)+"px",width:(0,p.default)(r)+"px"}),this.props.onAnimating(),this.entering=null,this.leaving=null,e&&this.performEnter(o(e)),t&&this.performLeave(o(t))},performEnter:function(e){var t=this.refs[e];t&&(this.animatingKeys[e]=!0,t.componentWillEnter?t.componentWillEnter(this._handleDoneEntering.bind(this,e)):this._handleDoneEntering(e))},_tryFinish:function(){this.isTransitioning()||(this.isMounted()&&(0,u.default)(h.default.findDOMNode(this),{overflow:"visible",height:"",width:""}),this.props.onAnimate())},_handleDoneEntering:function(e){var t=this.refs[e];t&&t.componentDidEnter&&t.componentDidEnter(),delete this.animatingKeys[e],o(this.props.children)!==e&&this.performLeave(e),this._tryFinish()},performLeave:function(e){var t=this.refs[e];t&&(this.animatingKeys[e]=!0,t.componentWillLeave?t.componentWillLeave(this._handleDoneLeaving.bind(this,e)):this._handleDoneLeaving(e))},_handleDoneLeaving:function(e){var t=this.refs[e];t&&t.componentDidLeave&&t.componentDidLeave(),delete this.animatingKeys[e],o(this.props.children)===e?this.performEnter(e):this.isMounted()&&this.setState({children:this.state.children.filter(function(t){return o(t)!==e})}),this._tryFinish()},isTransitioning:function(){return!!Object.keys(this.animatingKeys).length},render:function(){var e=this,t=this.props.component;return n.default.createElement(t,g.default.omitOwnProps(this),this.state.children.map(function(t){return e.props.childFactory(t,o(t))}))}}),t.exports=s.default},{"./util/_":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/_.js","./util/compat":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/compat.js","dom-helpers/query/height":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/query/height.js","dom-helpers/query/width":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/query/width.js","dom-helpers/style":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/style/index.js",react:"react"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/SlideTransition.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},o=e("react"),i=a(o),n=e("./ReplaceTransitionGroup"),l=a(n),u=e("./util/compat"),d=a(u),c=e("dom-helpers/style"),m=a(c),p=e("dom-helpers/query/width"),f=a(p),h=e("./util/configuration"),y=a(h),g=e("./util/_"),v=a(g),b=i.default.createClass({displayName:"SlideChildGroup",propTypes:{direction:i.default.PropTypes.oneOf(["left","right"]),duration:i.default.PropTypes.number},componentWillEnter:function(e){var t=this,s=d.default.findDOMNode(this),a=(0,f.default)(s),r=this.props.direction;a="left"===r?a:-a,this.ORGINAL_POSITION=s.style.position,(0,m.default)(s,{position:"absolute",left:a+"px",top:0}),y.default.animate(s,{left:0},this.props.duration,function(){(0,m.default)(s,{position:t.ORGINAL_POSITION,overflow:"hidden"}),t.ORGINAL_POSITION=null,e&&e()})},componentWillLeave:function(e){var t=this,s=d.default.findDOMNode(this),a=(0,f.default)(s),r=this.props.direction;a="left"===r?-a:a,this.ORGINAL_POSITION=s.style.position,(0,m.default)(s,{position:"absolute",top:0,left:0}),y.default.animate(s,{left:a+"px"},this.props.duration,function(){(0,m.default)(s,{position:t.ORGINAL_POSITION,overflow:"hidden"}),t.ORGINAL_POSITION=null,e&&e()})},render:function(){return i.default.Children.only(this.props.children)}});t.exports=i.default.createClass({displayName:"exports",propTypes:{direction:i.default.PropTypes.oneOf(["left","right"]),duration:i.default.PropTypes.number},getDefaultProps:function(){return{direction:"left",duration:250}},_wrapChild:function(e,t){return i.default.createElement(b,{key:e.key,ref:t,direction:this.props.direction,duration:this.props.duration},e)},render:function(){var e=this.props,t=e.style,s=e.children;return t=r({},t,{position:"relative",overflow:"hidden"}),i.default.createElement(l.default,r({},v.default.omitOwnProps(this),{ref:"container",component:"div",childFactory:this._wrapChild,style:t}),s)}})},{"./ReplaceTransitionGroup":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/ReplaceTransitionGroup.js","./util/_":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/_.js","./util/compat":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/compat.js",
"./util/configuration":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/configuration.js","dom-helpers/query/width":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/query/width.js","dom-helpers/style":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/style/index.js",react:"react"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/TimeList.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}s.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},o=e("react"),i=a(o),n=e("./util/dates"),l=a(n),u=e("./List"),d=a(u),c=e("./util/localizers"),m=e("./util/propTypes"),p=a(m),f=e("./util/_"),h=a(f),y=function(e){return c.date.getFormat("time",e.format)};s.default=i.default.createClass({displayName:"TimeList",propTypes:{value:i.default.PropTypes.instanceOf(Date),step:i.default.PropTypes.number,min:i.default.PropTypes.instanceOf(Date),max:i.default.PropTypes.instanceOf(Date),currentDate:i.default.PropTypes.instanceOf(Date),itemComponent:p.default.elementType,format:p.default.dateFormat,onSelect:i.default.PropTypes.func,preserveDate:i.default.PropTypes.bool,culture:i.default.PropTypes.string,delay:i.default.PropTypes.number},mixins:[e("./mixins/TimeoutMixin")],getDefaultProps:function(){return{step:30,onSelect:function(){},min:new Date(1900,0,1),max:new Date(2099,11,31),preserveDate:!0,delay:300,ariaActiveDescendantKey:"timelist"}},getInitialState:function(){var e=this._dates(this.props),t=this._closestDate(e,this.props.value||this.props.currentDate);return{focusedItem:t||e[0],dates:e}},componentWillReceiveProps:function(e){var t=this._dates(e),s=this._closestDate(t,e.value||this.props.currentDate),a=!l.default.eq(e.value,this.props.value,"minutes"),r=!l.default.eq(e.min,this.props.min,"minutes"),o=!l.default.eq(e.max,this.props.max,"minutes"),i=this.props.format!==e.format||this.props.culture!==e.culture;(a||r||o||i)&&this.setState({focusedItem:s||t[0],dates:t})},render:function(){var e=this.props,t=e.value,s=e.onSelect,a=this.state.dates,o=this._closestDate(a,t);return i.default.createElement(d.default,r({},h.default.omitOwnProps(this),{ref:"list",data:a,textField:"label",valueField:"date",selected:o,onSelect:s,focused:this.state.focusedItem}))},_closestDate:function(e,t){var s,a=6e4*this.props.step,r=null;return t?(t=new Date(Math.floor(t.getTime()/a)*a),s=c.date.format(t,y(this.props),this.props.culture),e.some(function(e){if(e.label===s)return r=e}),r):null},_data:function(){return this.state.dates},_dates:function(e){for(var t=[],s=0,a=this._dateValues(e),r=a.min,o=l.default.date(r);l.default.date(r)===o&&l.default.lte(r,a.max);)s++,t.push({date:r,label:c.date.format(r,y(e),e.culture)}),r=l.default.add(r,e.step||30,"minutes");return t},_dateValues:function(e){var t,s,a=e.value||e.currentDate||l.default.today(),r=e.preserveDate,o=e.min,i=e.max;return r?(t=l.default.today(),s=l.default.tomorrow(),{min:l.default.eq(a,o,"day")?l.default.merge(t,o,e.currentDate):t,max:l.default.eq(a,i,"day")?l.default.merge(t,i,e.currentDate):s}):(t=l.default.startOf(l.default.merge(new Date,o,e.currentDate),"minutes"),s=l.default.startOf(l.default.merge(new Date,i,e.currentDate),"minutes"),l.default.lte(s,t)&&l.default.gt(i,o,"day")&&(s=l.default.tomorrow()),{min:t,max:s})},handleKeyDown:function(e){var t=e.key,s=this.state.focusedItem,a=this.refs.list;"End"===t?(e.preventDefault(),this.setState({focusedItem:a.last()})):"Home"===t?(e.preventDefault(),this.setState({focusedItem:a.first()})):"Enter"===t?this.props.onSelect(s):"ArrowDown"===t?(e.preventDefault(),this.setState({focusedItem:a.next(s)})):"ArrowUp"===t&&(e.preventDefault(),this.setState({focusedItem:a.prev(s)}))},handleKeyPress:function(e){var t=this;e.preventDefault(),this.search(String.fromCharCode(e.which),function(e){t.isMounted()&&t.setState({focusedItem:e})})},scrollTo:function(){this.refs.list.move&&this.refs.list.move()},search:function(e,t){var s=this,a=((this._searchTerm||"")+e).toLowerCase();this._searchTerm=a,this.setTimeout("search",function(){var e=s.refs.list,r=e.next(s.state.focusedItem,a);s._searchTerm="",r&&t(r)},this.props.delay)}}),t.exports=s.default},{"./List":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/List.js","./mixins/TimeoutMixin":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/mixins/TimeoutMixin.js","./util/_":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/_.js","./util/dates":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/dates.js","./util/localizers":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/localizers.js","./util/propTypes":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/propTypes.js",react:"react"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/Widget.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var s={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(s[a]=e[a]);return s}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}s.__esModule=!0;var l,u,d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},c=e("react"),m=a(c),p=e("classnames"),f=a(p),h=(u=l=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return n(t,e),t.prototype.render=function(){var e=this.props,t=e.className,s=e.tabIndex,a=e.open,o=e.dropUp,i=e.disabled,n=e.readOnly,l=e.focused,u=r(e,["className","tabIndex","open","dropUp","disabled","readOnly","focused"]),c=!!this.context.isRtl,p="rw-open"+(o?"-up":"");return s=null!=s?s:"-1",m.default.createElement("div",d({},u,{tabIndex:s,className:(0,f.default)(t,"rw-widget",c&&"rw-rtl",a&&p,l&&"rw-state-focus",i&&"rw-state-disabled",n&&"rw-state-readonly")}))},t}(m.default.Component),l.propTypes={tabIndex:c.PropTypes.node,focused:c.PropTypes.bool,disabled:c.PropTypes.bool,readOnly:c.PropTypes.bool,open:c.PropTypes.bool,dropUp:c.PropTypes.bool},l.contextTypes={isRtl:c.PropTypes.bool},u);s.default=h,t.exports=s.default},{classnames:"classnames",react:"react"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/Year.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}s.__esModule=!0;var r=e("react"),o=a(r),i=e("./CalendarView"),n=a(i),l=e("./util/dates"),u=a(l),d=e("./util/localizers"),c=e("./util/_"),m=a(c),p=e("./util/propTypes"),f=a(p),h=e("./util/widgetHelpers"),y=function(e){return d.date.getFormat("month",e.monthFormat)},g={culture:o.default.PropTypes.string,today:o.default.PropTypes.instanceOf(Date),value:o.default.PropTypes.instanceOf(Date),focused:o.default.PropTypes.instanceOf(Date),min:o.default.PropTypes.instanceOf(Date),max:o.default.PropTypes.instanceOf(Date),onChange:o.default.PropTypes.func.isRequired,monthFormat:f.default.dateFormat},v=function(e,t){return e+"__year_"+u.default.year(t)+"-"+u.default.month(t)},b=o.default.createClass({displayName:"YearView",mixins:[e("./mixins/RtlChildContextMixin"),e("./mixins/AriaDescendantMixin")()],propTypes:g,componentDidUpdate:function(){var e=v((0,h.instanceId)(this),this.props.focused);this.ariaActiveDescendant(e)},render:function(){var e=this.props.focused,t=u.default.monthsInYear(u.default.year(e));return o.default.createElement(n.default,m.default.omitOwnProps(this),o.default.createElement("tbody",null,m.default.chunk(t,4).map(this.renderRow)))},renderRow:function(e,t){var s=this,a=this.props,r=a.focused,i=a.disabled,l=a.onChange,u=a.value,c=a.today,m=a.culture,p=a.min,f=a.max,g=(0,h.instanceId)(this),b=d.date.getFormat("header");return o.default.createElement(n.default.Row,{key:t},e.map(function(e,t){var a=d.date.format(e,b,m);return o.default.createElement(n.default.Cell,{key:t,id:v(g,e),label:a,date:e,now:c,min:p,max:f,unit:"month",onChange:l,focused:r,selected:u,disabled:i},d.date.format(e,y(s.props),m))}))}});s.default=b,t.exports=s.default},{"./CalendarView":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/CalendarView.js","./mixins/AriaDescendantMixin":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/mixins/AriaDescendantMixin.js","./mixins/RtlChildContextMixin":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/mixins/RtlChildContextMixin.js","./util/_":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/_.js","./util/dates":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/dates.js","./util/localizers":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/localizers.js","./util/propTypes":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/propTypes.js","./util/widgetHelpers":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/widgetHelpers.js",react:"react"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/configure.js":[function(e,t,s){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}s.__esModule=!0;var o=e("./util/configuration"),i=r(o),n=e("./util/localizers"),l=a(n);s.default={setAnimate:function(e){i.default.animate=e},setLocalizers:function(e){var t=e.date,s=e.number;t&&this.setDateLocalizer(t),s&&this.setNumberLocalizer(s)},setDateLocalizer:l.setDate,setNumberLocalizer:l.setNumber},t.exports=s.default},{"./util/configuration":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/configuration.js","./util/localizers":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/localizers.js"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/localizers/moment.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}s.__esModule=!0,s.default=function(e){function t(t,s,a){return t?e(s,a)[r](t):e(s,a)}function s(t){return e(t).add(10,"year").add(-1,"millisecond").toDate()}function a(t){return e(t).add(100,"year").add(-1,"millisecond").toDate()}if("function"!=typeof e)throw new TypeError("You must provide a valid moment object");var r="function"==typeof e().locale?"locale":"lang",i=!!e.localeData;if(!i)throw new TypeError("The Moment localizer depends on the `localeData` api, please provide a moment object v2.2.0 or higher");var n={formats:{date:"L",time:"LT",default:"lll",header:"MMMM YYYY",footer:"LL",weekday:"dd",dayOfMonth:"DD",month:"MMM",year:"YYYY",decade:function(e,t,a){return a.format(e,"YYYY",t)+" - "+a.format(s(e),"YYYY",t)},century:function(e,t,s){return s.format(e,"YYYY",t)+" - "+s.format(a(e),"YYYY",t)}},firstOfWeek:function(t){return e.localeData(t).firstDayOfWeek()},parse:function(e,s,a){if(!e)return null;var r=t(a,e,s);return r.isValid()?r.toDate():null},format:function(e,s,a){return t(a,e).format(s)}};return o.default.setDateLocalizer(n),n};var r=e("../configure"),o=a(r);t.exports=s.default},{"../configure":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/configure.js"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/mixins/AriaDescendantMixin.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return t}function o(e,t,s){var a="function"==typeof t?t(s):"string"==typeof t?s.refs[t]:s;a&&(e?u.default.findDOMNode(a).setAttribute("aria-activedescendant",e):u.default.findDOMNode(a).removeAttribute("aria-activedescendant"))}s.__esModule=!0,s.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;return{propTypes:{ariaActiveDescendantKey:n.default.PropTypes.string.isRequired},contextTypes:{activeDescendants:d},childContextTypes:{activeDescendants:d},ariaActiveDescendant:function(s){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.ariaActiveDescendantKey,r=this.context.activeDescendants,i=this.__ariaActiveDescendantId;return void 0===s?i:(s=t.call(this,a,s),void 0===s?s=i:(this.__ariaActiveDescendantId=s,o(s,e,this)),void(r&&r.reconcile(a,s)))},getChildContext:function(){var e=this;return this._context||(this._context={activeDescendants:{reconcile:function(t,s){return e.ariaActiveDescendant(s,t)}}})}}};var i=e("react"),n=a(i),l=e("../util/compat"),u=a(l),d=n.default.PropTypes.shape({reconcile:n.default.PropTypes.func});t.exports=s.default},{"../util/compat":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/compat.js",react:"react"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/mixins/AutoFocusMixin.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}s.__esModule=!0;var r=e("react"),o=a(r),i=e("react-dom");s.default={propTypes:{autoFocus:o.default.PropTypes.bool},componentDidMount:function(){var e=this.props.autoFocus;e&&(this.focus?this.focus():(0,i.findDOMNode)(this).focus())}},t.exports=s.default},{react:"react","react-dom":"react-dom"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/mixins/FocusMixin.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,s,a,r){var o={};return Object.keys(a).forEach(function(e){o[e]=a[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function o(e){function t(e,t,s){var r=e.props[t?"onFocus":"onBlur"];r&&s&&s.persist(),a&&a.call(e,t,s)===!1||e.setTimeout("focus",function(){u.default.batchedUpdates(function(){o&&o.call(e,t,s),t!==e.state.focused&&((0,i.notify)(r,s),e.isMounted()&&e.setState({focused:t}))})})}var s,a=e.willHandle,o=e.didHandle;return s={handleBlur:function(e){t(this,!1,e)},handleFocus:function(e){t(this,!0,e)}},r(s,"handleBlur",[n.widgetEnabled],Object.getOwnPropertyDescriptor(s,"handleBlur"),s),r(s,"handleFocus",[n.widgetEnabled],Object.getOwnPropertyDescriptor(s,"handleFocus"),s),s}s.__esModule=!0,s.default=o;var i=e("../util/widgetHelpers"),n=e("../util/interaction"),l=e("../util/compat"),u=a(l);t.exports=s.default},{"../util/compat":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/compat.js","../util/interaction":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/interaction.js","../util/widgetHelpers":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/widgetHelpers.js"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/mixins/ListMovementMixin.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,s){return e?(e=e.toLowerCase(),function(t){return i.default.startsWith((0,n.dataText)(t,s).toLowerCase(),e)}):function(){return!0}}s.__esModule=!0;var o=e("../util/filter"),i=a(o),n=e("../util/dataHelpers"),l=e("../util/propTypes"),u=a(l),d=e("../util/interaction"),c={},m=function(e,t){return(0,d.isDisabledItem)(e,t)||(0,d.isReadOnlyItem)(e,t)};s.default={propTypes:{textField:u.default.accessor,valueField:u.default.accessor,disabled:u.default.disabled.acceptsArray,readOnly:u.default.readOnly.acceptsArray},first:function(){return this.next(c)},last:function(){var e=this._data(),t=e[e.length-1];return m(t,this.props)?this.prev(t):t},prev:function(e,t){var s=this._data(),a=s.indexOf(e),o=r(t,e,this.props.textField);for((a<0||null==a)&&(a=0),a--;a>-1&&(m(s[a],this.props)||!o(s[a]));)a--;return a>=0?s[a]:e},next:function(e,t){for(var s=this._data(),a=s.indexOf(e)+1,o=s.length,i=r(t,e,this.props.textField);a<o&&(m(s[a],this.props)||!i(s[a]));)a++;return a<o?s[a]:e}},t.exports=s.default},{"../util/dataHelpers":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/dataHelpers.js","../util/filter":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/filter.js","../util/interaction":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/interaction.js","../util/propTypes":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/propTypes.js"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/mixins/PopupScrollToMixin.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}s.__esModule=!0;var r=e("dom-helpers/util/scrollTo"),o=a(r);s.default={_scrollTo:function(e,t,s){var a,r,i=this._scrollState||(this._scrollState={}),n=this.props.onMove,l=i.visible,u=i.focused;i.visible=!(!t.offsetWidth||!t.offsetHeight),i.focused=s,r=u!==s,a=i.visible&&!l,(a||i.visible&&r)&&(n?n(e,t,s):(i.scrollCancel&&i.scrollCancel(),i.scrollCancel=(0,o.default)(e,t)))}},t.exports=s.default},{"dom-helpers/util/scrollTo":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/util/scrollTo.js"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/mixins/PureRenderMixin.js":[function(e,t,s){"use strict";var a=e("../util/_");t.exports={shouldComponentUpdate:function(e,t){return!a.isShallowEqual(this.props,e)||!a.isShallowEqual(this.state,t)}}},{"../util/_":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/_.js"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/mixins/RtlChildContextMixin.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}s.__esModule=!0;var r=e("react"),o=a(r);s.default={contextTypes:{isRtl:o.default.PropTypes.bool},isRtl:function(){return!!this.context.isRtl}},t.exports=s.default},{react:"react"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/mixins/RtlParentContextMixin.js":[function(e,t,s){"use strict";var a=e("react");t.exports={propTypes:{isRtl:a.PropTypes.bool},contextTypes:{isRtl:a.PropTypes.bool},childContextTypes:{isRtl:a.PropTypes.bool},getChildContext:function(){return{isRtl:!!(this.props.isRtl||this.context&&this.context.isRtl)}},isRtl:function(){return!!(this.props.isRtl||this.context&&this.context.isRtl)}}},{react:"react"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/mixins/TimeoutMixin.js":[function(e,t,s){"use strict";var a=e("../util/_"),r=a.has;t.exports={componentWillUnmount:function(){var e=this._timers||{};this._unmounted=!0;for(var t in e)r(e,t)&&this.clearTimeout(t)},clearTimeout:function(e){var t=this._timers||{};window.clearTimeout(t[e])},setTimeout:function(e,t,s){var a=this,r=this._timers||(this._timers=Object.create(null));this._unmounted||(this.clearTimeout(e),r[e]=window.setTimeout(function(){a._unmounted||t()},s))}}},{"../util/_":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/_.js"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/_.js":[function(e,t,s){"use strict";function a(e,t){return!!e&&Object.prototype.hasOwnProperty.call(e,t)}function r(e,t){return e===t}function o(e,t){if(null==e||null==t)return!1;var s=Object.keys(e),o=Object.keys(t);if(s.length!==o.length)return!1;for(var i=0;i<s.length;i++)if(!a(t,s[i])||!r(e[s[i]],t[s[i]]))return!1;return!0}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=0,l=t.exports={has:a,result:function(e){for(var t=arguments.length,s=Array(t>1?t-1:0),a=1;a<t;a++)s[a-1]=arguments[a];return"function"==typeof e?e.apply(void 0,s):e},isShallowEqual:function(e,t){return e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():"object"!==("undefined"==typeof e?"undefined":i(e))&&"object"!==("undefined"==typeof t?"undefined":i(t))?e===t:("undefined"==typeof e?"undefined":i(e))===("undefined"==typeof t?"undefined":i(t))&&o(e,t))},transform:function(e,t,s){return l.each(e,t.bind(null,s=s||(Array.isArray(e)?[]:{}))),s},each:function(e,t,s){if(Array.isArray(e))return e.forEach(t,s);for(var r in e)a(e,r)&&t.call(s,e[r],r,e)},pick:function(e,t){return t=[].concat(t),l.transform(e,function(e,s,a){t.indexOf(a)!==-1&&(e[a]=s)},{})},pickProps:function(e,t){return l.pick(e,Object.keys(t.propTypes))},omit:function(e,t){return t=[].concat(t),l.transform(e,function(e,s,a){t.indexOf(a)===-1&&(e[a]=s)},{})},omitOwnProps:function(e){for(var t=arguments.length,s=Array(t>1?t-1:0),a=1;a<t;a++)s[a-1]=arguments[a];var r=s.reduce(function(e,t){return e.concat(Object.keys(t.propTypes))},Object.keys(e.constructor.propTypes));return l.omit(e.props,r)},find:function(e,t,s){var r;if(Array.isArray(e))return e.every(function(a,o){return!t.call(s,a,o,e)||(r=a,!1)}),r;for(var o in e)if(a(e,o)&&t.call(s,e[o],o,e))return e[o]},chunk:function(e,t){var s=0,a=e?e.length:0,r=[];for(t=Math.max(+t||1,1);s<a;)r.push(e.slice(s,s+=t));return r},splat:function(e){return null==e?[]:[].concat(e)},noop:function(){},uniqueId:function(e){return""+((null==e?"":e)+ ++n)}}},{}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/compat.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var r=e("react"),o=a(r),i=e("react-dom"),n=a(i),l=o.default.version.split(".").map(parseFloat);t.exports={version:function(){return l},findDOMNode:function(e){return n.default.findDOMNode(e)},batchedUpdates:function(e){n.default.unstable_batchedUpdates(e)}}},{react:"react","react-dom":"react-dom"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/configuration.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}s.__esModule=!0;var r=e("./dom/animate"),o=a(r);s.default={animate:o.default},t.exports=s.default},{"./dom/animate":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/dom/animate.js"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/constants.js":[function(e,t,s){"use strict";s.__esModule=!0;var a,r,o={MONTH:"month",YEAR:"year",DECADE:"decade",CENTURY:"century"};s.directions={LEFT:"LEFT",RIGHT:"RIGHT",UP:"UP",DOWN:"DOWN"},s.datePopups={TIME:"time",CALENDAR:"calendar"},s.calendarViews=o,s.calendarViewHierarchy=(a={},a[o.MONTH]=o.YEAR,a[o.YEAR]=o.DECADE,a[o.DECADE]=o.CENTURY,a),s.calendarViewUnits=(r={},r[o.MONTH]="day",r[o.YEAR]=o.MONTH,r[o.DECADE]=o.YEAR,r[o.CENTURY]=o.DECADE,r)},{}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/dataHelpers.js":[function(e,t,s){"use strict";function a(e,t){var s=e;return"function"==typeof t?s=t(e):null==e?s=e:"string"==typeof t&&"object"===("undefined"==typeof e?"undefined":u(e))&&t in e&&(s=e[t]),s}function r(e,t){return t&&e&&(0,d.has)(e,t)?e[t]:e}function o(e,t){var s=a(e,t);return null==s?"":s+""}function i(e,t,s){for(var a=-1,r=e.length,o=function(e){return n(t,e,s)};++a<r;){var i=e[a];if(i===t||o(i))return a}return-1}function n(e,t,s){return(0,d.isShallowEqual)(r(e,s),r(t,s))}function l(e,t,s){var a=i(e,r(t,s),s);return a!==-1?e[a]:t}s.__esModule=!0;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};s.dataValue=r,s.dataText=o,s.dataIndexOf=i,s.valueMatcher=n,s.dataItem=l;var d=e("./_")},{"./_":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/_.js"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/dates.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}s.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},o=e("date-arithmetic"),i=a(o),n=e("./constants"),l=e("./localizers"),u=r(i.default,{parse:function(e,t,s){return l.date.parse(e,t,s)},format:function(e,t,s){return l.date.format(e,t,s)},monthsInYear:function(e){var t=[0,1,2,3,4,5,6,7,8,9,10,11],s=new Date(e,0,1);return t.map(function(e){return u.month(s,e)})},firstVisibleDay:function(e,t){var s=u.startOf(e,"month");return u.startOf(s,"week",l.date.startOfWeek(t))},lastVisibleDay:function(e,t){var s=u.endOf(e,"month");return u.endOf(s,"week",l.date.startOfWeek(t))},visibleDays:function(e,t){for(var s=u.firstVisibleDay(e,t),a=u.lastVisibleDay(e,t),r=[];u.lte(s,a,"day");)r.push(s),s=u.add(s,1,"day");return r},move:function(e,t,s,a,r){var o,i="month"===a,l=r===n.directions.UP||r===n.directions.DOWN,d=n.calendarViewUnits[a],c=i&&l?"week":n.calendarViewUnits[a],m=i||!l?1:4;return r!==n.directions.UP&&r!==n.directions.LEFT||(m*=-1),o=u.add(e,m,c),u.inRange(o,t,s,d)?o:e},merge:function(e,t,s){return null==t&&null==e?null:(null==t&&(t=s||new Date),null==e&&(e=s||new Date),e=u.startOf(e,"day"),e=u.hours(e,u.hours(t)),e=u.minutes(e,u.minutes(t)),e=u.seconds(e,u.seconds(t)),u.milliseconds(e,u.milliseconds(t)))},sameMonth:function(e,t){return u.eq(e,t,"month")},today:function(){return this.startOf(new Date,"day")},yesterday:function(){return this.add(this.startOf(new Date,"day"),-1,"day")},tomorrow:function(){return this.add(this.startOf(new Date,"day"),1,"day")}});s.default=u,t.exports=s.default},{"./constants":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/constants.js","./localizers":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/localizers.js","date-arithmetic":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/date-arithmetic/index.js"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/dom/animate.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,s,a,r){function o(t){t.target===t.currentTarget&&(n=!0,(0,m.default)(t.target,f.default.end,o),(0,l.default)(e,y),r&&r.call(this))}var n,u=[],c={target:e,currentTarget:e},p={},v="";"function"==typeof a&&(r=a,a=null),f.default.end||(s=0),void 0===s&&(s=200);for(var b in t)h.call(t,b)&&(/(top|bottom)/.test(b)?v+=g[b]+"("+t[b]+") ":(p[b]=t[b],u.push((0,i.default)(b))));return v&&(p[f.default.transform]=v,u.push(f.default.transform)),s>0&&(p[f.default.property]=u.join(", "),p[f.default.duration]=s/1e3+"s",p[f.default.delay]="0s",p[f.default.timing]=a||"linear",(0,d.default)(e,f.default.end,o),setTimeout(function(){n||o(c)},s+500)),e.clientLeft,(0,l.default)(e,p),s<=0&&setTimeout(o.bind(null,c),0),{cancel:function(){n||(n=!0,(0,m.default)(e,f.default.end,o),(0,l.default)(e,y))}}}s.__esModule=!0,s.default=r;var o=e("dom-helpers/util/hyphenate"),i=a(o),n=e("dom-helpers/style"),l=a(n),u=e("dom-helpers/events/on"),d=a(u),c=e("dom-helpers/events/off"),m=a(c),p=e("dom-helpers/transition/properties"),f=a(p),h=Object.prototype.hasOwnProperty,y={},g={left:"translateX",right:"translateX",top:"translateY",bottom:"translateY"};y[f.default.property]=y[f.default.duration]=y[f.default.delay]=y[f.default.timing]="",r.endEvent=f.default.end,r.transform=f.default.transform,r.TRANSLATION_MAP=g,t.exports=s.default},{"dom-helpers/events/off":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/events/off.js","dom-helpers/events/on":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/events/on.js","dom-helpers/style":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/style/index.js","dom-helpers/transition/properties":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/transition/properties.js","dom-helpers/util/hyphenate":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/util/hyphenate.js"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/filter.js":[function(e,t,s){"use strict";s.__esModule=!0;var a={eq:function(e,t){return e===t},neq:function(e,t){return e!==t},gt:function(e,t){return e>t},gte:function(e,t){return e>=t},lt:function(e,t){return e<t},lte:function(e,t){return e<=t},contains:function(e,t){return e.indexOf(t)!==-1},startsWith:function(e,t){return 0===e.lastIndexOf(t,0)},endsWith:function(e,t){var s=e.length-t.length,a=e.indexOf(t,s);return a!==-1&&a===s}};s.default=a,t.exports=s.default},{}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/interaction.js":[function(e,t,s){"use strict";function a(e){return e.disabled===!0||"disabled"===e.disabled}function r(e){return e.readOnly===!0||"readOnly"===e.readOnly}function o(e,t){return a(t)||n(e,t.disabled,t.valueField)}function i(e,t){return r(t)||n(e,t.readOnly,t.valueField)}function n(e,t,s){return Array.isArray(t)?t.some(function(t){return(0,d.valueMatcher)(e,t,s)}):(0,d.valueMatcher)(e,t,s)}function l(e,t,s,a){for(var r=function(e){return o(e,s)||i(e,s)},n="next"===e?a.last():a.first(),l=a[e](t);l!==n&&r(l);)l=a[e](l);return r(l)?t:l}function u(e){function t(t){return function(){for(var s=arguments.length,o=Array(s),i=0;i<s;i++)o[i]=arguments[i];if(!(a(this.props)||!e&&r(this.props)))return t.apply(this,o)}}return function(e,s,a){return a.initializer?!function(){var e=a.initializer;a.initializer=function(){return t(e())}}():a.value=t(a.value),a}}s.__esModule=!0,s.widgetEditable=s.widgetEnabled=void 0,s.isDisabled=a,s.isReadOnly=r,s.isDisabledItem=o,s.isReadOnlyItem=i,s.contains=n,s.move=l;var d=e("./dataHelpers");s.widgetEnabled=u(!0),s.widgetEditable=u(!1)},{"./dataHelpers":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/dataHelpers.js"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/localizers.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,s,a,r){var o="function"==typeof a?a(s,r,e):t.call(e,s,a,r);return(0,d.default)(null==o||"string"==typeof o,"`localizer format(..)` must return a string, null, or undefined"),o}function o(e,t){}function i(e){var t=e.format,s=e.parse,a=e.decimalChar,i=void 0===a?function(){return"."}:a,n=e.precision,l=void 0===n?function(){return null}:n,u=e.formats,c=e.propType;(0,d.default)("function"==typeof t,"number localizer `format(..)` must be a function"),(0,d.default)("function"==typeof s,"number localizer `parse(..)` must be a function"),o(f,u),u.editFormat=u.editFormat||function(e){return parseFloat(e)},y={formats:u,precision:l,decimalChar:i,propType:c||p,format:function(e,s,a){return r(this,t,e,s,a)},parse:function(e,t,a){var r=s.call(this,e,t,a);return(0,d.default)(null==r||"number"==typeof r,"number localizer `parse(..)` must return a number, null, or undefined"),r}}}function n(e){(0,d.default)("function"==typeof e.format,"date localizer `format(..)` must be a function"),(0,d.default)("function"==typeof e.parse,"date localizer `parse(..)` must be a function"),
(0,d.default)("function"==typeof e.firstOfWeek,"date localizer `firstOfWeek(..)` must be a function"),o(h,e.formats),g={formats:e.formats,propType:e.propType||p,startOfWeek:e.firstOfWeek,format:function(t,s,a){return r(this,e.format,t,s,a)},parse:function(t,s){var a=e.parse.call(this,t,s);return(0,d.default)(null==a||a instanceof Date&&!isNaN(a.getTime()),"date localizer `parse(..)` must return a valid Date, null, or undefined"),a}}}function l(){var e={};return e}s.__esModule=!0,s.date=s.number=s.setNumber=void 0,s.setDate=n;var u=e("invariant"),d=a(u),c=(e("./_"),e("react")),m=a(c),p=m.default.PropTypes.oneOfType([m.default.PropTypes.string,m.default.PropTypes.func]),f=["default"],h=["default","date","time","header","footer","dayOfMonth","month","year","decade","century"],y=l("NumberPicker");s.setNumber=i;var g=l("DateTimePicker"),v=s.number={propType:function(){var e;return(e=y).propType.apply(e,arguments)},getFormat:function(e,t){return t||y.formats[e]},parse:function(){var e;return(e=y).parse.apply(e,arguments)},format:function(){var e;return(e=y).format.apply(e,arguments)},decimalChar:function(){var e;return(e=y).decimalChar.apply(e,arguments)},precision:function(){var e;return(e=y).precision.apply(e,arguments)}},b=s.date={propType:function(){var e;return(e=g).propType.apply(e,arguments)},getFormat:function(e,t){return t||g.formats[e]},parse:function(){var e;return(e=g).parse.apply(e,arguments)},format:function(){var e;return(e=g).format.apply(e,arguments)},startOfWeek:function(){var e;return(e=g).startOfWeek.apply(e,arguments)}};s.default={number:v,date:b}},{"./_":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/_.js",invariant:"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/invariant/browser.js",react:"react"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/propTypes.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=[i.PropTypes.bool,i.PropTypes.oneOf([e])],s=i.PropTypes.oneOfType(t);return s.acceptsArray=i.PropTypes.oneOfType(t.concat(i.PropTypes.array)),s}function o(e){function t(t,s,a,r){r=r||"<<anonymous>>";for(var o=arguments.length,i=Array(o>4?o-4:0),n=4;n<o;n++)i[n-4]=arguments[n];return null!=s[a]?e.apply(void 0,[s,a,r].concat(i)):t?new Error("Required prop `"+a+"` was not specified in  `"+r+"`."):void 0}var s=t.bind(null,!1);return s.isRequired=t.bind(null,!0),s}var i=e("react"),n=a(i),l=e("./localizers"),u=a(l),d=e("./filter"),c=a(d),m=Object.keys(c.default).filter(function(e){return"filter"!==e});t.exports={elementType:o(function(e,t,s){if("function"!=typeof e[t]){if(n.default.isValidElement(e[t]))return new Error("Invalid prop `"+t+"` specified in  `"+s+"`. Expected an Element `type`, not an actual Element");if("string"!=typeof e[t])return new Error("Invalid prop `"+t+"` specified in  `"+s+"`. Expected an Element `type` such as a tag name or return value of React.createClass(...)")}return null}),numberFormat:o(function(){var e;return(e=u.default.number).propType.apply(e,arguments)}),dateFormat:o(function(){var e;return(e=u.default.date).propType.apply(e,arguments)}),disabled:r("disabled"),readOnly:r("readOnly"),accessor:n.default.PropTypes.oneOfType([n.default.PropTypes.string,n.default.PropTypes.func]),message:n.default.PropTypes.oneOfType([n.default.PropTypes.node,n.default.PropTypes.string]),filter:n.default.PropTypes.oneOfType([n.default.PropTypes.func,n.default.PropTypes.bool,n.default.PropTypes.oneOf(m)])}},{"./filter":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/filter.js","./localizers":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/localizers.js",react:"react"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/widgetHelpers.js":[function(e,t,s){"use strict";function a(e,t){e&&e.apply(null,[].concat(t))}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.__id||(e.__id=(0,i.uniqueId)("rw_")),(e.props.id||e.__id)+t}function o(e){return e._firstFocus||e.state.focused&&(e._firstFocus=!0)}s.__esModule=!0,s.notify=a,s.instanceId=r,s.isFirstFocusedRender=o;var i=e("./_")},{"./_":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/lib/util/_.js"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/date-arithmetic/index.js":[function(e,t,s){function a(e){return e<0?Math.ceil(e):Math.floor(e)}function r(e,t){var s=g.month(e),a=s+t;for(e=g.month(e,a);a<0;)a=12+a;return g.month(e)!==a%12&&(e=g.date(e,0)),e}function o(e){return function(t,s){return void 0===s?t["get"+e]():(t=new Date(t),t["set"+e](s),t)}}function i(e){return function(t,s,a){return e(+g.startOf(t,a),+g.startOf(s,a))}}var n="milliseconds",l="seconds",u="minutes",d="hours",c="day",m="week",p="month",f="year",h="decade",y="century",g=t.exports={add:function(e,t,s){switch(e=new Date(e),s){case n:case l:case u:case d:case f:return g[s](e,g[s](e)+t);case c:return g.date(e,g.date(e)+t);case m:return g.date(e,g.date(e)+7*t);case p:return r(e,t);case h:return g.year(e,g.year(e)+10*t);case y:return g.year(e,g.year(e)+100*t)}throw new TypeError('Invalid units: "'+s+'"')},subtract:function(e,t,s){return g.add(e,-t,s)},startOf:function(e,t,s){switch(e=new Date(e),t){case"century":case"decade":case"year":e=g.month(e,0);case"month":e=g.date(e,1);case"week":case"day":e=g.hours(e,0);case"hours":e=g.minutes(e,0);case"minutes":e=g.seconds(e,0);case"seconds":e=g.milliseconds(e,0)}return t===h&&(e=g.subtract(e,g.year(e)%10,"year")),t===y&&(e=g.subtract(e,g.year(e)%100,"year")),t===m&&(e=g.weekday(e,0,s)),e},endOf:function(e,t,s){return e=new Date(e),e=g.startOf(e,t,s),e=g.add(e,1,t),e=g.subtract(e,1,n)},eq:i(function(e,t){return e===t}),neq:i(function(e,t){return e!==t}),gt:i(function(e,t){return e>t}),gte:i(function(e,t){return e>=t}),lt:i(function(e,t){return e<t}),lte:i(function(e,t){return e<=t}),min:function(){return new Date(Math.min.apply(Math,arguments))},max:function(){return new Date(Math.max.apply(Math,arguments))},inRange:function(e,t,s,a){return a=a||"day",(!t||g.gte(e,t,a))&&(!s||g.lte(e,s,a))},milliseconds:o("Milliseconds"),seconds:o("Seconds"),minutes:o("Minutes"),hours:o("Hours"),day:o("Day"),date:o("Date"),month:o("Month"),year:o("FullYear"),decade:function(e,t){return void 0===t?g.year(g.startOf(e,h)):g.add(e,t+10,f)},century:function(e,t){return void 0===t?g.year(g.startOf(e,y)):g.add(e,t+100,f)},weekday:function(e,t,s){var a=(g.day(e)+7-(s||0))%7;return void 0===t?a:g.add(e,t-a,c)},diff:function(e,t,s,r){var o,i,v;switch(s){case n:case l:case u:case d:case c:case m:o=t.getTime()-e.getTime();break;case p:case f:case h:case y:o=12*(g.year(t)-g.year(e))+g.month(t)-g.month(e);break;default:throw new TypeError('Invalid units: "'+s+'"')}switch(s){case n:i=1;break;case l:i=1e3;break;case u:i=6e4;break;case d:i=36e5;break;case c:i=864e5;break;case m:i=6048e5;break;case p:i=1;break;case f:i=12;break;case h:i=120;break;case y:i=1200;break;default:throw new TypeError('Invalid units: "'+s+'"')}return v=o/i,r?v:a(v)}}},{}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/activeElement.js":[function(e,t,s){"use strict";function a(){var e=void 0===arguments[0]?document:arguments[0];try{return e.activeElement}catch(e){}}var r=e("./util/babelHelpers.js");s.__esModule=!0,s.default=a;var o=e("./ownerDocument");r.interopRequireDefault(o);t.exports=s.default},{"./ownerDocument":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/ownerDocument.js","./util/babelHelpers.js":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/util/babelHelpers.js"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/events/off.js":[function(e,t,s){"use strict";var a=e("../util/inDOM"),r=function(){};a&&(r=function(){return document.addEventListener?function(e,t,s,a){return e.removeEventListener(t,s,a||!1)}:document.attachEvent?function(e,t,s){return e.detachEvent("on"+t,s)}:void 0}()),t.exports=r},{"../util/inDOM":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/util/inDOM.js"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/events/on.js":[function(e,t,s){"use strict";var a=e("../util/inDOM"),r=function(){};a&&(r=function(){return document.addEventListener?function(e,t,s,a){return e.addEventListener(t,s,a||!1)}:document.attachEvent?function(e,t,s){return e.attachEvent("on"+t,s)}:void 0}()),t.exports=r},{"../util/inDOM":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/util/inDOM.js"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/ownerDocument.js":[function(e,t,s){"use strict";function a(e){return e&&e.ownerDocument||document}s.__esModule=!0,s.default=a,t.exports=s.default},{}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/query/contains.js":[function(e,t,s){"use strict";var a=e("../util/inDOM"),r=function(){var e=a&&document.documentElement;return e&&e.contains?function(e,t){return e.contains(t)}:e&&e.compareDocumentPosition?function(e,t){return e===t||!!(16&e.compareDocumentPosition(t))}:function(e,t){if(t)do if(t===e)return!0;while(t=t.parentNode);return!1}}();t.exports=r},{"../util/inDOM":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/util/inDOM.js"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/query/height.js":[function(e,t,s){"use strict";var a=e("./offset"),r=e("./isWindow");t.exports=function(e,t){var s=r(e);return s?s.innerHeight:t?e.clientHeight:a(e).height}},{"./isWindow":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/query/isWindow.js","./offset":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/query/offset.js"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/query/isWindow.js":[function(e,t,s){"use strict";t.exports=function(e){return e===e.window?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}},{}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/query/offset.js":[function(e,t,s){"use strict";var a=e("./contains"),r=e("./isWindow"),o=e("../ownerDocument");t.exports=function(e){var t=o(e),s=r(t),i=t&&t.documentElement,n={top:0,left:0,height:0,width:0};if(t)return a(i,e)?(void 0!==e.getBoundingClientRect&&(n=e.getBoundingClientRect()),(n.width||n.height)&&(n={top:n.top+(s.pageYOffset||i.scrollTop)-(i.clientTop||0),left:n.left+(s.pageXOffset||i.scrollLeft)-(i.clientLeft||0),width:(null==n.width?e.offsetWidth:n.width)||0,height:(null==n.height?e.offsetHeight:n.height)||0}),n):n}},{"../ownerDocument":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/ownerDocument.js","./contains":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/query/contains.js","./isWindow":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/query/isWindow.js"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/query/scrollParent.js":[function(e,t,s){"use strict";var a=e("../style"),r=e("./height");t.exports=function(e){var t=a(e,"position"),s="absolute"===t,o=e.ownerDocument;if("fixed"===t)return o||document;for(;(e=e.parentNode)&&9!==e.nodeType;){var i=s&&"static"===a(e,"position"),n=a(e,"overflow")+a(e,"overflow-y")+a(e,"overflow-x");if(!i&&/(auto|scroll)/.test(n)&&r(e)<e.scrollHeight)return e}return document}},{"../style":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/style/index.js","./height":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/query/height.js"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/query/scrollTop.js":[function(e,t,s){"use strict";var a=e("./isWindow");t.exports=function(e,t){var s=a(e);return void 0===t?s?"pageYOffset"in s?s.pageYOffset:s.document.documentElement.scrollTop:e.scrollTop:void(s?s.scrollTo("pageXOffset"in s?s.pageXOffset:s.document.documentElement.scrollLeft,t):e.scrollTop=t)}},{"./isWindow":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/query/isWindow.js"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/query/width.js":[function(e,t,s){"use strict";var a=e("./offset"),r=e("./isWindow");t.exports=function(e,t){var s=r(e);return s?s.innerWidth:t?e.clientWidth:a(e).width}},{"./isWindow":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/query/isWindow.js","./offset":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/query/offset.js"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/style/getComputedStyle.js":[function(e,t,s){"use strict";var a=e("../util/babelHelpers.js"),r=e("../util/camelizeStyle"),o=a.interopRequireDefault(r),i=/^(top|right|bottom|left)$/,n=/^([+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|))(?!px)[a-z%]+$/i;t.exports=function(e){if(!e)throw new TypeError("No Element passed to `getComputedStyle()`");var t=e.ownerDocument;return"defaultView"in t?t.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):window.getComputedStyle(e,null):{getPropertyValue:function(t){var s=e.style;t=(0,o.default)(t),"float"==t&&(t="styleFloat");var a=e.currentStyle[t]||null;if(null==a&&s&&s[t]&&(a=s[t]),n.test(a)&&!i.test(t)){var r=s.left,l=e.runtimeStyle,u=l&&l.left;u&&(l.left=e.currentStyle.left),s.left="fontSize"===t?"1em":a,a=s.pixelLeft+"px",s.left=r,u&&(l.left=u)}return a}}}},{"../util/babelHelpers.js":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/util/babelHelpers.js","../util/camelizeStyle":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/util/camelizeStyle.js"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/style/index.js":[function(e,t,s){"use strict";var a=e("../util/camelizeStyle"),r=e("../util/hyphenateStyle"),o=e("./getComputedStyle"),i=e("./removeStyle"),n=Object.prototype.hasOwnProperty;t.exports=function(e,t,s){var l="",u=t;if("string"==typeof t){if(void 0===s)return e.style[a(t)]||o(e).getPropertyValue(r(t));(u={})[t]=s}for(var d in u)n.call(u,d)&&(u[d]||0===u[d]?l+=r(d)+":"+u[d]+";":i(e,r(d)));e.style.cssText+=";"+l}},{"../util/camelizeStyle":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/util/camelizeStyle.js","../util/hyphenateStyle":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/util/hyphenateStyle.js","./getComputedStyle":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/style/getComputedStyle.js","./removeStyle":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/style/removeStyle.js"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/style/removeStyle.js":[function(e,t,s){"use strict";t.exports=function(e,t){return"removeProperty"in e.style?e.style.removeProperty(t):e.style.removeAttribute(t)}},{}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/transition/properties.js":[function(e,t,s){"use strict";function a(){var e,t="",s={O:"otransitionend",Moz:"transitionend",Webkit:"webkitTransitionEnd",ms:"MSTransitionEnd"},a=document.createElement("div");for(var r in s)if(u.call(s,r)&&void 0!==a.style[r+"TransitionProperty"]){t="-"+r.toLowerCase()+"-",e=s[r];break}return e||void 0===a.style.transitionProperty||(e="transitionend"),{end:e,prefix:t}}var r,o,i,n,l=e("../util/inDOM"),u=Object.prototype.hasOwnProperty,d="transform",c={};l&&(c=a(),d=c.prefix+d,i=c.prefix+"transition-property",o=c.prefix+"transition-duration",n=c.prefix+"transition-delay",r=c.prefix+"transition-timing-function"),t.exports={transform:d,end:c.end,property:i,timing:r,delay:n,duration:o}},{"../util/inDOM":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/util/inDOM.js"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/util/babelHelpers.js":[function(e,t,s){!function(e,t){"function"==typeof define&&define.amd?define(["exports"],t):t("object"==typeof s?s:e.babelHelpers={})}(this,function(e){var t=e;t.interopRequireDefault=function(e){return e&&e.__esModule?e:{default:e}},t._extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}})},{}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/util/camelize.js":[function(e,t,s){"use strict";var a=/-(.)/g;t.exports=function(e){return e.replace(a,function(e,t){return t.toUpperCase()})}},{}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/util/camelizeStyle.js":[function(e,t,s){"use strict";var a=e("./camelize"),r=/^-ms-/;t.exports=function(e){return a(e.replace(r,"ms-"))}},{"./camelize":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/util/camelize.js"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/util/hyphenate.js":[function(e,t,s){"use strict";var a=/([A-Z])/g;t.exports=function(e){return e.replace(a,"-$1").toLowerCase()}},{}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/util/hyphenateStyle.js":[function(e,t,s){"use strict";var a=e("./hyphenate"),r=/^ms-/;t.exports=function(e){return a(e).replace(r,"-ms-")}},{"./hyphenate":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/util/hyphenate.js"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/util/inDOM.js":[function(e,t,s){"use strict";t.exports=!("undefined"==typeof window||!window.document||!window.document.createElement)},{}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/util/requestAnimationFrame.js":[function(e,t,s){"use strict";function a(e){var t=(new Date).getTime(),s=Math.max(0,16-(t-d)),a=setTimeout(e,s);return d=t,a}var r,o=e("./inDOM"),i=["","webkit","moz","o","ms"],n="clearTimeout",l=a,u=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};o&&i.some(function(e){var t=u(e,"request");if(t in window)return n=u(e,"cancel"),l=function(e){return window[t](e)}});var d=(new Date).getTime();r=function(e){return l(e)},r.cancel=function(e){return window[n](e)},t.exports=r},{"./inDOM":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/util/inDOM.js"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/util/scrollTo.js":[function(e,t,s){"use strict";var a=e("../query/offset"),r=e("../query/height"),o=e("../query/scrollParent"),i=e("../query/scrollTop"),n=e("./requestAnimationFrame"),l=e("../query/isWindow");t.exports=function(e,t){var s,u,d,c,m,p,f,h=a(e),y={top:0,left:0};if(e){s=t||o(e),c=l(s),u=i(s),p=r(s,!0),c=l(s),c||(y=a(s)),h={top:h.top-y.top,left:h.left-y.left,height:h.height,width:h.width},m=h.height,d=h.top+(c?0:u),f=d+m,u=u>d?d:f>u+p?f-p:u;var g=n(function(){return i(s,u)});return function(){return n.cancel(g)}}}},{"../query/height":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/query/height.js","../query/isWindow":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/query/isWindow.js","../query/offset":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/query/offset.js","../query/scrollParent":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/query/scrollParent.js","../query/scrollTop":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/query/scrollTop.js","./requestAnimationFrame":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/dom-helpers/util/requestAnimationFrame.js"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/invariant/browser.js":[function(e,t,s){"use strict";var a=function(e,t,s,a,r,o,i,n){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[s,a,r,o,i,n],d=0;l=new Error(t.replace(/%s/g,function(){return u[d++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}};t.exports=a},{}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/uncontrollable/createUncontrollable.js":[function(e,t,s){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){function s(a,r){function o(e,s){var a=m.getLinkName(e),o=this.props[r[e]];a&&n(this.props,a)&&!o&&(o=this.props[a].requestChange);for(var i=arguments.length,l=Array(i>2?i-2:0),u=2;u<i;u++)l[u-2]=arguments[u];t(this,e,o,s,l)}function n(e,t){return void 0!==e[t]}function u(e){var t={};return m.each(e,function(e,s){v.indexOf(s)===-1&&(t[s]=e)}),t}var c,p=arguments.length<=2||void 0===arguments[2]?[]:arguments[2],f=a.displayName||a.name||"Component",h=m.getType(a).propTypes,y=m.isReactComponent(a),g=Object.keys(r),v=["valueLink","checkedLink"].concat(g.map(m.defaultKey));c=m.uncontrolledPropTypes(r,h,f),(0,d.default)(y||!p.length,"[uncontrollable] stateless function components cannot pass through methods because they have no associated instances. Check component: "+f+", attempting to pass through methods: "+p.join(", ")),p=m.transform(p,function(e,t){e[t]=function(){var e;return(e=this.refs.inner)[t].apply(e,arguments)}},{});var b=l.default.createClass(i({displayName:"Uncontrolled("+f+")",mixins:e,propTypes:c},p,{componentWillMount:function(){var e=this,t=this.props;this._values={},g.forEach(function(s){e._values[s]=t[m.defaultKey(s)]})},componentWillReceiveProps:function(e){var t=this,s=this.props;g.forEach(function(a){void 0===m.getValue(e,a)&&void 0!==m.getValue(s,a)&&(t._values[a]=e[m.defaultKey(a)])})},getControlledInstance:function(){return this.refs.inner},render:function(){var e=this,t={},s=u(this.props);return m.each(r,function(s,a){var r=m.getLinkName(a),i=e.props[a];r&&!n(e.props,a)&&n(e.props,r)&&(i=e.props[r].value),t[a]=void 0!==i?i:e._values[a],t[s]=o.bind(e,a)}),t=i({},s,t,{ref:y?"inner":null}),l.default.createElement(a,t)}}));return b.ControlledComponent=a,b.deferControlTo=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=arguments[2];return s(e,i({},r,t),a)},b}return s}s.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e};s.default=o;var n=e("react"),l=r(n),u=e("invariant"),d=r(u),c=e("./utils"),m=a(c);t.exports=s.default},{"./utils":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/uncontrollable/utils.js",invariant:"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/invariant/browser.js",react:"react"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/uncontrollable/index.js":[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,s,a,r){s&&(e._notifying=!0,s.call.apply(s,[e,a].concat(r)),e._notifying=!1),e._values[t]=a,e.isMounted()&&e.forceUpdate()}s.__esModule=!0;var o=e("./createUncontrollable"),i=a(o),n={shouldComponentUpdate:function(){return!this._notifying}};s.default=(0,i.default)([n],r),t.exports=s.default},{"./createUncontrollable":"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/uncontrollable/createUncontrollable.js"}],"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/uncontrollable/utils.js":[function(e,t,s){(function(t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return function(s,a){if(void 0!==s[a]&&!s[e])return new Error("You have provided a `"+a+"` prop to `"+t+"` without an `"+e+"` handler. This will render a read-only field. If the field should be mutable use `"+d(a)+"`. Otherwise, set `"+e+"`")}}function o(e,s,a){var o={};return"production"!==t.env.NODE_ENV&&s&&m(e,function(e,t,s){(0,b.default)("string"==typeof t&&t.trim().length,"Uncontrollable - [%s]: the prop `%s` needs a valid handler key name in order to make it uncontrollable",a,s),e[s]=r(t,a)},o),o}function i(e){return _[0]>=15||0===_[0]&&_[1]>=13?e:e.type}function n(e,t){var s=u(t);return s&&!l(e,t)&&l(e,s)?e[s].value:e[t]}function l(e,t){return void 0!==e[t]}function u(e){return"value"===e?"valueLink":"checked"===e?"checkedLink":null}function d(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function c(e,t,s){return function(){for(var a=arguments.length,r=Array(a),o=0;o<a;o++)r[o]=arguments[o];t&&t.call.apply(t,[e].concat(r)),s&&s.call.apply(s,[e].concat(r))}}function m(e,t,s){return p(e,t.bind(null,s=s||(Array.isArray(e)?[]:{}))),s}function p(e,t,s){if(Array.isArray(e))return e.forEach(t,s);for(var a in e)f(e,a)&&t.call(s,e[a],a,e)}function f(e,t){return!!e&&Object.prototype.hasOwnProperty.call(e,t)}function h(e){return!!(e&&e.prototype&&e.prototype.isReactComponent)}s.__esModule=!0,s.version=void 0,s.uncontrolledPropTypes=o,s.getType=i,s.getValue=n,s.getLinkName=u,s.defaultKey=d,s.chain=c,s.transform=m,s.each=p,s.has=f,s.isReactComponent=h;var y=e("react"),g=a(y),v=e("invariant"),b=a(v),_=s.version=g.default.version.split(".").map(parseFloat)}).call(this,e("_process"))},{_process:"/home/travis/build/hotosm/imagery-requests/node_modules/browserify/node_modules/process/browser.js",invariant:"/home/travis/build/hotosm/imagery-requests/node_modules/react-widgets/node_modules/invariant/browser.js",react:"react"}]},{},["/home/travis/build/hotosm/imagery-requests/app/assets/scripts/main.js"]);